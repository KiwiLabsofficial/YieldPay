import{c as _}from"./index-DTW0HgcQ.js";import{b as At}from"./browser-ponyfill-9BGJdPG5.js";const Se=()=>"9.1.0",Tt=e=>e.toString(16).padStart(2,"0"),wt=e=>{const t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,Tt).join("")},St=()=>typeof window<"u"?wt(10):new Date().getTime().toString(36);class F{}F.makeRequest=(e,t)=>({id:St(),method:e,params:t,env:{sdkVersion:Se()}});F.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});F.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var m;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(m||(m={}));var K;(function(e){e.requestAddressBook="requestAddressBook"})(K||(K={}));class _t{constructor(t=null,n=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:s,data:i,source:r})=>{const o=!i,a=!this.isServer&&r===window.parent,l=typeof i.version<"u"&&parseInt(i.version.split(".")[0]),h=typeof l=="number"&&l>=1;let d=!0;return Array.isArray(this.allowedOrigins)&&(d=this.allowedOrigins.find(g=>g.test(s))!==void 0),!o&&a&&h&&d},this.logIncomingMessage=s=>{console.info(`Safe Apps SDK v1: A message was received from origin ${s.origin}. `,s.data)},this.onParentMessage=s=>{this.isValidMessage(s)&&(this.debugMode&&this.logIncomingMessage(s),this.handleIncomingMessage(s.data))},this.handleIncomingMessage=s=>{const{id:i}=s,r=this.callbacks.get(i);r&&(r(s),this.callbacks.delete(i))},this.send=(s,i)=>{const r=F.makeRequest(s,i);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(r,"*"),new Promise((o,a)=>{this.callbacks.set(r.id,l=>{if(!l.success){a(new Error(l.error));return}o(l)})})},this.allowedOrigins=t,this.debugMode=n,this.isServer||window.addEventListener("message",this.onParentMessage)}}const ce=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;var k={},B={},I={},It=_&&_.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(d){try{h(s.next(d))}catch(g){o(g)}}function l(d){try{h(s.throw(d))}catch(g){o(g)}}function h(d){d.done?r(d.value):i(d.value).then(a,l)}h((s=s.apply(e,t||[])).next())})},Ot=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(I,"__esModule",{value:!0});I.fetchData=I.stringifyQuery=I.insertParams=void 0;const Nt=Ot(At),Ct=e=>typeof e=="object"&&e!==null&&"code"in e&&"message"in e;function Pt(e,t,n){return e.replace(new RegExp(`\\{${t}\\}`,"g"),n)}function vt(e,t){return t?Object.keys(t).reduce((n,s)=>Pt(n,s,String(t[s])),e):e}I.insertParams=vt;function Lt(e){if(!e)return"";const t=new URLSearchParams;Object.keys(e).forEach(s=>{e[s]!=null&&t.append(s,String(e[s]))});const n=t.toString();return n?`?${n}`:""}I.stringifyQuery=Lt;function $t(e,t){return It(this,void 0,void 0,function*(){let n;t!=null&&(n={method:"POST",body:typeof t=="string"?t:JSON.stringify(t),headers:{"Content-Type":"application/json"}});const s=yield(0,Nt.default)(e,n);let i;try{i=yield s.json()}catch{if(s.headers&&s.headers.get("content-length")!=="0")throw new Error(`Invalid response content: ${s.statusText}`)}if(!s.ok){const r=Ct(i)?`${i.code}: ${i.message}`:s.statusText;throw new Error(r)}return i})}I.fetchData=$t;Object.defineProperty(B,"__esModule",{value:!0});B.getEndpoint=B.postEndpoint=void 0;const j=I;function _e(e,t,n,s){const i=(0,j.insertParams)(t,n),r=(0,j.stringifyQuery)(s);return`${e}${i}${r}`}function Mt(e,t,n){const s=_e(e,t,n?.path,n?.query);return(0,j.fetchData)(s,n?.body)}B.postEndpoint=Mt;function Bt(e,t,n,s){if(s)return(0,j.fetchData)(s);const i=_e(e,t,n?.path,n?.query);return(0,j.fetchData)(i)}B.getEndpoint=Bt;var Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.DEFAULT_BASE_URL=void 0;Q.DEFAULT_BASE_URL="https://safe-client.safe.global";var Ie={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationVersionState=void 0,function(t){t.UP_TO_DATE="UP_TO_DATE",t.OUTDATED="OUTDATED",t.UNKNOWN="UNKNOWN"}(e.ImplementationVersionState||(e.ImplementationVersionState={}))})(Ie);var Oe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppSocialPlatforms=e.SafeAppFeatures=e.SafeAppAccessPolicyTypes=void 0,function(t){t.NoRestrictions="NO_RESTRICTIONS",t.DomainAllowlist="DOMAIN_ALLOWLIST"}(e.SafeAppAccessPolicyTypes||(e.SafeAppAccessPolicyTypes={})),function(t){t.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"}(e.SafeAppFeatures||(e.SafeAppFeatures={})),function(t){t.TWITTER="TWITTER",t.GITHUB="GITHUB",t.DISCORD="DISCORD"}(e.SafeAppSocialPlatforms||(e.SafeAppSocialPlatforms={}))})(Oe);var Ne={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LabelValue=e.DetailedExecutionInfoType=e.TransactionListItemType=e.ConflictType=e.TransactionInfoType=e.SettingsInfoType=e.TransactionTokenType=e.TransferDirection=e.TransactionStatus=e.Operation=void 0,function(t){t[t.CALL=0]="CALL",t[t.DELEGATE=1]="DELEGATE"}(e.Operation||(e.Operation={})),function(t){t.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",t.AWAITING_EXECUTION="AWAITING_EXECUTION",t.CANCELLED="CANCELLED",t.FAILED="FAILED",t.SUCCESS="SUCCESS"}(e.TransactionStatus||(e.TransactionStatus={})),function(t){t.INCOMING="INCOMING",t.OUTGOING="OUTGOING",t.UNKNOWN="UNKNOWN"}(e.TransferDirection||(e.TransferDirection={})),function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_COIN="NATIVE_COIN"}(e.TransactionTokenType||(e.TransactionTokenType={})),function(t){t.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",t.ADD_OWNER="ADD_OWNER",t.REMOVE_OWNER="REMOVE_OWNER",t.SWAP_OWNER="SWAP_OWNER",t.CHANGE_THRESHOLD="CHANGE_THRESHOLD",t.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",t.ENABLE_MODULE="ENABLE_MODULE",t.DISABLE_MODULE="DISABLE_MODULE",t.SET_GUARD="SET_GUARD",t.DELETE_GUARD="DELETE_GUARD"}(e.SettingsInfoType||(e.SettingsInfoType={})),function(t){t.TRANSFER="Transfer",t.SETTINGS_CHANGE="SettingsChange",t.CUSTOM="Custom",t.CREATION="Creation"}(e.TransactionInfoType||(e.TransactionInfoType={})),function(t){t.NONE="None",t.HAS_NEXT="HasNext",t.END="End"}(e.ConflictType||(e.ConflictType={})),function(t){t.TRANSACTION="TRANSACTION",t.LABEL="LABEL",t.CONFLICT_HEADER="CONFLICT_HEADER",t.DATE_LABEL="DATE_LABEL"}(e.TransactionListItemType||(e.TransactionListItemType={})),function(t){t.MULTISIG="MULTISIG",t.MODULE="MODULE"}(e.DetailedExecutionInfoType||(e.DetailedExecutionInfoType={})),function(t){t.Queued="Queued",t.Next="Next"}(e.LabelValue||(e.LabelValue={}))})(Ne);var Ce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FEATURES=e.GAS_PRICE_TYPE=e.RPC_AUTHENTICATION=void 0,function(t){t.API_KEY_PATH="API_KEY_PATH",t.NO_AUTHENTICATION="NO_AUTHENTICATION",t.UNKNOWN="UNKNOWN"}(e.RPC_AUTHENTICATION||(e.RPC_AUTHENTICATION={})),function(t){t.ORACLE="ORACLE",t.FIXED="FIXED",t.UNKNOWN="UNKNOWN"}(e.GAS_PRICE_TYPE||(e.GAS_PRICE_TYPE={})),function(t){t.ERC721="ERC721",t.SAFE_APPS="SAFE_APPS",t.CONTRACT_INTERACTION="CONTRACT_INTERACTION",t.DOMAIN_LOOKUP="DOMAIN_LOOKUP",t.SPENDING_LIMIT="SPENDING_LIMIT",t.EIP1559="EIP1559",t.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",t.TX_SIMULATION="TX_SIMULATION",t.EIP1271="EIP1271"}(e.FEATURES||(e.FEATURES={}))})(Ce);var Pe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0,function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_TOKEN="NATIVE_TOKEN"}(e.TokenType||(e.TokenType={}))})(Pe);var ve={};Object.defineProperty(ve,"__esModule",{value:!0});var Le={};Object.defineProperty(Le,"__esModule",{value:!0});var $e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeMessageStatus=e.SafeMessageListItemType=void 0,function(t){t.DATE_LABEL="DATE_LABEL",t.MESSAGE="MESSAGE"}(e.SafeMessageListItemType||(e.SafeMessageListItemType={})),function(t){t.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",t.CONFIRMED="CONFIRMED"}(e.SafeMessageStatus||(e.SafeMessageStatus={}))})($e);(function(e){var t=_&&_.__createBinding||(Object.create?function(c,u,f,y){y===void 0&&(y=f);var $=Object.getOwnPropertyDescriptor(u,f);(!$||("get"in $?!u.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(c,y,$)}:function(c,u,f,y){y===void 0&&(y=f),c[y]=u[f]}),n=_&&_.__exportStar||function(c,u){for(var f in c)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&t(u,c,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.confirmSafeMessage=e.proposeSafeMessage=e.getSafeMessage=e.getSafeMessages=e.getDecodedData=e.getMasterCopies=e.getSafeApps=e.getChainConfig=e.getChainsConfig=e.proposeTransaction=e.postSafeGasEstimation=e.getTransactionDetails=e.getTransactionQueue=e.getTransactionHistory=e.getCollectiblesPage=e.getCollectibles=e.getOwnedSafes=e.getFiatCurrencies=e.getBalances=e.getMultisigTransactions=e.getModuleTransactions=e.getIncomingTransfers=e.getSafeInfo=e.setBaseUrl=void 0;const s=B,i=Q;n(Ie,e),n(Oe,e),n(Ne,e),n(Ce,e),n(Pe,e),n(ve,e),n(Le,e),n($e,e);let r=i.DEFAULT_BASE_URL;const o=c=>{r=c};e.setBaseUrl=o;function a(c,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:c,address:u}})}e.getSafeInfo=a;function l(c,u,f,y){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:c,address:u},query:f},y)}e.getIncomingTransfers=l;function h(c,u,f,y){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:c,address:u},query:f},y)}e.getModuleTransactions=h;function d(c,u,f,y){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:c,address:u},query:f},y)}e.getMultisigTransactions=d;function g(c,u,f="usd",y={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:c,address:u,currency:f},query:y})}e.getBalances=g;function L(){return(0,s.getEndpoint)(r,"/v1/balances/supported-fiat-codes")}e.getFiatCurrencies=L;function T(c,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:c,address:u}})}e.getOwnedSafes=T;function q(c,u,f={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:c,address:u},query:f})}e.getCollectibles=q;function J(c,u,f={},y){return(0,s.getEndpoint)(r,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:c,address:u},query:f},y)}e.getCollectiblesPage=J;function v(c,u,f){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:c,safe_address:u},query:{}},f)}e.getTransactionHistory=v;function Z(c,u,f,y){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:c,safe_address:u},query:{trusted:y}},f)}e.getTransactionQueue=Z;function ct(c,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:c,transactionId:u}})}e.getTransactionDetails=ct;function ut(c,u,f){return(0,s.postEndpoint)(r,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:c,safe_address:u},body:f})}e.postSafeGasEstimation=ut;function ft(c,u,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:c,safe_address:u},body:f})}e.proposeTransaction=ft;function lt(c){return(0,s.getEndpoint)(r,"/v1/chains",{query:c})}e.getChainsConfig=lt;function dt(c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}",{path:{chainId:c}})}e.getChainConfig=dt;function ht(c,u={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safe-apps",{path:{chainId:c},query:u})}e.getSafeApps=ht;function gt(c){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:c}})}e.getMasterCopies=gt;function pt(c,u){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/data-decoder",{path:{chainId:c},body:{data:u}})}e.getDecodedData=pt;function yt(c,u,f){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:c,safe_address:u},query:{}},f)}e.getSafeMessages=yt;function mt(c,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:c,message_hash:u}})}e.getSafeMessage=mt;function bt(c,u,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:c,safe_address:u},body:f})}e.proposeSafeMessage=bt;function Et(c,u,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:c,message_hash:u},body:f})}e.confirmSafeMessage=Et})(k);class Dt{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(m.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(m.signMessage,n)).data}async signTypedMessage(t){if(!ce(t))throw new Error("Invalid typed data");return(await this.communicator.send(m.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(m.sendTransactions,s)).data}}const b={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},w={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Rt{constructor(t){this.communicator=t,this.call=this.buildRequest({call:b.eth_call,formatters:[null,w.defaultBlockParam]}),this.getBalance=this.buildRequest({call:b.eth_getBalance,formatters:[null,w.defaultBlockParam]}),this.getCode=this.buildRequest({call:b.eth_getCode,formatters:[null,w.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:b.eth_getStorageAt,formatters:[null,w.blockNumberToHex,w.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:b.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:b.eth_getBlockByHash,formatters:[null,w.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:b.eth_getBlockByNumber,formatters:[w.blockNumberToHex,w.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:b.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:b.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:b.eth_getTransactionCount,formatters:[null,w.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:b.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:b.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:b.safe_setSettings})}buildRequest(t){const{call:n,formatters:s}=t;return async i=>{s&&Array.isArray(i)&&s.forEach((a,l)=>{a&&(i[l]=a(i[l]))});const r={call:n,params:i||[]};return(await this.communicator.send(m.rpcCall,r)).data}}}function Ht(e,t){return e.exec(t)?.groups}const pe=/^tuple(?<array>(\[(\d*)\])*)$/;function ne(e){let t=e.type;if(pe.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let i=0;i<n;i++){const r=e.components[i];t+=ne(r),i<n-1&&(t+=", ")}const s=Ht(pe,e.type);return t+=`)${s?.array??""}`,ne({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function R(e){let t="";const n=e.length;for(let s=0;s<n;s++){const i=e[s];t+=ne(i),s!==n-1&&(t+=", ")}return t}function kt(e){return e.type==="function"?`function ${e.name}(${R(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${R(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${R(e.inputs)})`:e.type==="error"?`error ${e.name}(${R(e.inputs)})`:e.type==="constructor"?`constructor(${R(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?"fallback()":"receive() external payable"}function se(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Xt(e.type);return`${e.name}(${Me(e.inputs,{includeName:t})})`}function Me(e,{includeName:t=!1}={}){return e?e.map(n=>jt(n,{includeName:t})).join(t?", ":","):""}function jt(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Me(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function G(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function E(e){return G(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Ut="2.18.0",zt=()=>`viem@${Ut}`;class p extends Error{constructor(t,n={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:zt()});const s=n.cause instanceof p?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof p&&n.cause.docsPath||n.docsPath;this.message=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${n.docsBaseUrl??"https://viem.sh"}${i}${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...s?[`Details: ${s}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=s,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=t}walk(t){return Be(this,t)}}function Be(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e?Be(e.cause,t):t?null:e}class xt extends p{constructor({expectedLength:t,givenLength:n,type:s}){super([`ABI encoding array length mismatch for type ${s}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class Ft extends p{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${E(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class Gt extends p{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class ye extends p{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class Vt extends p{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${se(t.abiItem)}\`, and`,`\`${n.type}\` in \`${se(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class qt extends p{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class Wt extends p{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class Kt extends p{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class Xt extends p{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class De extends p{constructor({offset:t,position:n,size:s}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${s}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class Re extends p{constructor({size:t,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function D(e,{dir:t,size:n=32}={}){return typeof e=="string"?O(e,{dir:t,size:n}):Qt(e,{dir:t,size:n})}function O(e,{dir:t,size:n=32}={}){if(n===null)return e;const s=e.replace("0x","");if(s.length>n*2)throw new Re({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Qt(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Re({size:e.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r=t==="right";s[r?i:n-i-1]=e[r?i:e.length-i-1]}return s}class Yt extends p{constructor({max:t,min:n,signed:s,size:i,value:r}){super(`Number "${r}" is not in safe ${i?`${i*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class Jt extends p{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function V(e,{size:t}){if(E(e)>t)throw new Jt({givenSize:E(e),maxSize:t})}const Zt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ue(e,t={}){return typeof e=="number"||typeof e=="bigint"?C(e,t):typeof e=="string"?X(e,t):typeof e=="boolean"?He(e,t):fe(e,t)}function He(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(V(n,{size:t.size}),D(n,{size:t.size})):n}function fe(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=Zt[e[i]];const s=`0x${n}`;return typeof t.size=="number"?(V(s,{size:t.size}),D(s,{dir:"right",size:t.size})):s}function C(e,t={}){const{signed:n,size:s}=t,i=BigInt(e);let r;s?n?r=(1n<<BigInt(s)*8n-1n)-1n:r=2n**(BigInt(s)*8n)-1n:typeof e=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof r=="bigint"&&n?-r-1n:0;if(r&&i>r||i<o){const l=typeof e=="bigint"?"n":"";throw new Yt({max:r?`${r}${l}`:void 0,min:`${o}${l}`,signed:n,size:s,value:`${e}${l}`})}const a=`0x${(n&&i<0?(1n<<BigInt(s*8))+BigInt(i):i).toString(16)}`;return s?D(a,{size:s}):a}const en=new TextEncoder;function X(e,t={}){const n=en.encode(e);return fe(n,t)}const tn=new TextEncoder;function ke(e,t={}){return typeof e=="number"||typeof e=="bigint"?sn(e,t):typeof e=="boolean"?nn(e,t):G(e)?je(e,t):Ue(e,t)}function nn(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(V(n,{size:t.size}),D(n,{size:t.size})):n}const S={zero:48,nine:57,A:65,F:70,a:97,f:102};function me(e){if(e>=S.zero&&e<=S.nine)return e-S.zero;if(e>=S.A&&e<=S.F)return e-(S.A-10);if(e>=S.a&&e<=S.f)return e-(S.a-10)}function je(e,t={}){let n=e;t.size&&(V(n,{size:t.size}),n=D(n,{dir:"right",size:t.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,r=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const l=me(s.charCodeAt(a++)),h=me(s.charCodeAt(a++));if(l===void 0||h===void 0)throw new p(`Invalid byte sequence ("${s[a-2]}${s[a-1]}" in "${s}").`);r[o]=l*16+h}return r}function sn(e,t){const n=C(e,t);return je(n)}function Ue(e,t={}){const n=tn.encode(e);return typeof t.size=="number"?(V(n,{size:t.size}),D(n,{dir:"right",size:t.size})):n}function ie(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function rn(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function ze(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function on(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ie(e.outputLen),ie(e.blockLen)}function an(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function cn(e,t){ze(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const M={number:ie,bool:rn,bytes:ze,hash:on,exists:an,output:cn},W=BigInt(2**32-1),re=BigInt(32);function xe(e,t=!1){return t?{h:Number(e&W),l:Number(e>>re&W)}:{h:Number(e>>re&W)|0,l:Number(e&W)|0}}function un(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:r,l:o}=xe(e[i],t);[n[i],s[i]]=[r,o]}return[n,s]}const fn=(e,t)=>BigInt(e>>>0)<<re|BigInt(t>>>0),ln=(e,t,n)=>e>>>n,dn=(e,t,n)=>e<<32-n|t>>>n,hn=(e,t,n)=>e>>>n|t<<32-n,gn=(e,t,n)=>e<<32-n|t>>>n,pn=(e,t,n)=>e<<64-n|t>>>n-32,yn=(e,t,n)=>e>>>n-32|t<<64-n,mn=(e,t)=>t,bn=(e,t)=>e,En=(e,t,n)=>e<<n|t>>>32-n,An=(e,t,n)=>t<<n|e>>>32-n,Tn=(e,t,n)=>t<<n-32|e>>>64-n,wn=(e,t,n)=>e<<n-32|t>>>64-n;function Sn(e,t,n,s){const i=(t>>>0)+(s>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const _n=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),In=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,On=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Nn=(e,t,n,s,i)=>t+n+s+i+(e/2**32|0)|0,Cn=(e,t,n,s,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(i>>>0),Pn=(e,t,n,s,i,r)=>t+n+s+i+r+(e/2**32|0)|0,U={fromBig:xe,split:un,toBig:fn,shrSH:ln,shrSL:dn,rotrSH:hn,rotrSL:gn,rotrBH:pn,rotrBL:yn,rotr32H:mn,rotr32L:bn,rotlSH:En,rotlSL:An,rotlBH:Tn,rotlBL:wn,add:Sn,add3L:_n,add3H:In,add4L:On,add4H:Nn,add5H:Pn,add5L:Cn};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vn=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Ln=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ln)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $n(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function le(e){if(typeof e=="string"&&(e=$n(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class Mn{clone(){return this._cloneInto()}}function Bn(e){const t=s=>e().update(le(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Dn(e){const t=(s,i)=>e(i).update(le(s)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=s=>e(s),t}const[Fe,Ge,Ve]=[[],[],[]],Rn=BigInt(0),H=BigInt(1),Hn=BigInt(2),kn=BigInt(7),jn=BigInt(256),Un=BigInt(113);for(let e=0,t=H,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],Fe.push(2*(5*s+n)),Ge.push((e+1)*(e+2)/2%64);let i=Rn;for(let r=0;r<7;r++)t=(t<<H^(t>>kn)*Un)%jn,t&Hn&&(i^=H<<(H<<BigInt(r))-H);Ve.push(i)}const[zn,xn]=U.split(Ve,!0),be=(e,t,n)=>n>32?U.rotlBH(e,t,n):U.rotlSH(e,t,n),Ee=(e,t,n)=>n>32?U.rotlBL(e,t,n):U.rotlSL(e,t,n);function Fn(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,h=n[l],d=n[l+1],g=be(h,d,1)^n[a],L=Ee(h,d,1)^n[a+1];for(let T=0;T<50;T+=10)e[o+T]^=g,e[o+T+1]^=L}let i=e[2],r=e[3];for(let o=0;o<24;o++){const a=Ge[o],l=be(i,r,a),h=Ee(i,r,a),d=Fe[o];i=e[d],r=e[d+1],e[d]=l,e[d+1]=h}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=zn[s],e[1]^=xn[s]}n.fill(0)}class Y extends Mn{constructor(t,n,s,i=!1,r=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=i,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,M.number(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=vn(this.state)}keccak(){Fn(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){M.exists(this);const{blockLen:n,state:s}=this;t=le(t);const i=t.length;for(let r=0;r<i;){const o=Math.min(n-this.pos,i-r);for(let a=0;a<o;a++)s[this.pos++]^=t[r++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:i}=this;t[s]^=n,n&128&&s===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){M.exists(this,!1),M.bytes(t),this.finish();const n=this.state,{blockLen:s}=this;for(let i=0,r=t.length;i<r;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,r-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return M.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(M.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:i,rounds:r,enableXOF:o}=this;return t||(t=new Y(n,s,i,o,r)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=r,t.suffix=s,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const P=(e,t,n)=>Bn(()=>new Y(t,e,n));P(6,144,224/8);P(6,136,256/8);P(6,104,384/8);P(6,72,512/8);P(1,144,224/8);const Gn=P(1,136,256/8);P(1,104,384/8);P(1,72,512/8);const qe=(e,t,n)=>Dn((s={})=>new Y(t,e,s.dkLen===void 0?n:s.dkLen,!0));qe(31,168,128/8);qe(31,136,256/8);function A(e,t){const n=t||"hex",s=Gn(G(e,{strict:!1})?ke(e):e);return n==="bytes"?s:ue(s)}const Vn=e=>A(ke(e));function qn(e){return Vn(e)}function Wn(e){let t=!0,n="",s=0,i="",r=!1;for(let o=0;o<e.length;o++){const a=e[o];if(["(",")",","].includes(a)&&(t=!0),a==="("&&s++,a===")"&&s--,!!t){if(s===0){if(a===" "&&["event","function",""].includes(i))i="";else if(i+=a,a===")"){r=!0;break}continue}if(a===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}i+=a,n+=a}}if(!r)throw new p("Unable to normalize signature.");return i}const Kn=e=>{const t=typeof e=="string"?e:kt(e);return Wn(t)};function We(e){return qn(Kn(e))}const Xn=We;class Ke extends p{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}class Xe extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}set(t,n){return super.set(t,n),this.maxSize&&this.size>this.maxSize&&this.delete(this.keys().next().value),this}}const ee=new Xe(8192);function Qn(e,t){if(ee.has(`${e}.${t}`))return ee.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),s=A(Ue(n),"bytes"),i=(t?n.substring(`${t}0x`.length):n).split("");for(let o=0;o<40;o+=2)s[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(s[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const r=`0x${i.join("")}`;return ee.set(`${e}.${t}`,r),r}const Yn=/^0x[a-fA-F0-9]{40}$/,te=new Xe(8192);function z(e,t){const{strict:n=!0}=t??{},s=`${e}.${n}`;if(te.has(s))return te.get(s);const i=Yn.test(e)?e.toLowerCase()===e?!0:n?Qn(e)===e:!0:!1;return te.set(s,i),i}function N(e){return typeof e[0]=="string"?Qe(e):Jn(e)}function Jn(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let s=0;for(const i of e)n.set(i,s),s+=i.length;return n}function Qe(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Ye(e,t,n,{strict:s}={}){return G(e,{strict:!1})?es(e,t,n,{strict:s}):Zn(e,t,n,{strict:s})}function Je(e,t){if(typeof t=="number"&&t>0&&t>E(e)-1)throw new De({offset:t,position:"start",size:E(e)})}function Ze(e,t,n){if(typeof t=="number"&&typeof n=="number"&&E(e)!==n-t)throw new De({offset:n,position:"end",size:E(e)})}function Zn(e,t,n,{strict:s}={}){Je(e,t);const i=e.slice(t,n);return s&&Ze(i,t,n),i}function es(e,t,n,{strict:s}={}){Je(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&Ze(i,t,n),i}function de(e,t){if(e.length!==t.length)throw new Gt({expectedLength:e.length,givenLength:t.length});const n=ts({params:e,values:t}),s=ge(n);return s.length===0?"0x":s}function ts({params:e,values:t}){const n=[];for(let s=0;s<e.length;s++)n.push(he({param:e[s],value:t[s]}));return n}function he({param:e,value:t}){const n=us(e.type);if(n){const[s,i]=n;return ss(t,{length:s,param:{...e,type:i}})}if(e.type==="tuple")return cs(t,{param:e});if(e.type==="address")return ns(t);if(e.type==="bool")return rs(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const s=e.type.startsWith("int");return os(t,{signed:s})}if(e.type.startsWith("bytes"))return is(t,{param:e});if(e.type==="string")return as(t);throw new Wt(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function ge(e){let t=0;for(let r=0;r<e.length;r++){const{dynamic:o,encoded:a}=e[r];o?t+=32:t+=E(a)}const n=[],s=[];let i=0;for(let r=0;r<e.length;r++){const{dynamic:o,encoded:a}=e[r];o?(n.push(C(t+i,{size:32})),s.push(a),i+=E(a)):n.push(a)}return N([...n,...s])}function ns(e){if(!z(e))throw new Ke({address:e});return{dynamic:!1,encoded:O(e.toLowerCase())}}function ss(e,{length:t,param:n}){const s=t===null;if(!Array.isArray(e))throw new Kt(e);if(!s&&e.length!==t)throw new xt({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const r=[];for(let o=0;o<e.length;o++){const a=he({param:n,value:e[o]});a.dynamic&&(i=!0),r.push(a)}if(s||i){const o=ge(r);if(s){const a=C(r.length,{size:32});return{dynamic:!0,encoded:r.length>0?N([a,o]):a}}if(i)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:N(r.map(({encoded:o})=>o))}}function is(e,{param:t}){const[,n]=t.type.split("bytes"),s=E(e);if(!n){let i=e;return s%32!==0&&(i=O(i,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:N([O(C(s,{size:32})),i])}}if(s!==Number.parseInt(n))throw new Ft({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:O(e,{dir:"right"})}}function rs(e){if(typeof e!="boolean")throw new p(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:O(He(e))}}function os(e,{signed:t}){return{dynamic:!1,encoded:C(e,{size:32,signed:t})}}function as(e){const t=X(e),n=Math.ceil(E(t)/32),s=[];for(let i=0;i<n;i++)s.push(O(Ye(t,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:N([O(C(E(t),{size:32})),...s])}}function cs(e,{param:t}){let n=!1;const s=[];for(let i=0;i<t.components.length;i++){const r=t.components[i],o=Array.isArray(e)?i:r.name,a=he({param:r,value:e[o]});s.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?ge(s):N(s.map(({encoded:i})=>i))}}function us(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const et=e=>Ye(We(e),0,4);function fs(e){const{abi:t,args:n=[],name:s}=e,i=G(s,{strict:!1}),r=t.filter(a=>i?a.type==="function"?et(a)===s:a.type==="event"?Xn(a)===s:!1:"name"in a&&a.name===s);if(r.length===0)return;if(r.length===1)return r[0];let o;for(const a of r){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((h,d)=>{const g="inputs"in a&&a.inputs[d];return g?oe(h,g):!1})){if(o&&"inputs"in o&&o.inputs){const h=tt(a.inputs,o.inputs,n);if(h)throw new Vt({abiItem:a,type:h[0]},{abiItem:o,type:h[1]})}o=a}}return o||r[0]}function oe(e,t){const n=typeof e,s=t.type;switch(s){case"address":return z(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return s==="tuple"&&"components"in t?Object.values(t.components).every((i,r)=>oe(Object.values(e)[r],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)?Array.isArray(e)&&e.every(i=>oe(i,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function tt(e,t,n){for(const s in e){const i=e[s],r=t[s];if(i.type==="tuple"&&r.type==="tuple"&&"components"in i&&"components"in r)return tt(i.components,r.components,n[s]);const o=[i.type,r.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?z(n[s],{strict:!1}):o.includes("address")&&o.includes("bytes")?z(n[s],{strict:!1}):!1)return o}}const Ae="/docs/contract/encodeFunctionData";function ls(e){const{abi:t,args:n,functionName:s}=e;let i=t[0];if(s){const r=fs({abi:t,args:n,name:s});if(!r)throw new ye(s,{docsPath:Ae});i=r}if(i.type!=="function")throw new ye(void 0,{docsPath:Ae});return{abi:[i],functionName:et(se(i))}}function Te(e){const{args:t}=e,{abi:n,functionName:s}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:ls(e),i=n[0],r=s,o="inputs"in i&&i.inputs?de(i.inputs,t??[]):void 0;return Qe([r,o??"0x"])}const ds=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,hs=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function gs(e){const{domain:t={},message:n,primaryType:s}=e,i={EIP712Domain:Es({domain:t}),...e.types};bs({domain:t,message:n,primaryType:s,types:i});const r=["0x1901"];return t&&r.push(ps({domain:t,types:i})),s!=="EIP712Domain"&&r.push(nt({data:n,primaryType:s,types:i})),A(N(r))}function ps({domain:e,types:t}){return nt({data:e,primaryType:"EIP712Domain",types:t})}function nt({data:e,primaryType:t,types:n}){const s=st({data:e,primaryType:t,types:n});return A(s)}function st({data:e,primaryType:t,types:n}){const s=[{type:"bytes32"}],i=[ys({primaryType:t,types:n})];for(const r of n[t]){const[o,a]=rt({types:n,name:r.name,type:r.type,value:e[r.name]});s.push(o),i.push(a)}return de(s,i)}function ys({primaryType:e,types:t}){const n=ue(ms({primaryType:e,types:t}));return A(n)}function ms({primaryType:e,types:t}){let n="";const s=it({primaryType:e,types:t});s.delete(e);const i=[e,...Array.from(s).sort()];for(const r of i)n+=`${r}(${t[r].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function it({primaryType:e,types:t},n=new Set){const i=e.match(/^\w*/u)?.[0];if(n.has(i)||t[i]===void 0)return n;n.add(i);for(const r of t[i])it({primaryType:r.type,types:t},n);return n}function rt({types:e,name:t,type:n,value:s}){if(e[n]!==void 0)return[{type:"bytes32"},A(st({data:s,primaryType:n,types:e}))];if(n==="bytes")return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},A(s)];if(n==="string")return[{type:"bytes32"},A(ue(s))];if(n.lastIndexOf("]")===n.length-1){const i=n.slice(0,n.lastIndexOf("[")),r=s.map(o=>rt({name:t,type:i,types:e,value:o}));return[{type:"bytes32"},A(de(r.map(([o])=>o),r.map(([,o])=>o)))]}return[{type:n},s]}function bs(e){const{domain:t,message:n,primaryType:s,types:i}=e,r=(o,a)=>{for(const l of o){const{name:h,type:d}=l,g=a[h],L=d.match(hs);if(L&&(typeof g=="number"||typeof g=="bigint")){const[J,v,Z]=L;C(g,{signed:v==="int",size:Number.parseInt(Z)/8})}if(d==="address"&&typeof g=="string"&&!z(g))throw new Ke({address:g});const T=d.match(ds);if(T){const[J,v]=T;if(v&&E(g)!==Number.parseInt(v))throw new qt({expectedSize:Number.parseInt(v),givenSize:E(g)})}const q=i[d];q&&r(q,g)}};i.EIP712Domain&&t&&r(i.EIP712Domain,t),s!=="EIP712Domain"&&r(i[s],n)}function Es({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},typeof e?.chainId=="number"&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}const As=`Ethereum Signed Message:
`;function Ts(e){const t=typeof e=="string"?X(e):typeof e.raw=="string"?e.raw:fe(e.raw),n=X(`${As}${E(t)}`);return N([n,t])}function ws(e,t){return A(Ts(e),t)}const Ss="0x1626ba7e",_s="0x20c13b0b",ae=4001;class x extends Error{constructor(t,n,s){super(t),this.code=n,this.data=s,Object.setPrototypeOf(this,x.prototype)}}class ot{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(m.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new x("Permissions request is invalid",ae);try{return(await this.communicator.send(m.wallet_requestPermissions,t)).data}catch{throw new x("Permissions rejected",ae)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(s=>!!Object.values(K).includes(s)):!1)}}const we=(e,t)=>t.some(n=>n.parentCapability===e),Is=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const i=new ot(this.communicator);let r=await i.getPermissions();if(we(t,r)||(r=await i.requestPermissions([{[t]:{}}])),!we(t,r))throw new x("Permissions rejected",ae);return s.apply(this)},n};var Os=function(e,t,n,s){var i=arguments.length,r=i<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,n,r):o(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};class at{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(m.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(m.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(m.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const s=await this.getInfo(),i=Te({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:b.eth_call,params:[{to:s.safeAddress,data:i},"latest"]};try{return(await this.communicator.send(m.rpcCall,r)).data.slice(0,10).toLowerCase()===Ss}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const s=await this.getInfo(),i=Te({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:b.eth_call,params:[{to:s.safeAddress,data:i},"latest"]};try{return(await this.communicator.send(m.rpcCall,r)).data.slice(0,10).toLowerCase()===_s}catch{return!1}}calculateMessageHash(t){return ws(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const i=Object.values(t.types),r=Object.keys(t.types).filter(o=>i.every(a=>a.every(({type:l})=>l.replace("[","").replace("]","")!==o)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return gs({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(m.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let s;if(typeof t=="string"&&(s=async()=>{const i=this.calculateMessageHash(t);return await this.isMessageHashSigned(i,n)}),ce(t)&&(s=async()=>{const i=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(i,n)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const i of s)if(await i(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(m.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(m.requestAddressBook,void 0)).data}}Os([Is()],at.prototype,"requestAddressBook",null);class Ns{constructor(t={}){const{allowedDomains:n=null,debug:s=!1}=t;this.communicator=new _t(n,s),this.eth=new Rt(this.communicator),this.txs=new Dt(this.communicator),this.safe=new at(this.communicator),this.wallet=new ot(this.communicator)}}const Cs=Ns,Ls=Object.freeze(Object.defineProperty({__proto__:null,MessageFormatter:F,get Methods(){return m},Operation:k.Operation,RPC_CALLS:b,get RestrictedMethods(){return K},TokenType:k.TokenType,TransactionStatus:k.TransactionStatus,TransferDirection:k.TransferDirection,default:Cs,getSDKVersion:Se,isObjectEIP712TypedData:ce},Symbol.toStringTag,{value:"Module"}));export{Ls as e};

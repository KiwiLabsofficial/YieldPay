const __vite__fileDeps=["assets/index-ByMcmfk6.js","assets/index-DTW0HgcQ.js","assets/index-HUHtt28u.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as Qv,c as ln,g as Xv,_ as g4}from"./index-DTW0HgcQ.js";import{e as Hi,J as N0}from"./events-HhthGIK3.js";import{r as T0,i as Pu}from"./inherits_browser-iR_aGDnX.js";import{o as g1}from"./browser-ponyfill-9BGJdPG5.js";var v1=function(r,e,t){if(t||arguments.length===2)for(var i=0,n=e.length,a;i<n;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return r.concat(a||Array.prototype.slice.call(e))},v4=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}(),b4=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),m4=function(){function r(e,t,i,n){this.name=e,this.version=t,this.os=i,this.bot=n,this.type="bot-device"}return r}(),y4=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),w4=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),_4=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,A4=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,b1=3,E4=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",_4]],m1=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function x4(r){return r?y1(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new w4:typeof navigator<"u"?y1(navigator.userAgent):M4()}function S4(r){return r!==""&&E4.reduce(function(e,t){var i=t[0],n=t[1];if(e)return e;var a=n.exec(r);return!!a&&[i,a]},!1)}function y1(r){var e=S4(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new y4;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<b1&&(n=v1(v1([],n,!0),D4(b1-n.length),!0)):n=[];var a=n.join("."),f=I4(r),u=A4.exec(r);return u&&u[1]?new m4(t,a,f,u[1]):new v4(t,a,f)}function I4(r){for(var e=0,t=m1.length;e<t;e++){var i=m1[e],n=i[0],a=i[1],f=a.exec(r);if(f)return n}return null}function M4(){var r=typeof process<"u"&&process.version;return r?new b4(process.version.slice(1)):null}function D4(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var xe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t0=function(r,e){return t0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},t0(r,e)};function P4(r,e){t0(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var r0=function(){return r0=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},r0.apply(this,arguments)};function O4(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function C4(r,e,t,i){var n=arguments.length,a=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var u=r.length-1;u>=0;u--)(f=r[u])&&(a=(n<3?f(a):n>3?f(e,t,a):f(e,t))||a);return n>3&&a&&Object.defineProperty(e,t,a),a}function R4(r,e){return function(t,i){e(t,i,r)}}function N4(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function T4(r,e,t,i){function n(a){return a instanceof t?a:new t(function(f){f(a)})}return new(t||(t=Promise))(function(a,f){function u(y){try{p(i.next(y))}catch(_){f(_)}}function v(y){try{p(i.throw(y))}catch(_){f(_)}}function p(y){y.done?a(y.value):n(y.value).then(u,v)}p((i=i.apply(r,e||[])).next())})}function F4(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,f;return f={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(p){return function(y){return v([p,y])}}function v(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(a=p[0]&2?n.return:p[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,p[1])).done)return a;switch(n=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){t.label=p[1];break}if(p[0]===6&&t.label<a[1]){t.label=a[1],a=p;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(p);break}a[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(y){p=[6,y],n=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function B4(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function L4(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function i0(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zv(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,a=[],f;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){f={error:u}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(f)throw f.error}}return a}function q4(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Zv(arguments[e]));return r}function $4(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),n=0,e=0;e<t;e++)for(var a=arguments[e],f=0,u=a.length;f<u;f++,n++)i[n]=a[f];return i}function vc(r){return this instanceof vc?(this.v=r,this):new vc(r)}function U4(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,a=[];return n={},f("next"),f("throw"),f("return"),n[Symbol.asyncIterator]=function(){return this},n;function f(O){i[O]&&(n[O]=function(D){return new Promise(function(C,H){a.push([O,D,C,H])>1||u(O,D)})})}function u(O,D){try{v(i[O](D))}catch(C){_(a[0][3],C)}}function v(O){O.value instanceof vc?Promise.resolve(O.value.v).then(p,y):_(a[0][2],O)}function p(O){u("next",O)}function y(O){u("throw",O)}function _(O,D){O(D),a.shift(),a.length&&u(a[0][0],a[0][1])}}function z4(r){var e,t;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,a){e[n]=r[n]?function(f){return(t=!t)?{value:vc(r[n](f)),done:n==="return"}:a?a(f):f}:a}}function j4(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof i0=="function"?i0(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(f){return new Promise(function(u,v){f=r[a](f),n(u,v,f.done,f.value)})}}function n(a,f,u,v){Promise.resolve(v).then(function(p){a({value:p,done:u})},f)}}function k4(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function H4(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function K4(r){return r&&r.__esModule?r:{default:r}}function V4(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function G4(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const W4=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return r0},__asyncDelegator:z4,__asyncGenerator:U4,__asyncValues:j4,__await:vc,__awaiter:T4,__classPrivateFieldGet:V4,__classPrivateFieldSet:G4,__createBinding:B4,__decorate:C4,__exportStar:L4,__extends:P4,__generator:F4,__importDefault:K4,__importStar:H4,__makeTemplateObject:k4,__metadata:N4,__param:R4,__read:Zv,__rest:O4,__spread:q4,__spreadArrays:$4,__values:i0},Symbol.toStringTag,{value:"Module"})),Ou=Qv(W4);var hl={},Ko={},w1;function J4(){if(w1)return Ko;w1=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Ko.delay=r,Ko}var ia={},ll={},na={},_1;function Y4(){return _1||(_1=1,Object.defineProperty(na,"__esModule",{value:!0}),na.ONE_THOUSAND=na.ONE_HUNDRED=void 0,na.ONE_HUNDRED=100,na.ONE_THOUSAND=1e3),na}var dl={},A1;function Q4(){return A1||(A1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(dl)),dl}var E1;function eb(){return E1||(E1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ou;e.__exportStar(Y4(),r),e.__exportStar(Q4(),r)}(ll)),ll}var x1;function X4(){if(x1)return ia;x1=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.fromMiliseconds=ia.toMiliseconds=void 0;const r=eb();function e(i){return i*r.ONE_THOUSAND}ia.toMiliseconds=e;function t(i){return Math.floor(i/r.ONE_THOUSAND)}return ia.fromMiliseconds=t,ia}var S1;function Z4(){return S1||(S1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ou;e.__exportStar(J4(),r),e.__exportStar(X4(),r)}(hl)),hl}var Ka={},I1;function e_(){if(I1)return Ka;I1=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const n=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:n})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return Ka.Watch=r,Ka.default=r,Ka}var pl={},Vo={},M1;function t_(){if(M1)return Vo;M1=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.IWatch=void 0;class r{}return Vo.IWatch=r,Vo}var D1;function r_(){return D1||(D1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Ou.__exportStar(t_(),r)}(pl)),pl}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ou;e.__exportStar(Z4(),r),e.__exportStar(e_(),r),e.__exportStar(r_(),r),e.__exportStar(eb(),r)})(xe);var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.getLocalStorage=Vt.getLocalStorageOrThrow=Vt.getCrypto=Vt.getCryptoOrThrow=tb=Vt.getLocation=Vt.getLocationOrThrow=F0=Vt.getNavigator=Vt.getNavigatorOrThrow=Cu=Vt.getDocument=Vt.getDocumentOrThrow=Vt.getFromWindowOrThrow=Vt.getFromWindow=void 0;function ya(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Vt.getFromWindow=ya;function fo(r){const e=ya(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Vt.getFromWindowOrThrow=fo;function i_(){return fo("document")}Vt.getDocumentOrThrow=i_;function n_(){return ya("document")}var Cu=Vt.getDocument=n_;function s_(){return fo("navigator")}Vt.getNavigatorOrThrow=s_;function a_(){return ya("navigator")}var F0=Vt.getNavigator=a_;function o_(){return fo("location")}Vt.getLocationOrThrow=o_;function c_(){return ya("location")}var tb=Vt.getLocation=c_;function f_(){return fo("crypto")}Vt.getCryptoOrThrow=f_;function u_(){return ya("crypto")}Vt.getCrypto=u_;function h_(){return fo("localStorage")}Vt.getLocalStorageOrThrow=h_;function l_(){return ya("localStorage")}Vt.getLocalStorage=l_;var B0={};Object.defineProperty(B0,"__esModule",{value:!0});var rb=B0.getWindowMetadata=void 0;const P1=Vt;function d_(){let r,e;try{r=P1.getDocumentOrThrow(),e=P1.getLocationOrThrow()}catch{return null}function t(){const _=r.getElementsByTagName("link"),O=[];for(let D=0;D<_.length;D++){const C=_[D],H=C.getAttribute("rel");if(H&&H.toLowerCase().indexOf("icon")>-1){const W=C.getAttribute("href");if(W)if(W.toLowerCase().indexOf("https:")===-1&&W.toLowerCase().indexOf("http:")===-1&&W.indexOf("//")!==0){let Q=e.protocol+"//"+e.host;if(W.indexOf("/")===0)Q+=W;else{const z=e.pathname.split("/");z.pop();const Y=z.join("/");Q+=Y+"/"+W}O.push(Q)}else if(W.indexOf("//")===0){const Q=e.protocol+W;O.push(Q)}else O.push(W)}}return O}function i(..._){const O=r.getElementsByTagName("meta");for(let D=0;D<O.length;D++){const C=O[D],H=["itemprop","property","name"].map(W=>C.getAttribute(W)).filter(W=>W?_.includes(W):!1);if(H.length&&H){const W=C.getAttribute("content");if(W)return W}}return""}function n(){let _=i("name","og:site_name","og:title","twitter:title");return _||(_=r.title),_}function a(){return i("description","og:description","twitter:description","keywords")}const f=n(),u=a(),v=e.origin,p=t();return{description:u,url:v,icons:p,name:f}}rb=B0.getWindowMetadata=d_;var bc={},p_=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ib="%[a-f0-9]{2}",O1=new RegExp("("+ib+")|([^%]+?)","gi"),C1=new RegExp("("+ib+")+","gi");function n0(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),i=r.slice(e);return Array.prototype.concat.call([],n0(t),n0(i))}function g_(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(O1)||[],t=1;t<e.length;t++)r=n0(e,t).join(""),e=r.match(O1)||[];return r}}function v_(r){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=C1.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=g_(t[0]);i!==t[0]&&(e[t[0]]=i)}t=C1.exec(r)}e["%C2"]="�";for(var n=Object.keys(e),a=0;a<n.length;a++){var f=n[a];r=r.replace(new RegExp(f,"g"),e[f])}return r}var b_=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return v_(r)}},m_=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]},y_=function(r,e){for(var t={},i=Object.keys(r),n=Array.isArray(e),a=0;a<i.length;a++){var f=i[a],u=r[f];(n?e.indexOf(f)!==-1:e(f,u,r))&&(t[f]=u)}return t};(function(r){const e=p_,t=b_,i=m_,n=y_,a=z=>z==null,f=Symbol("encodeFragmentIdentifier");function u(z){switch(z.arrayFormat){case"index":return Y=>(q,j)=>{const V=q.length;return j===void 0||z.skipNull&&j===null||z.skipEmptyString&&j===""?q:j===null?[...q,[y(Y,z),"[",V,"]"].join("")]:[...q,[y(Y,z),"[",y(V,z),"]=",y(j,z)].join("")]};case"bracket":return Y=>(q,j)=>j===void 0||z.skipNull&&j===null||z.skipEmptyString&&j===""?q:j===null?[...q,[y(Y,z),"[]"].join("")]:[...q,[y(Y,z),"[]=",y(j,z)].join("")];case"colon-list-separator":return Y=>(q,j)=>j===void 0||z.skipNull&&j===null||z.skipEmptyString&&j===""?q:j===null?[...q,[y(Y,z),":list="].join("")]:[...q,[y(Y,z),":list=",y(j,z)].join("")];case"comma":case"separator":case"bracket-separator":{const Y=z.arrayFormat==="bracket-separator"?"[]=":"=";return q=>(j,V)=>V===void 0||z.skipNull&&V===null||z.skipEmptyString&&V===""?j:(V=V===null?"":V,j.length===0?[[y(q,z),Y,y(V,z)].join("")]:[[j,y(V,z)].join(z.arrayFormatSeparator)])}default:return Y=>(q,j)=>j===void 0||z.skipNull&&j===null||z.skipEmptyString&&j===""?q:j===null?[...q,y(Y,z)]:[...q,[y(Y,z),"=",y(j,z)].join("")]}}function v(z){let Y;switch(z.arrayFormat){case"index":return(q,j,V)=>{if(Y=/\[(\d*)\]$/.exec(q),q=q.replace(/\[\d*\]$/,""),!Y){V[q]=j;return}V[q]===void 0&&(V[q]={}),V[q][Y[1]]=j};case"bracket":return(q,j,V)=>{if(Y=/(\[\])$/.exec(q),q=q.replace(/\[\]$/,""),!Y){V[q]=j;return}if(V[q]===void 0){V[q]=[j];return}V[q]=[].concat(V[q],j)};case"colon-list-separator":return(q,j,V)=>{if(Y=/(:list)$/.exec(q),q=q.replace(/:list$/,""),!Y){V[q]=j;return}if(V[q]===void 0){V[q]=[j];return}V[q]=[].concat(V[q],j)};case"comma":case"separator":return(q,j,V)=>{const A=typeof j=="string"&&j.includes(z.arrayFormatSeparator),F=typeof j=="string"&&!A&&_(j,z).includes(z.arrayFormatSeparator);j=F?_(j,z):j;const ae=A||F?j.split(z.arrayFormatSeparator).map(de=>_(de,z)):j===null?j:_(j,z);V[q]=ae};case"bracket-separator":return(q,j,V)=>{const A=/(\[\])$/.test(q);if(q=q.replace(/\[\]$/,""),!A){V[q]=j&&_(j,z);return}const F=j===null?[]:j.split(z.arrayFormatSeparator).map(ae=>_(ae,z));if(V[q]===void 0){V[q]=F;return}V[q]=[].concat(V[q],F)};default:return(q,j,V)=>{if(V[q]===void 0){V[q]=j;return}V[q]=[].concat(V[q],j)}}}function p(z){if(typeof z!="string"||z.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function y(z,Y){return Y.encode?Y.strict?e(z):encodeURIComponent(z):z}function _(z,Y){return Y.decode?t(z):z}function O(z){return Array.isArray(z)?z.sort():typeof z=="object"?O(Object.keys(z)).sort((Y,q)=>Number(Y)-Number(q)).map(Y=>z[Y]):z}function D(z){const Y=z.indexOf("#");return Y!==-1&&(z=z.slice(0,Y)),z}function C(z){let Y="";const q=z.indexOf("#");return q!==-1&&(Y=z.slice(q)),Y}function H(z){z=D(z);const Y=z.indexOf("?");return Y===-1?"":z.slice(Y+1)}function W(z,Y){return Y.parseNumbers&&!Number.isNaN(Number(z))&&typeof z=="string"&&z.trim()!==""?z=Number(z):Y.parseBooleans&&z!==null&&(z.toLowerCase()==="true"||z.toLowerCase()==="false")&&(z=z.toLowerCase()==="true"),z}function Q(z,Y){Y=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},Y),p(Y.arrayFormatSeparator);const q=v(Y),j=Object.create(null);if(typeof z!="string"||(z=z.trim().replace(/^[?#&]/,""),!z))return j;for(const V of z.split("&")){if(V==="")continue;let[A,F]=i(Y.decode?V.replace(/\+/g," "):V,"=");F=F===void 0?null:["comma","separator","bracket-separator"].includes(Y.arrayFormat)?F:_(F,Y),q(_(A,Y),F,j)}for(const V of Object.keys(j)){const A=j[V];if(typeof A=="object"&&A!==null)for(const F of Object.keys(A))A[F]=W(A[F],Y);else j[V]=W(A,Y)}return Y.sort===!1?j:(Y.sort===!0?Object.keys(j).sort():Object.keys(j).sort(Y.sort)).reduce((V,A)=>{const F=j[A];return F&&typeof F=="object"&&!Array.isArray(F)?V[A]=O(F):V[A]=F,V},Object.create(null))}r.extract=H,r.parse=Q,r.stringify=(z,Y)=>{if(!z)return"";Y=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},Y),p(Y.arrayFormatSeparator);const q=F=>Y.skipNull&&a(z[F])||Y.skipEmptyString&&z[F]==="",j=u(Y),V={};for(const F of Object.keys(z))q(F)||(V[F]=z[F]);const A=Object.keys(V);return Y.sort!==!1&&A.sort(Y.sort),A.map(F=>{const ae=z[F];return ae===void 0?"":ae===null?y(F,Y):Array.isArray(ae)?ae.length===0&&Y.arrayFormat==="bracket-separator"?y(F,Y)+"[]":ae.reduce(j(F),[]).join("&"):y(F,Y)+"="+y(ae,Y)}).filter(F=>F.length>0).join("&")},r.parseUrl=(z,Y)=>{Y=Object.assign({decode:!0},Y);const[q,j]=i(z,"#");return Object.assign({url:q.split("?")[0]||"",query:Q(H(z),Y)},Y&&Y.parseFragmentIdentifier&&j?{fragmentIdentifier:_(j,Y)}:{})},r.stringifyUrl=(z,Y)=>{Y=Object.assign({encode:!0,strict:!0,[f]:!0},Y);const q=D(z.url).split("?")[0]||"",j=r.extract(z.url),V=r.parse(j,{sort:!1}),A=Object.assign(V,z.query);let F=r.stringify(A,Y);F&&(F=`?${F}`);let ae=C(z.url);return z.fragmentIdentifier&&(ae=`#${Y[f]?y(z.fragmentIdentifier,Y):z.fragmentIdentifier}`),`${q}${F}${ae}`},r.pick=(z,Y,q)=>{q=Object.assign({parseFragmentIdentifier:!0,[f]:!1},q);const{url:j,query:V,fragmentIdentifier:A}=r.parseUrl(z,q);return r.stringifyUrl({url:j,query:n(V,Y),fragmentIdentifier:A},q)},r.exclude=(z,Y,q)=>{const j=Array.isArray(Y)?V=>!Y.includes(V):(V,A)=>!Y(V,A);return r.pick(z,j,q)}})(bc);var L0={},Ru={},mt={},nb={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(u,v){var p=u>>>16&65535,y=u&65535,_=v>>>16&65535,O=v&65535;return y*O+(p*O+y*_<<16>>>0)|0}r.mul=Math.imul||e;function t(u,v){return u+v|0}r.add=t;function i(u,v){return u-v|0}r.sub=i;function n(u,v){return u<<v|u>>>32-v}r.rotl=n;function a(u,v){return u<<32-v|u>>>v}r.rotr=a;function f(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}r.isInteger=Number.isInteger||f,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(u){return r.isInteger(u)&&u>=-r.MAX_SAFE_INTEGER&&u<=r.MAX_SAFE_INTEGER}})(nb);Object.defineProperty(mt,"__esModule",{value:!0});var sb=nb;function w_(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}mt.readInt16BE=w_;function __(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}mt.readUint16BE=__;function A_(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}mt.readInt16LE=A_;function E_(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}mt.readUint16LE=E_;function ab(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}mt.writeUint16BE=ab;mt.writeInt16BE=ab;function ob(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}mt.writeUint16LE=ob;mt.writeInt16LE=ob;function s0(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}mt.readInt32BE=s0;function a0(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}mt.readUint32BE=a0;function o0(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}mt.readInt32LE=o0;function c0(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}mt.readUint32LE=c0;function uu(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}mt.writeUint32BE=uu;mt.writeInt32BE=uu;function hu(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}mt.writeUint32LE=hu;mt.writeInt32LE=hu;function x_(r,e){e===void 0&&(e=0);var t=s0(r,e),i=s0(r,e+4);return t*4294967296+i-(i>>31)*4294967296}mt.readInt64BE=x_;function S_(r,e){e===void 0&&(e=0);var t=a0(r,e),i=a0(r,e+4);return t*4294967296+i}mt.readUint64BE=S_;function I_(r,e){e===void 0&&(e=0);var t=o0(r,e),i=o0(r,e+4);return i*4294967296+t-(t>>31)*4294967296}mt.readInt64LE=I_;function M_(r,e){e===void 0&&(e=0);var t=c0(r,e),i=c0(r,e+4);return i*4294967296+t}mt.readUint64LE=M_;function cb(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),uu(r/4294967296>>>0,e,t),uu(r>>>0,e,t+4),e}mt.writeUint64BE=cb;mt.writeInt64BE=cb;function fb(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),hu(r>>>0,e,t),hu(r/4294967296>>>0,e,t+4),e}mt.writeUint64LE=fb;mt.writeInt64LE=fb;function D_(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,a=r/8+t-1;a>=t;a--)i+=e[a]*n,n*=256;return i}mt.readUintBE=D_;function P_(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,a=t;a<t+r/8;a++)i+=e[a]*n,n*=256;return i}mt.readUintLE=P_;function O_(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!sb.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,a=r/8+i-1;a>=i;a--)t[a]=e/n&255,n*=256;return t}mt.writeUintBE=O_;function C_(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!sb.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,a=i;a<i+r/8;a++)t[a]=e/n&255,n*=256;return t}mt.writeUintLE=C_;function R_(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}mt.readFloat32BE=R_;function N_(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}mt.readFloat32LE=N_;function T_(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}mt.readFloat64BE=T_;function F_(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}mt.readFloat64LE=F_;function B_(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r),e}mt.writeFloat32BE=B_;function L_(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r,!0),e}mt.writeFloat32LE=L_;function q_(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r),e}mt.writeFloat64BE=q_;function $_(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r,!0),e}mt.writeFloat64LE=$_;var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});function U_(r){for(var e=0;e<r.length;e++)r[e]=0;return r}Ei.wipe=U_;Object.defineProperty(Ru,"__esModule",{value:!0});var qr=mt,f0=Ei,z_=20;function j_(r,e,t){for(var i=1634760805,n=857760878,a=2036477234,f=1797285236,u=t[3]<<24|t[2]<<16|t[1]<<8|t[0],v=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],y=t[15]<<24|t[14]<<16|t[13]<<8|t[12],_=t[19]<<24|t[18]<<16|t[17]<<8|t[16],O=t[23]<<24|t[22]<<16|t[21]<<8|t[20],D=t[27]<<24|t[26]<<16|t[25]<<8|t[24],C=t[31]<<24|t[30]<<16|t[29]<<8|t[28],H=e[3]<<24|e[2]<<16|e[1]<<8|e[0],W=e[7]<<24|e[6]<<16|e[5]<<8|e[4],Q=e[11]<<24|e[10]<<16|e[9]<<8|e[8],z=e[15]<<24|e[14]<<16|e[13]<<8|e[12],Y=i,q=n,j=a,V=f,A=u,F=v,ae=p,de=y,$=_,m=O,c=D,l=C,b=H,x=W,I=Q,P=z,S=0;S<z_;S+=2)Y=Y+A|0,b^=Y,b=b>>>16|b<<16,$=$+b|0,A^=$,A=A>>>20|A<<12,q=q+F|0,x^=q,x=x>>>16|x<<16,m=m+x|0,F^=m,F=F>>>20|F<<12,j=j+ae|0,I^=j,I=I>>>16|I<<16,c=c+I|0,ae^=c,ae=ae>>>20|ae<<12,V=V+de|0,P^=V,P=P>>>16|P<<16,l=l+P|0,de^=l,de=de>>>20|de<<12,j=j+ae|0,I^=j,I=I>>>24|I<<8,c=c+I|0,ae^=c,ae=ae>>>25|ae<<7,V=V+de|0,P^=V,P=P>>>24|P<<8,l=l+P|0,de^=l,de=de>>>25|de<<7,q=q+F|0,x^=q,x=x>>>24|x<<8,m=m+x|0,F^=m,F=F>>>25|F<<7,Y=Y+A|0,b^=Y,b=b>>>24|b<<8,$=$+b|0,A^=$,A=A>>>25|A<<7,Y=Y+F|0,P^=Y,P=P>>>16|P<<16,c=c+P|0,F^=c,F=F>>>20|F<<12,q=q+ae|0,b^=q,b=b>>>16|b<<16,l=l+b|0,ae^=l,ae=ae>>>20|ae<<12,j=j+de|0,x^=j,x=x>>>16|x<<16,$=$+x|0,de^=$,de=de>>>20|de<<12,V=V+A|0,I^=V,I=I>>>16|I<<16,m=m+I|0,A^=m,A=A>>>20|A<<12,j=j+de|0,x^=j,x=x>>>24|x<<8,$=$+x|0,de^=$,de=de>>>25|de<<7,V=V+A|0,I^=V,I=I>>>24|I<<8,m=m+I|0,A^=m,A=A>>>25|A<<7,q=q+ae|0,b^=q,b=b>>>24|b<<8,l=l+b|0,ae^=l,ae=ae>>>25|ae<<7,Y=Y+F|0,P^=Y,P=P>>>24|P<<8,c=c+P|0,F^=c,F=F>>>25|F<<7;qr.writeUint32LE(Y+i|0,r,0),qr.writeUint32LE(q+n|0,r,4),qr.writeUint32LE(j+a|0,r,8),qr.writeUint32LE(V+f|0,r,12),qr.writeUint32LE(A+u|0,r,16),qr.writeUint32LE(F+v|0,r,20),qr.writeUint32LE(ae+p|0,r,24),qr.writeUint32LE(de+y|0,r,28),qr.writeUint32LE($+_|0,r,32),qr.writeUint32LE(m+O|0,r,36),qr.writeUint32LE(c+D|0,r,40),qr.writeUint32LE(l+C|0,r,44),qr.writeUint32LE(b+H|0,r,48),qr.writeUint32LE(x+W|0,r,52),qr.writeUint32LE(I+Q|0,r,56),qr.writeUint32LE(P+z|0,r,60)}function ub(r,e,t,i,n){if(n===void 0&&(n=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var a,f;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),f=a.length-e.length,a.set(e,f)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,f=n}for(var u=new Uint8Array(64),v=0;v<t.length;v+=64){j_(u,a,r);for(var p=v;p<v+64&&p<t.length;p++)i[p]=t[p]^u[p-v];H_(a,0,f)}return f0.wipe(u),n===0&&f0.wipe(a),i}Ru.streamXOR=ub;function k_(r,e,t,i){return i===void 0&&(i=0),f0.wipe(t),ub(r,e,t,t,i)}Ru.stream=k_;function H_(r,e,t){for(var i=1;t--;)i=i+(r[e]&255)|0,r[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var hb={},Us={};Object.defineProperty(Us,"__esModule",{value:!0});function K_(r,e,t){return~(r-1)&e|r-1&t}Us.select=K_;function V_(r,e){return(r|0)-(e|0)-1>>>31&1}Us.lessOrEqual=V_;function lb(r,e){if(r.length!==e.length)return 0;for(var t=0,i=0;i<r.length;i++)t|=r[i]^e[i];return 1&t-1>>>8}Us.compare=lb;function G_(r,e){return r.length===0||e.length===0?!1:lb(r,e)!==0}Us.equal=G_;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Us,t=Ei;r.DIGEST_LENGTH=16;var i=function(){function f(u){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var v=u[0]|u[1]<<8;this._r[0]=v&8191;var p=u[2]|u[3]<<8;this._r[1]=(v>>>13|p<<3)&8191;var y=u[4]|u[5]<<8;this._r[2]=(p>>>10|y<<6)&7939;var _=u[6]|u[7]<<8;this._r[3]=(y>>>7|_<<9)&8191;var O=u[8]|u[9]<<8;this._r[4]=(_>>>4|O<<12)&255,this._r[5]=O>>>1&8190;var D=u[10]|u[11]<<8;this._r[6]=(O>>>14|D<<2)&8191;var C=u[12]|u[13]<<8;this._r[7]=(D>>>11|C<<5)&8065;var H=u[14]|u[15]<<8;this._r[8]=(C>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return f.prototype._blocks=function(u,v,p){for(var y=this._fin?0:2048,_=this._h[0],O=this._h[1],D=this._h[2],C=this._h[3],H=this._h[4],W=this._h[5],Q=this._h[6],z=this._h[7],Y=this._h[8],q=this._h[9],j=this._r[0],V=this._r[1],A=this._r[2],F=this._r[3],ae=this._r[4],de=this._r[5],$=this._r[6],m=this._r[7],c=this._r[8],l=this._r[9];p>=16;){var b=u[v+0]|u[v+1]<<8;_+=b&8191;var x=u[v+2]|u[v+3]<<8;O+=(b>>>13|x<<3)&8191;var I=u[v+4]|u[v+5]<<8;D+=(x>>>10|I<<6)&8191;var P=u[v+6]|u[v+7]<<8;C+=(I>>>7|P<<9)&8191;var S=u[v+8]|u[v+9]<<8;H+=(P>>>4|S<<12)&8191,W+=S>>>1&8191;var d=u[v+10]|u[v+11]<<8;Q+=(S>>>14|d<<2)&8191;var g=u[v+12]|u[v+13]<<8;z+=(d>>>11|g<<5)&8191;var N=u[v+14]|u[v+15]<<8;Y+=(g>>>8|N<<8)&8191,q+=N>>>5|y;var Z=0,se=Z;se+=_*j,se+=O*(5*l),se+=D*(5*c),se+=C*(5*m),se+=H*(5*$),Z=se>>>13,se&=8191,se+=W*(5*de),se+=Q*(5*ae),se+=z*(5*F),se+=Y*(5*A),se+=q*(5*V),Z+=se>>>13,se&=8191;var M=Z;M+=_*V,M+=O*j,M+=D*(5*l),M+=C*(5*c),M+=H*(5*m),Z=M>>>13,M&=8191,M+=W*(5*$),M+=Q*(5*de),M+=z*(5*ae),M+=Y*(5*F),M+=q*(5*A),Z+=M>>>13,M&=8191;var ee=Z;ee+=_*A,ee+=O*V,ee+=D*j,ee+=C*(5*l),ee+=H*(5*c),Z=ee>>>13,ee&=8191,ee+=W*(5*m),ee+=Q*(5*$),ee+=z*(5*de),ee+=Y*(5*ae),ee+=q*(5*F),Z+=ee>>>13,ee&=8191;var B=Z;B+=_*F,B+=O*A,B+=D*V,B+=C*j,B+=H*(5*l),Z=B>>>13,B&=8191,B+=W*(5*c),B+=Q*(5*m),B+=z*(5*$),B+=Y*(5*de),B+=q*(5*ae),Z+=B>>>13,B&=8191;var k=Z;k+=_*ae,k+=O*F,k+=D*A,k+=C*V,k+=H*j,Z=k>>>13,k&=8191,k+=W*(5*l),k+=Q*(5*c),k+=z*(5*m),k+=Y*(5*$),k+=q*(5*de),Z+=k>>>13,k&=8191;var K=Z;K+=_*de,K+=O*ae,K+=D*F,K+=C*A,K+=H*V,Z=K>>>13,K&=8191,K+=W*j,K+=Q*(5*l),K+=z*(5*c),K+=Y*(5*m),K+=q*(5*$),Z+=K>>>13,K&=8191;var w=Z;w+=_*$,w+=O*de,w+=D*ae,w+=C*F,w+=H*A,Z=w>>>13,w&=8191,w+=W*V,w+=Q*j,w+=z*(5*l),w+=Y*(5*c),w+=q*(5*m),Z+=w>>>13,w&=8191;var U=Z;U+=_*m,U+=O*$,U+=D*de,U+=C*ae,U+=H*F,Z=U>>>13,U&=8191,U+=W*A,U+=Q*V,U+=z*j,U+=Y*(5*l),U+=q*(5*c),Z+=U>>>13,U&=8191;var ne=Z;ne+=_*c,ne+=O*m,ne+=D*$,ne+=C*de,ne+=H*ae,Z=ne>>>13,ne&=8191,ne+=W*F,ne+=Q*A,ne+=z*V,ne+=Y*j,ne+=q*(5*l),Z+=ne>>>13,ne&=8191;var ce=Z;ce+=_*l,ce+=O*c,ce+=D*m,ce+=C*$,ce+=H*de,Z=ce>>>13,ce&=8191,ce+=W*ae,ce+=Q*F,ce+=z*A,ce+=Y*V,ce+=q*j,Z+=ce>>>13,ce&=8191,Z=(Z<<2)+Z|0,Z=Z+se|0,se=Z&8191,Z=Z>>>13,M+=Z,_=se,O=M,D=ee,C=B,H=k,W=K,Q=w,z=U,Y=ne,q=ce,v+=16,p-=16}this._h[0]=_,this._h[1]=O,this._h[2]=D,this._h[3]=C,this._h[4]=H,this._h[5]=W,this._h[6]=Q,this._h[7]=z,this._h[8]=Y,this._h[9]=q},f.prototype.finish=function(u,v){v===void 0&&(v=0);var p=new Uint16Array(10),y,_,O,D;if(this._leftover){for(D=this._leftover,this._buffer[D++]=1;D<16;D++)this._buffer[D]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(y=this._h[1]>>>13,this._h[1]&=8191,D=2;D<10;D++)this._h[D]+=y,y=this._h[D]>>>13,this._h[D]&=8191;for(this._h[0]+=y*5,y=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=y,y=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=y,p[0]=this._h[0]+5,y=p[0]>>>13,p[0]&=8191,D=1;D<10;D++)p[D]=this._h[D]+y,y=p[D]>>>13,p[D]&=8191;for(p[9]-=8192,_=(y^1)-1,D=0;D<10;D++)p[D]&=_;for(_=~_,D=0;D<10;D++)this._h[D]=this._h[D]&_|p[D];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,O=this._h[0]+this._pad[0],this._h[0]=O&65535,D=1;D<8;D++)O=(this._h[D]+this._pad[D]|0)+(O>>>16)|0,this._h[D]=O&65535;return u[v+0]=this._h[0]>>>0,u[v+1]=this._h[0]>>>8,u[v+2]=this._h[1]>>>0,u[v+3]=this._h[1]>>>8,u[v+4]=this._h[2]>>>0,u[v+5]=this._h[2]>>>8,u[v+6]=this._h[3]>>>0,u[v+7]=this._h[3]>>>8,u[v+8]=this._h[4]>>>0,u[v+9]=this._h[4]>>>8,u[v+10]=this._h[5]>>>0,u[v+11]=this._h[5]>>>8,u[v+12]=this._h[6]>>>0,u[v+13]=this._h[6]>>>8,u[v+14]=this._h[7]>>>0,u[v+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(u){var v=0,p=u.length,y;if(this._leftover){y=16-this._leftover,y>p&&(y=p);for(var _=0;_<y;_++)this._buffer[this._leftover+_]=u[v+_];if(p-=y,v+=y,this._leftover+=y,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(y=p-p%16,this._blocks(u,v,y),v+=y,p-=y),p){for(var _=0;_<p;_++)this._buffer[this._leftover+_]=u[v+_];this._leftover+=p}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},f.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();r.Poly1305=i;function n(f,u){var v=new i(f);v.update(u);var p=v.digest();return v.clean(),p}r.oneTimeAuth=n;function a(f,u){return f.length!==r.DIGEST_LENGTH||u.length!==r.DIGEST_LENGTH?!1:e.equal(f,u)}r.equal=a})(hb);(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Ru,t=hb,i=Ei,n=mt,a=Us;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var f=new Uint8Array(16),u=function(){function v(p){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,p.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return v.prototype.seal=function(p,y,_,O){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var D=new Uint8Array(16);D.set(p,D.length-p.length);var C=new Uint8Array(32);e.stream(this._key,D,C,4);var H=y.length+this.tagLength,W;if(O){if(O.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");W=O}else W=new Uint8Array(H);return e.streamXOR(this._key,D,y,W,4),this._authenticate(W.subarray(W.length-this.tagLength,W.length),C,W.subarray(0,W.length-this.tagLength),_),i.wipe(D),W},v.prototype.open=function(p,y,_,O){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(y.length<this.tagLength)return null;var D=new Uint8Array(16);D.set(p,D.length-p.length);var C=new Uint8Array(32);e.stream(this._key,D,C,4);var H=new Uint8Array(this.tagLength);if(this._authenticate(H,C,y.subarray(0,y.length-this.tagLength),_),!a.equal(H,y.subarray(y.length-this.tagLength,y.length)))return null;var W=y.length-this.tagLength,Q;if(O){if(O.length!==W)throw new Error("ChaCha20Poly1305: incorrect destination length");Q=O}else Q=new Uint8Array(W);return e.streamXOR(this._key,D,y.subarray(0,y.length-this.tagLength),Q,4),i.wipe(D),Q},v.prototype.clean=function(){return i.wipe(this._key),this},v.prototype._authenticate=function(p,y,_,O){var D=new t.Poly1305(y);O&&(D.update(O),O.length%16>0&&D.update(f.subarray(O.length%16))),D.update(_),_.length%16>0&&D.update(f.subarray(_.length%16));var C=new Uint8Array(8);O&&n.writeUint64LE(O.length,C),D.update(C),n.writeUint64LE(_.length,C),D.update(C);for(var H=D.digest(),W=0;W<H.length;W++)p[W]=H[W];D.clean(),i.wipe(H),i.wipe(C)},v}();r.ChaCha20Poly1305=u})(L0);var db={},Sc={},q0={};Object.defineProperty(q0,"__esModule",{value:!0});function W_(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}q0.isSerializableHash=W_;Object.defineProperty(Sc,"__esModule",{value:!0});var En=q0,J_=Us,Y_=Ei,pb=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),En.isSerializableHash(this._inner)&&En.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Y_.wipe(i)}return r.prototype.reset=function(){if(!En.isSerializableHash(this._inner)||!En.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){En.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),En.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!En.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!En.isSerializableHash(this._inner)||!En.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!En.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Sc.HMAC=pb;function Q_(r,e,t){var i=new pb(r,e);i.update(t);var n=i.digest();return i.clean(),n}Sc.hmac=Q_;Sc.equal=J_.equal;Object.defineProperty(db,"__esModule",{value:!0});var R1=Sc,N1=Ei,X_=function(){function r(e,t,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var a=R1.hmac(this._hash,i,t);this._hmac=new R1.HMAC(e,a),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),N1.wipe(this._buffer),N1.wipe(this._counter),this._bufpos=0},r}(),Z_=db.HKDF=X_,zs={},Nu={},Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.BrowserRandomSource=void 0;const T1=65536;class e7{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let i=0;i<t.length;i+=T1)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,T1)));return t}}Tu.BrowserRandomSource=e7;function t7(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.NodeRandomSource=void 0;const r7=Ei;class i7{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof t7<"u"){const e=T0;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let n=0;n<i.length;n++)i[n]=t[n];return(0,r7.wipe)(t),i}}Fu.NodeRandomSource=i7;Object.defineProperty(Nu,"__esModule",{value:!0});Nu.SystemRandomSource=void 0;const n7=Tu,s7=Fu;class a7{constructor(){if(this.isAvailable=!1,this.name="",this._source=new n7.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new s7.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Nu.SystemRandomSource=a7;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=Nu,t=mt,i=Ei;r.defaultRandomSource=new e.SystemRandomSource;function n(p,y=r.defaultRandomSource){return y.randomBytes(p)}r.randomBytes=n;function a(p=r.defaultRandomSource){const y=n(4,p),_=(0,t.readUint32LE)(y);return(0,i.wipe)(y),_}r.randomUint32=a;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(p,y=f,_=r.defaultRandomSource){if(y.length<2)throw new Error("randomString charset is too short");if(y.length>256)throw new Error("randomString charset is too long");let O="";const D=y.length,C=256-256%D;for(;p>0;){const H=n(Math.ceil(p*256/C),_);for(let W=0;W<H.length&&p>0;W++){const Q=H[W];Q<C&&(O+=y.charAt(Q%D),p--)}(0,i.wipe)(H)}return O}r.randomString=u;function v(p,y=f,_=r.defaultRandomSource){const O=Math.ceil(p/(Math.log(y.length)/Math.LN2));return u(O,y,_)}r.randomStringForEntropy=v})(zs);var Ic={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=mt,t=Ei;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var i=function(){function u(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},u.prototype.update=function(v,p){if(p===void 0&&(p=v.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var y=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=v[y++],p--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(y=a(this._temp,this._state,v,y,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=v[y++],p--;return this},u.prototype.finish=function(v){if(!this._finished){var p=this._bytesHashed,y=this._bufferLength,_=p/536870912|0,O=p<<3,D=p%64<56?64:128;this._buffer[y]=128;for(var C=y+1;C<D-8;C++)this._buffer[C]=0;e.writeUint32BE(_,this._buffer,D-8),e.writeUint32BE(O,this._buffer,D-4),a(this._temp,this._state,this._buffer,0,D),this._finished=!0}for(var C=0;C<this.digestLength/4;C++)e.writeUint32BE(this._state[C],v,C*4);return this},u.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(v){return this._state.set(v.state),this._bufferLength=v.bufferLength,v.buffer&&this._buffer.set(v.buffer),this._bytesHashed=v.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(v){t.wipe(v.state),v.buffer&&t.wipe(v.buffer),v.bufferLength=0,v.bytesHashed=0},u}();r.SHA256=i;var n=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(u,v,p,y,_){for(;_>=64;){for(var O=v[0],D=v[1],C=v[2],H=v[3],W=v[4],Q=v[5],z=v[6],Y=v[7],q=0;q<16;q++){var j=y+q*4;u[q]=e.readUint32BE(p,j)}for(var q=16;q<64;q++){var V=u[q-2],A=(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10;V=u[q-15];var F=(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3;u[q]=(A+u[q-7]|0)+(F+u[q-16]|0)}for(var q=0;q<64;q++){var A=(((W>>>6|W<<26)^(W>>>11|W<<21)^(W>>>25|W<<7))+(W&Q^~W&z)|0)+(Y+(n[q]+u[q]|0)|0)|0,F=((O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10))+(O&D^O&C^D&C)|0;Y=z,z=Q,Q=W,W=H+A|0,H=C,C=D,D=O,O=A+F|0}v[0]+=O,v[1]+=D,v[2]+=C,v[3]+=H,v[4]+=W,v[5]+=Q,v[6]+=z,v[7]+=Y,y+=64,_-=64}return y}function f(u){var v=new i;v.update(u);var p=v.digest();return v.clean(),p}r.hash=f})(Ic);var $0={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=zs,t=Ei;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(q){const j=new Float64Array(16);if(q)for(let V=0;V<q.length;V++)j[V]=q[V];return j}const n=new Uint8Array(32);n[0]=9;const a=i([56129,1]);function f(q){let j=1;for(let V=0;V<16;V++){let A=q[V]+j+65535;j=Math.floor(A/65536),q[V]=A-j*65536}q[0]+=j-1+37*(j-1)}function u(q,j,V){const A=~(V-1);for(let F=0;F<16;F++){const ae=A&(q[F]^j[F]);q[F]^=ae,j[F]^=ae}}function v(q,j){const V=i(),A=i();for(let F=0;F<16;F++)A[F]=j[F];f(A),f(A),f(A);for(let F=0;F<2;F++){V[0]=A[0]-65517;for(let de=1;de<15;de++)V[de]=A[de]-65535-(V[de-1]>>16&1),V[de-1]&=65535;V[15]=A[15]-32767-(V[14]>>16&1);const ae=V[15]>>16&1;V[14]&=65535,u(A,V,1-ae)}for(let F=0;F<16;F++)q[2*F]=A[F]&255,q[2*F+1]=A[F]>>8}function p(q,j){for(let V=0;V<16;V++)q[V]=j[2*V]+(j[2*V+1]<<8);q[15]&=32767}function y(q,j,V){for(let A=0;A<16;A++)q[A]=j[A]+V[A]}function _(q,j,V){for(let A=0;A<16;A++)q[A]=j[A]-V[A]}function O(q,j,V){let A,F,ae=0,de=0,$=0,m=0,c=0,l=0,b=0,x=0,I=0,P=0,S=0,d=0,g=0,N=0,Z=0,se=0,M=0,ee=0,B=0,k=0,K=0,w=0,U=0,ne=0,ce=0,ue=0,ye=0,we=0,Re=0,Qe=0,Pe=0,Ne=V[0],Ie=V[1],me=V[2],Oe=V[3],Te=V[4],ve=V[5],Ce=V[6],Se=V[7],be=V[8],qe=V[9],Me=V[10],_e=V[11],He=V[12],Ve=V[13],Ee=V[14],Ke=V[15];A=j[0],ae+=A*Ne,de+=A*Ie,$+=A*me,m+=A*Oe,c+=A*Te,l+=A*ve,b+=A*Ce,x+=A*Se,I+=A*be,P+=A*qe,S+=A*Me,d+=A*_e,g+=A*He,N+=A*Ve,Z+=A*Ee,se+=A*Ke,A=j[1],de+=A*Ne,$+=A*Ie,m+=A*me,c+=A*Oe,l+=A*Te,b+=A*ve,x+=A*Ce,I+=A*Se,P+=A*be,S+=A*qe,d+=A*Me,g+=A*_e,N+=A*He,Z+=A*Ve,se+=A*Ee,M+=A*Ke,A=j[2],$+=A*Ne,m+=A*Ie,c+=A*me,l+=A*Oe,b+=A*Te,x+=A*ve,I+=A*Ce,P+=A*Se,S+=A*be,d+=A*qe,g+=A*Me,N+=A*_e,Z+=A*He,se+=A*Ve,M+=A*Ee,ee+=A*Ke,A=j[3],m+=A*Ne,c+=A*Ie,l+=A*me,b+=A*Oe,x+=A*Te,I+=A*ve,P+=A*Ce,S+=A*Se,d+=A*be,g+=A*qe,N+=A*Me,Z+=A*_e,se+=A*He,M+=A*Ve,ee+=A*Ee,B+=A*Ke,A=j[4],c+=A*Ne,l+=A*Ie,b+=A*me,x+=A*Oe,I+=A*Te,P+=A*ve,S+=A*Ce,d+=A*Se,g+=A*be,N+=A*qe,Z+=A*Me,se+=A*_e,M+=A*He,ee+=A*Ve,B+=A*Ee,k+=A*Ke,A=j[5],l+=A*Ne,b+=A*Ie,x+=A*me,I+=A*Oe,P+=A*Te,S+=A*ve,d+=A*Ce,g+=A*Se,N+=A*be,Z+=A*qe,se+=A*Me,M+=A*_e,ee+=A*He,B+=A*Ve,k+=A*Ee,K+=A*Ke,A=j[6],b+=A*Ne,x+=A*Ie,I+=A*me,P+=A*Oe,S+=A*Te,d+=A*ve,g+=A*Ce,N+=A*Se,Z+=A*be,se+=A*qe,M+=A*Me,ee+=A*_e,B+=A*He,k+=A*Ve,K+=A*Ee,w+=A*Ke,A=j[7],x+=A*Ne,I+=A*Ie,P+=A*me,S+=A*Oe,d+=A*Te,g+=A*ve,N+=A*Ce,Z+=A*Se,se+=A*be,M+=A*qe,ee+=A*Me,B+=A*_e,k+=A*He,K+=A*Ve,w+=A*Ee,U+=A*Ke,A=j[8],I+=A*Ne,P+=A*Ie,S+=A*me,d+=A*Oe,g+=A*Te,N+=A*ve,Z+=A*Ce,se+=A*Se,M+=A*be,ee+=A*qe,B+=A*Me,k+=A*_e,K+=A*He,w+=A*Ve,U+=A*Ee,ne+=A*Ke,A=j[9],P+=A*Ne,S+=A*Ie,d+=A*me,g+=A*Oe,N+=A*Te,Z+=A*ve,se+=A*Ce,M+=A*Se,ee+=A*be,B+=A*qe,k+=A*Me,K+=A*_e,w+=A*He,U+=A*Ve,ne+=A*Ee,ce+=A*Ke,A=j[10],S+=A*Ne,d+=A*Ie,g+=A*me,N+=A*Oe,Z+=A*Te,se+=A*ve,M+=A*Ce,ee+=A*Se,B+=A*be,k+=A*qe,K+=A*Me,w+=A*_e,U+=A*He,ne+=A*Ve,ce+=A*Ee,ue+=A*Ke,A=j[11],d+=A*Ne,g+=A*Ie,N+=A*me,Z+=A*Oe,se+=A*Te,M+=A*ve,ee+=A*Ce,B+=A*Se,k+=A*be,K+=A*qe,w+=A*Me,U+=A*_e,ne+=A*He,ce+=A*Ve,ue+=A*Ee,ye+=A*Ke,A=j[12],g+=A*Ne,N+=A*Ie,Z+=A*me,se+=A*Oe,M+=A*Te,ee+=A*ve,B+=A*Ce,k+=A*Se,K+=A*be,w+=A*qe,U+=A*Me,ne+=A*_e,ce+=A*He,ue+=A*Ve,ye+=A*Ee,we+=A*Ke,A=j[13],N+=A*Ne,Z+=A*Ie,se+=A*me,M+=A*Oe,ee+=A*Te,B+=A*ve,k+=A*Ce,K+=A*Se,w+=A*be,U+=A*qe,ne+=A*Me,ce+=A*_e,ue+=A*He,ye+=A*Ve,we+=A*Ee,Re+=A*Ke,A=j[14],Z+=A*Ne,se+=A*Ie,M+=A*me,ee+=A*Oe,B+=A*Te,k+=A*ve,K+=A*Ce,w+=A*Se,U+=A*be,ne+=A*qe,ce+=A*Me,ue+=A*_e,ye+=A*He,we+=A*Ve,Re+=A*Ee,Qe+=A*Ke,A=j[15],se+=A*Ne,M+=A*Ie,ee+=A*me,B+=A*Oe,k+=A*Te,K+=A*ve,w+=A*Ce,U+=A*Se,ne+=A*be,ce+=A*qe,ue+=A*Me,ye+=A*_e,we+=A*He,Re+=A*Ve,Qe+=A*Ee,Pe+=A*Ke,ae+=38*M,de+=38*ee,$+=38*B,m+=38*k,c+=38*K,l+=38*w,b+=38*U,x+=38*ne,I+=38*ce,P+=38*ue,S+=38*ye,d+=38*we,g+=38*Re,N+=38*Qe,Z+=38*Pe,F=1,A=ae+F+65535,F=Math.floor(A/65536),ae=A-F*65536,A=de+F+65535,F=Math.floor(A/65536),de=A-F*65536,A=$+F+65535,F=Math.floor(A/65536),$=A-F*65536,A=m+F+65535,F=Math.floor(A/65536),m=A-F*65536,A=c+F+65535,F=Math.floor(A/65536),c=A-F*65536,A=l+F+65535,F=Math.floor(A/65536),l=A-F*65536,A=b+F+65535,F=Math.floor(A/65536),b=A-F*65536,A=x+F+65535,F=Math.floor(A/65536),x=A-F*65536,A=I+F+65535,F=Math.floor(A/65536),I=A-F*65536,A=P+F+65535,F=Math.floor(A/65536),P=A-F*65536,A=S+F+65535,F=Math.floor(A/65536),S=A-F*65536,A=d+F+65535,F=Math.floor(A/65536),d=A-F*65536,A=g+F+65535,F=Math.floor(A/65536),g=A-F*65536,A=N+F+65535,F=Math.floor(A/65536),N=A-F*65536,A=Z+F+65535,F=Math.floor(A/65536),Z=A-F*65536,A=se+F+65535,F=Math.floor(A/65536),se=A-F*65536,ae+=F-1+37*(F-1),F=1,A=ae+F+65535,F=Math.floor(A/65536),ae=A-F*65536,A=de+F+65535,F=Math.floor(A/65536),de=A-F*65536,A=$+F+65535,F=Math.floor(A/65536),$=A-F*65536,A=m+F+65535,F=Math.floor(A/65536),m=A-F*65536,A=c+F+65535,F=Math.floor(A/65536),c=A-F*65536,A=l+F+65535,F=Math.floor(A/65536),l=A-F*65536,A=b+F+65535,F=Math.floor(A/65536),b=A-F*65536,A=x+F+65535,F=Math.floor(A/65536),x=A-F*65536,A=I+F+65535,F=Math.floor(A/65536),I=A-F*65536,A=P+F+65535,F=Math.floor(A/65536),P=A-F*65536,A=S+F+65535,F=Math.floor(A/65536),S=A-F*65536,A=d+F+65535,F=Math.floor(A/65536),d=A-F*65536,A=g+F+65535,F=Math.floor(A/65536),g=A-F*65536,A=N+F+65535,F=Math.floor(A/65536),N=A-F*65536,A=Z+F+65535,F=Math.floor(A/65536),Z=A-F*65536,A=se+F+65535,F=Math.floor(A/65536),se=A-F*65536,ae+=F-1+37*(F-1),q[0]=ae,q[1]=de,q[2]=$,q[3]=m,q[4]=c,q[5]=l,q[6]=b,q[7]=x,q[8]=I,q[9]=P,q[10]=S,q[11]=d,q[12]=g,q[13]=N,q[14]=Z,q[15]=se}function D(q,j){O(q,j,j)}function C(q,j){const V=i();for(let A=0;A<16;A++)V[A]=j[A];for(let A=253;A>=0;A--)D(V,V),A!==2&&A!==4&&O(V,V,j);for(let A=0;A<16;A++)q[A]=V[A]}function H(q,j){const V=new Uint8Array(32),A=new Float64Array(80),F=i(),ae=i(),de=i(),$=i(),m=i(),c=i();for(let I=0;I<31;I++)V[I]=q[I];V[31]=q[31]&127|64,V[0]&=248,p(A,j);for(let I=0;I<16;I++)ae[I]=A[I];F[0]=$[0]=1;for(let I=254;I>=0;--I){const P=V[I>>>3]>>>(I&7)&1;u(F,ae,P),u(de,$,P),y(m,F,de),_(F,F,de),y(de,ae,$),_(ae,ae,$),D($,m),D(c,F),O(F,de,F),O(de,ae,m),y(m,F,de),_(F,F,de),D(ae,F),_(de,$,c),O(F,de,a),y(F,F,$),O(de,de,F),O(F,$,c),O($,ae,A),D(ae,m),u(F,ae,P),u(de,$,P)}for(let I=0;I<16;I++)A[I+16]=F[I],A[I+32]=de[I],A[I+48]=ae[I],A[I+64]=$[I];const l=A.subarray(32),b=A.subarray(16);C(l,l),O(b,b,l);const x=new Uint8Array(32);return v(x,b),x}r.scalarMult=H;function W(q){return H(q,n)}r.scalarMultBase=W;function Q(q){if(q.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const j=new Uint8Array(q);return{publicKey:W(j),secretKey:j}}r.generateKeyPairFromSeed=Q;function z(q){const j=(0,e.randomBytes)(32,q),V=Q(j);return(0,t.wipe)(j),V}r.generateKeyPair=z;function Y(q,j,V=!1){if(q.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(j.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const A=H(q,j);if(V){let F=0;for(let ae=0;ae<A.length;ae++)F|=A[ae];if(F===0)throw new Error("X25519: invalid shared key")}return A}r.sharedKey=Y})($0);function gb(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function gl(r,e){e||(e=r.reduce((n,a)=>n+a.length,0));const t=gb(e);let i=0;for(const n of r)t.set(n,i),i+=n.length;return t}function o7(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var n=0;n<r.length;n++){var a=r.charAt(n),f=a.charCodeAt(0);if(t[f]!==255)throw new TypeError(a+" is ambiguous");t[f]=n}var u=r.length,v=r.charAt(0),p=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function _(C){if(C instanceof Uint8Array||(ArrayBuffer.isView(C)?C=new Uint8Array(C.buffer,C.byteOffset,C.byteLength):Array.isArray(C)&&(C=Uint8Array.from(C))),!(C instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(C.length===0)return"";for(var H=0,W=0,Q=0,z=C.length;Q!==z&&C[Q]===0;)Q++,H++;for(var Y=(z-Q)*y+1>>>0,q=new Uint8Array(Y);Q!==z;){for(var j=C[Q],V=0,A=Y-1;(j!==0||V<W)&&A!==-1;A--,V++)j+=256*q[A]>>>0,q[A]=j%u>>>0,j=j/u>>>0;if(j!==0)throw new Error("Non-zero carry");W=V,Q++}for(var F=Y-W;F!==Y&&q[F]===0;)F++;for(var ae=v.repeat(H);F<Y;++F)ae+=r.charAt(q[F]);return ae}function O(C){if(typeof C!="string")throw new TypeError("Expected String");if(C.length===0)return new Uint8Array;var H=0;if(C[H]!==" "){for(var W=0,Q=0;C[H]===v;)W++,H++;for(var z=(C.length-H)*p+1>>>0,Y=new Uint8Array(z);C[H];){var q=t[C.charCodeAt(H)];if(q===255)return;for(var j=0,V=z-1;(q!==0||j<Q)&&V!==-1;V--,j++)q+=u*Y[V]>>>0,Y[V]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");Q=j,H++}if(C[H]!==" "){for(var A=z-Q;A!==z&&Y[A]===0;)A++;for(var F=new Uint8Array(W+(z-A)),ae=W;A!==z;)F[ae++]=Y[A++];return F}}}function D(C){var H=O(C);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:O,decode:D}}var c7=o7,f7=c7;const u7=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},h7=r=>new TextEncoder().encode(r),l7=r=>new TextDecoder().decode(r);class d7{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class p7{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vb(this,e)}}class g7{constructor(e){this.decoders=e}or(e){return vb(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vb=(r,e)=>new g7({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class v7{constructor(e,t,i,n){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=n,this.encoder=new d7(e,t,i),this.decoder=new p7(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Bu=({name:r,prefix:e,encode:t,decode:i})=>new v7(r,e,t,i),Mc=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:n}=f7(t,e);return Bu({prefix:r,name:e,encode:i,decode:a=>u7(n(a))})},b7=(r,e,t,i)=>{const n={};for(let y=0;y<e.length;++y)n[e[y]]=y;let a=r.length;for(;r[a-1]==="=";)--a;const f=new Uint8Array(a*t/8|0);let u=0,v=0,p=0;for(let y=0;y<a;++y){const _=n[r[y]];if(_===void 0)throw new SyntaxError(`Non-${i} character`);v=v<<t|_,u+=t,u>=8&&(u-=8,f[p++]=255&v>>u)}if(u>=t||255&v<<8-u)throw new SyntaxError("Unexpected end of data");return f},m7=(r,e,t)=>{const i=e[e.length-1]==="=",n=(1<<t)-1;let a="",f=0,u=0;for(let v=0;v<r.length;++v)for(u=u<<8|r[v],f+=8;f>t;)f-=t,a+=e[n&u>>f];if(f&&(a+=e[n&u<<t-f]),i)for(;a.length*t&7;)a+="=";return a},Dr=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>Bu({prefix:e,name:r,encode(n){return m7(n,i,t)},decode(n){return b7(n,i,t,r)}}),y7=Bu({prefix:"\0",name:"identity",encode:r=>l7(r),decode:r=>h7(r)}),w7=Object.freeze(Object.defineProperty({__proto__:null,identity:y7},Symbol.toStringTag,{value:"Module"})),_7=Dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),A7=Object.freeze(Object.defineProperty({__proto__:null,base2:_7},Symbol.toStringTag,{value:"Module"})),E7=Dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),x7=Object.freeze(Object.defineProperty({__proto__:null,base8:E7},Symbol.toStringTag,{value:"Module"})),S7=Mc({prefix:"9",name:"base10",alphabet:"0123456789"}),I7=Object.freeze(Object.defineProperty({__proto__:null,base10:S7},Symbol.toStringTag,{value:"Module"})),M7=Dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),D7=Dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),P7=Object.freeze(Object.defineProperty({__proto__:null,base16:M7,base16upper:D7},Symbol.toStringTag,{value:"Module"})),O7=Dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),C7=Dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),R7=Dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),N7=Dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),T7=Dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),F7=Dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),B7=Dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),L7=Dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),q7=Dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),$7=Object.freeze(Object.defineProperty({__proto__:null,base32:O7,base32hex:T7,base32hexpad:B7,base32hexpadupper:L7,base32hexupper:F7,base32pad:R7,base32padupper:N7,base32upper:C7,base32z:q7},Symbol.toStringTag,{value:"Module"})),U7=Mc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z7=Mc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),j7=Object.freeze(Object.defineProperty({__proto__:null,base36:U7,base36upper:z7},Symbol.toStringTag,{value:"Module"})),k7=Mc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),H7=Mc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),K7=Object.freeze(Object.defineProperty({__proto__:null,base58btc:k7,base58flickr:H7},Symbol.toStringTag,{value:"Module"})),V7=Dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),G7=Dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),W7=Dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),J7=Dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y7=Object.freeze(Object.defineProperty({__proto__:null,base64:V7,base64pad:G7,base64url:W7,base64urlpad:J7},Symbol.toStringTag,{value:"Module"})),bb=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Q7=bb.reduce((r,e,t)=>(r[t]=e,r),[]),X7=bb.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Z7(r){return r.reduce((e,t)=>(e+=Q7[t],e),"")}function e9(r){const e=[];for(const t of r){const i=X7[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const t9=Bu({prefix:"🚀",name:"base256emoji",encode:Z7,decode:e9}),r9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:t9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const lu={...w7,...A7,...x7,...I7,...P7,...$7,...j7,...K7,...Y7,...r9};function mb(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const F1=mb("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),vl=mb("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=gb(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),yb={utf8:F1,"utf-8":F1,hex:lu.base16,latin1:vl,ascii:vl,binary:vl,...lu};function ji(r,e="utf8"){const t=yb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function fi(r,e="utf8"){const t=yb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var wb={};const i9="elliptic",n9="6.5.7",s9="EC cryptography",a9="lib/elliptic.js",o9=["lib"],c9={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},f9={type:"git",url:"git@github.com:indutny/elliptic"},u9=["EC","Elliptic","curve","Cryptography"],h9="Fedor Indutny <fedor@indutny.com>",l9="MIT",d9={url:"https://github.com/indutny/elliptic/issues"},p9="https://github.com/indutny/elliptic",g9={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},v9={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},b9={name:i9,version:n9,description:s9,main:a9,files:o9,scripts:c9,repository:f9,keywords:u9,author:h9,license:l9,bugs:d9,homepage:p9,devDependencies:g9,dependencies:v9};var xi={},U0={exports:{}};U0.exports;(function(r){(function(e,t){function i($,m){if(!$)throw new Error(m||"Assertion failed")}function n($,m){$.super_=m;var c=function(){};c.prototype=m.prototype,$.prototype=new c,$.prototype.constructor=$}function a($,m,c){if(a.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((m==="le"||m==="be")&&(c=m,m=10),this._init($||0,m||10,c||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=T0.Buffer}catch{}a.isBN=function(m){return m instanceof a?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===a.wordSize&&Array.isArray(m.words)},a.max=function(m,c){return m.cmp(c)>0?m:c},a.min=function(m,c){return m.cmp(c)<0?m:c},a.prototype._init=function(m,c,l){if(typeof m=="number")return this._initNumber(m,c,l);if(typeof m=="object")return this._initArray(m,c,l);c==="hex"&&(c=16),i(c===(c|0)&&c>=2&&c<=36),m=m.toString().replace(/\s+/g,"");var b=0;m[0]==="-"&&(b++,this.negative=1),b<m.length&&(c===16?this._parseHex(m,b,l):(this._parseBase(m,c,b),l==="le"&&this._initArray(this.toArray(),c,l)))},a.prototype._initNumber=function(m,c,l){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(i(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),c,l)},a.prototype._initArray=function(m,c,l){if(i(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var x,I,P=0;if(l==="be")for(b=m.length-1,x=0;b>=0;b-=3)I=m[b]|m[b-1]<<8|m[b-2]<<16,this.words[x]|=I<<P&67108863,this.words[x+1]=I>>>26-P&67108863,P+=24,P>=26&&(P-=26,x++);else if(l==="le")for(b=0,x=0;b<m.length;b+=3)I=m[b]|m[b+1]<<8|m[b+2]<<16,this.words[x]|=I<<P&67108863,this.words[x+1]=I>>>26-P&67108863,P+=24,P>=26&&(P-=26,x++);return this.strip()};function u($,m){var c=$.charCodeAt(m);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function v($,m,c){var l=u($,c);return c-1>=m&&(l|=u($,c-1)<<4),l}a.prototype._parseHex=function(m,c,l){this.length=Math.ceil((m.length-c)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var x=0,I=0,P;if(l==="be")for(b=m.length-1;b>=c;b-=2)P=v(m,c,b)<<x,this.words[I]|=P&67108863,x>=18?(x-=18,I+=1,this.words[I]|=P>>>26):x+=8;else{var S=m.length-c;for(b=S%2===0?c+1:c;b<m.length;b+=2)P=v(m,c,b)<<x,this.words[I]|=P&67108863,x>=18?(x-=18,I+=1,this.words[I]|=P>>>26):x+=8}this.strip()};function p($,m,c,l){for(var b=0,x=Math.min($.length,c),I=m;I<x;I++){var P=$.charCodeAt(I)-48;b*=l,P>=49?b+=P-49+10:P>=17?b+=P-17+10:b+=P}return b}a.prototype._parseBase=function(m,c,l){this.words=[0],this.length=1;for(var b=0,x=1;x<=67108863;x*=c)b++;b--,x=x/c|0;for(var I=m.length-l,P=I%b,S=Math.min(I,I-P)+l,d=0,g=l;g<S;g+=b)d=p(m,g,g+b,c),this.imuln(x),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(P!==0){var N=1;for(d=p(m,g,m.length,c),g=0;g<P;g++)N*=c;this.imuln(N),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(m){m.words=new Array(this.length);for(var c=0;c<this.length;c++)m.words[c]=this.words[c];m.length=this.length,m.negative=this.negative,m.red=this.red},a.prototype.clone=function(){var m=new a(null);return this.copy(m),m},a.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(m,c){m=m||10,c=c|0||1;var l;if(m===16||m==="hex"){l="";for(var b=0,x=0,I=0;I<this.length;I++){var P=this.words[I],S=((P<<b|x)&16777215).toString(16);x=P>>>24-b&16777215,x!==0||I!==this.length-1?l=y[6-S.length]+S+l:l=S+l,b+=2,b>=26&&(b-=26,I--)}for(x!==0&&(l=x.toString(16)+l);l.length%c!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(m===(m|0)&&m>=2&&m<=36){var d=_[m],g=O[m];l="";var N=this.clone();for(N.negative=0;!N.isZero();){var Z=N.modn(g).toString(m);N=N.idivn(g),N.isZero()?l=Z+l:l=y[d-Z.length]+Z+l}for(this.isZero()&&(l="0"+l);l.length%c!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(m,c){return i(typeof f<"u"),this.toArrayLike(f,m,c)},a.prototype.toArray=function(m,c){return this.toArrayLike(Array,m,c)},a.prototype.toArrayLike=function(m,c,l){var b=this.byteLength(),x=l||Math.max(1,b);i(b<=x,"byte array longer than desired length"),i(x>0,"Requested array length <= 0"),this.strip();var I=c==="le",P=new m(x),S,d,g=this.clone();if(I){for(d=0;!g.isZero();d++)S=g.andln(255),g.iushrn(8),P[d]=S;for(;d<x;d++)P[d]=0}else{for(d=0;d<x-b;d++)P[d]=0;for(d=0;!g.isZero();d++)S=g.andln(255),g.iushrn(8),P[x-d-1]=S}return P},Math.clz32?a.prototype._countBits=function(m){return 32-Math.clz32(m)}:a.prototype._countBits=function(m){var c=m,l=0;return c>=4096&&(l+=13,c>>>=13),c>=64&&(l+=7,c>>>=7),c>=8&&(l+=4,c>>>=4),c>=2&&(l+=2,c>>>=2),l+c},a.prototype._zeroBits=function(m){if(m===0)return 26;var c=m,l=0;return c&8191||(l+=13,c>>>=13),c&127||(l+=7,c>>>=7),c&15||(l+=4,c>>>=4),c&3||(l+=2,c>>>=2),c&1||l++,l},a.prototype.bitLength=function(){var m=this.words[this.length-1],c=this._countBits(m);return(this.length-1)*26+c};function D($){for(var m=new Array($.bitLength()),c=0;c<m.length;c++){var l=c/26|0,b=c%26;m[c]=($.words[l]&1<<b)>>>b}return m}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,c=0;c<this.length;c++){var l=this._zeroBits(this.words[c]);if(m+=l,l!==26)break}return m},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},a.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var c=0;c<m.length;c++)this.words[c]=this.words[c]|m.words[c];return this.strip()},a.prototype.ior=function(m){return i((this.negative|m.negative)===0),this.iuor(m)},a.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},a.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},a.prototype.iuand=function(m){var c;this.length>m.length?c=m:c=this;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]&m.words[l];return this.length=c.length,this.strip()},a.prototype.iand=function(m){return i((this.negative|m.negative)===0),this.iuand(m)},a.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},a.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},a.prototype.iuxor=function(m){var c,l;this.length>m.length?(c=this,l=m):(c=m,l=this);for(var b=0;b<l.length;b++)this.words[b]=c.words[b]^l.words[b];if(this!==c)for(;b<c.length;b++)this.words[b]=c.words[b];return this.length=c.length,this.strip()},a.prototype.ixor=function(m){return i((this.negative|m.negative)===0),this.iuxor(m)},a.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},a.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},a.prototype.inotn=function(m){i(typeof m=="number"&&m>=0);var c=Math.ceil(m/26)|0,l=m%26;this._expand(c),l>0&&c--;for(var b=0;b<c;b++)this.words[b]=~this.words[b]&67108863;return l>0&&(this.words[b]=~this.words[b]&67108863>>26-l),this.strip()},a.prototype.notn=function(m){return this.clone().inotn(m)},a.prototype.setn=function(m,c){i(typeof m=="number"&&m>=0);var l=m/26|0,b=m%26;return this._expand(l+1),c?this.words[l]=this.words[l]|1<<b:this.words[l]=this.words[l]&~(1<<b),this.strip()},a.prototype.iadd=function(m){var c;if(this.negative!==0&&m.negative===0)return this.negative=0,c=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,c=this.isub(m),m.negative=1,c._normSign();var l,b;this.length>m.length?(l=this,b=m):(l=m,b=this);for(var x=0,I=0;I<b.length;I++)c=(l.words[I]|0)+(b.words[I]|0)+x,this.words[I]=c&67108863,x=c>>>26;for(;x!==0&&I<l.length;I++)c=(l.words[I]|0)+x,this.words[I]=c&67108863,x=c>>>26;if(this.length=l.length,x!==0)this.words[this.length]=x,this.length++;else if(l!==this)for(;I<l.length;I++)this.words[I]=l.words[I];return this},a.prototype.add=function(m){var c;return m.negative!==0&&this.negative===0?(m.negative=0,c=this.sub(m),m.negative^=1,c):m.negative===0&&this.negative!==0?(this.negative=0,c=m.sub(this),this.negative=1,c):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},a.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var c=this.iadd(m);return m.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var l=this.cmp(m);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,x;l>0?(b=this,x=m):(b=m,x=this);for(var I=0,P=0;P<x.length;P++)c=(b.words[P]|0)-(x.words[P]|0)+I,I=c>>26,this.words[P]=c&67108863;for(;I!==0&&P<b.length;P++)c=(b.words[P]|0)+I,I=c>>26,this.words[P]=c&67108863;if(I===0&&P<b.length&&b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this.length=Math.max(this.length,P),b!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(m){return this.clone().isub(m)};function C($,m,c){c.negative=m.negative^$.negative;var l=$.length+m.length|0;c.length=l,l=l-1|0;var b=$.words[0]|0,x=m.words[0]|0,I=b*x,P=I&67108863,S=I/67108864|0;c.words[0]=P;for(var d=1;d<l;d++){for(var g=S>>>26,N=S&67108863,Z=Math.min(d,m.length-1),se=Math.max(0,d-$.length+1);se<=Z;se++){var M=d-se|0;b=$.words[M]|0,x=m.words[se]|0,I=b*x+N,g+=I/67108864|0,N=I&67108863}c.words[d]=N|0,S=g|0}return S!==0?c.words[d]=S|0:c.length--,c.strip()}var H=function(m,c,l){var b=m.words,x=c.words,I=l.words,P=0,S,d,g,N=b[0]|0,Z=N&8191,se=N>>>13,M=b[1]|0,ee=M&8191,B=M>>>13,k=b[2]|0,K=k&8191,w=k>>>13,U=b[3]|0,ne=U&8191,ce=U>>>13,ue=b[4]|0,ye=ue&8191,we=ue>>>13,Re=b[5]|0,Qe=Re&8191,Pe=Re>>>13,Ne=b[6]|0,Ie=Ne&8191,me=Ne>>>13,Oe=b[7]|0,Te=Oe&8191,ve=Oe>>>13,Ce=b[8]|0,Se=Ce&8191,be=Ce>>>13,qe=b[9]|0,Me=qe&8191,_e=qe>>>13,He=x[0]|0,Ve=He&8191,Ee=He>>>13,Ke=x[1]|0,ht=Ke&8191,Ge=Ke>>>13,_t=x[2]|0,lt=_t&8191,Je=_t>>>13,Et=x[3]|0,It=Et&8191,Fe=Et>>>13,Xe=x[4]|0,tt=Xe&8191,Be=Xe>>>13,et=x[5]|0,Ze=et&8191,Ue=et>>>13,ft=x[6]|0,rt=ft&8191,ze=ft>>>13,it=x[7]|0,st=it&8191,Le=it>>>13,Ye=x[8]|0,ut=Ye&8191,je=Ye>>>13,Nt=x[9]|0,Tt=Nt&8191,at=Nt>>>13;l.negative=m.negative^c.negative,l.length=19,S=Math.imul(Z,Ve),d=Math.imul(Z,Ee),d=d+Math.imul(se,Ve)|0,g=Math.imul(se,Ee);var bt=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(bt>>>26)|0,bt&=67108863,S=Math.imul(ee,Ve),d=Math.imul(ee,Ee),d=d+Math.imul(B,Ve)|0,g=Math.imul(B,Ee),S=S+Math.imul(Z,ht)|0,d=d+Math.imul(Z,Ge)|0,d=d+Math.imul(se,ht)|0,g=g+Math.imul(se,Ge)|0;var Cr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,S=Math.imul(K,Ve),d=Math.imul(K,Ee),d=d+Math.imul(w,Ve)|0,g=Math.imul(w,Ee),S=S+Math.imul(ee,ht)|0,d=d+Math.imul(ee,Ge)|0,d=d+Math.imul(B,ht)|0,g=g+Math.imul(B,Ge)|0,S=S+Math.imul(Z,lt)|0,d=d+Math.imul(Z,Je)|0,d=d+Math.imul(se,lt)|0,g=g+Math.imul(se,Je)|0;var Rr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,S=Math.imul(ne,Ve),d=Math.imul(ne,Ee),d=d+Math.imul(ce,Ve)|0,g=Math.imul(ce,Ee),S=S+Math.imul(K,ht)|0,d=d+Math.imul(K,Ge)|0,d=d+Math.imul(w,ht)|0,g=g+Math.imul(w,Ge)|0,S=S+Math.imul(ee,lt)|0,d=d+Math.imul(ee,Je)|0,d=d+Math.imul(B,lt)|0,g=g+Math.imul(B,Je)|0,S=S+Math.imul(Z,It)|0,d=d+Math.imul(Z,Fe)|0,d=d+Math.imul(se,It)|0,g=g+Math.imul(se,Fe)|0;var Nr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,S=Math.imul(ye,Ve),d=Math.imul(ye,Ee),d=d+Math.imul(we,Ve)|0,g=Math.imul(we,Ee),S=S+Math.imul(ne,ht)|0,d=d+Math.imul(ne,Ge)|0,d=d+Math.imul(ce,ht)|0,g=g+Math.imul(ce,Ge)|0,S=S+Math.imul(K,lt)|0,d=d+Math.imul(K,Je)|0,d=d+Math.imul(w,lt)|0,g=g+Math.imul(w,Je)|0,S=S+Math.imul(ee,It)|0,d=d+Math.imul(ee,Fe)|0,d=d+Math.imul(B,It)|0,g=g+Math.imul(B,Fe)|0,S=S+Math.imul(Z,tt)|0,d=d+Math.imul(Z,Be)|0,d=d+Math.imul(se,tt)|0,g=g+Math.imul(se,Be)|0;var Tr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,S=Math.imul(Qe,Ve),d=Math.imul(Qe,Ee),d=d+Math.imul(Pe,Ve)|0,g=Math.imul(Pe,Ee),S=S+Math.imul(ye,ht)|0,d=d+Math.imul(ye,Ge)|0,d=d+Math.imul(we,ht)|0,g=g+Math.imul(we,Ge)|0,S=S+Math.imul(ne,lt)|0,d=d+Math.imul(ne,Je)|0,d=d+Math.imul(ce,lt)|0,g=g+Math.imul(ce,Je)|0,S=S+Math.imul(K,It)|0,d=d+Math.imul(K,Fe)|0,d=d+Math.imul(w,It)|0,g=g+Math.imul(w,Fe)|0,S=S+Math.imul(ee,tt)|0,d=d+Math.imul(ee,Be)|0,d=d+Math.imul(B,tt)|0,g=g+Math.imul(B,Be)|0,S=S+Math.imul(Z,Ze)|0,d=d+Math.imul(Z,Ue)|0,d=d+Math.imul(se,Ze)|0,g=g+Math.imul(se,Ue)|0;var Fr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,S=Math.imul(Ie,Ve),d=Math.imul(Ie,Ee),d=d+Math.imul(me,Ve)|0,g=Math.imul(me,Ee),S=S+Math.imul(Qe,ht)|0,d=d+Math.imul(Qe,Ge)|0,d=d+Math.imul(Pe,ht)|0,g=g+Math.imul(Pe,Ge)|0,S=S+Math.imul(ye,lt)|0,d=d+Math.imul(ye,Je)|0,d=d+Math.imul(we,lt)|0,g=g+Math.imul(we,Je)|0,S=S+Math.imul(ne,It)|0,d=d+Math.imul(ne,Fe)|0,d=d+Math.imul(ce,It)|0,g=g+Math.imul(ce,Fe)|0,S=S+Math.imul(K,tt)|0,d=d+Math.imul(K,Be)|0,d=d+Math.imul(w,tt)|0,g=g+Math.imul(w,Be)|0,S=S+Math.imul(ee,Ze)|0,d=d+Math.imul(ee,Ue)|0,d=d+Math.imul(B,Ze)|0,g=g+Math.imul(B,Ue)|0,S=S+Math.imul(Z,rt)|0,d=d+Math.imul(Z,ze)|0,d=d+Math.imul(se,rt)|0,g=g+Math.imul(se,ze)|0;var er=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(er>>>26)|0,er&=67108863,S=Math.imul(Te,Ve),d=Math.imul(Te,Ee),d=d+Math.imul(ve,Ve)|0,g=Math.imul(ve,Ee),S=S+Math.imul(Ie,ht)|0,d=d+Math.imul(Ie,Ge)|0,d=d+Math.imul(me,ht)|0,g=g+Math.imul(me,Ge)|0,S=S+Math.imul(Qe,lt)|0,d=d+Math.imul(Qe,Je)|0,d=d+Math.imul(Pe,lt)|0,g=g+Math.imul(Pe,Je)|0,S=S+Math.imul(ye,It)|0,d=d+Math.imul(ye,Fe)|0,d=d+Math.imul(we,It)|0,g=g+Math.imul(we,Fe)|0,S=S+Math.imul(ne,tt)|0,d=d+Math.imul(ne,Be)|0,d=d+Math.imul(ce,tt)|0,g=g+Math.imul(ce,Be)|0,S=S+Math.imul(K,Ze)|0,d=d+Math.imul(K,Ue)|0,d=d+Math.imul(w,Ze)|0,g=g+Math.imul(w,Ue)|0,S=S+Math.imul(ee,rt)|0,d=d+Math.imul(ee,ze)|0,d=d+Math.imul(B,rt)|0,g=g+Math.imul(B,ze)|0,S=S+Math.imul(Z,st)|0,d=d+Math.imul(Z,Le)|0,d=d+Math.imul(se,st)|0,g=g+Math.imul(se,Le)|0;var Xr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,S=Math.imul(Se,Ve),d=Math.imul(Se,Ee),d=d+Math.imul(be,Ve)|0,g=Math.imul(be,Ee),S=S+Math.imul(Te,ht)|0,d=d+Math.imul(Te,Ge)|0,d=d+Math.imul(ve,ht)|0,g=g+Math.imul(ve,Ge)|0,S=S+Math.imul(Ie,lt)|0,d=d+Math.imul(Ie,Je)|0,d=d+Math.imul(me,lt)|0,g=g+Math.imul(me,Je)|0,S=S+Math.imul(Qe,It)|0,d=d+Math.imul(Qe,Fe)|0,d=d+Math.imul(Pe,It)|0,g=g+Math.imul(Pe,Fe)|0,S=S+Math.imul(ye,tt)|0,d=d+Math.imul(ye,Be)|0,d=d+Math.imul(we,tt)|0,g=g+Math.imul(we,Be)|0,S=S+Math.imul(ne,Ze)|0,d=d+Math.imul(ne,Ue)|0,d=d+Math.imul(ce,Ze)|0,g=g+Math.imul(ce,Ue)|0,S=S+Math.imul(K,rt)|0,d=d+Math.imul(K,ze)|0,d=d+Math.imul(w,rt)|0,g=g+Math.imul(w,ze)|0,S=S+Math.imul(ee,st)|0,d=d+Math.imul(ee,Le)|0,d=d+Math.imul(B,st)|0,g=g+Math.imul(B,Le)|0,S=S+Math.imul(Z,ut)|0,d=d+Math.imul(Z,je)|0,d=d+Math.imul(se,ut)|0,g=g+Math.imul(se,je)|0;var Gi=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,S=Math.imul(Me,Ve),d=Math.imul(Me,Ee),d=d+Math.imul(_e,Ve)|0,g=Math.imul(_e,Ee),S=S+Math.imul(Se,ht)|0,d=d+Math.imul(Se,Ge)|0,d=d+Math.imul(be,ht)|0,g=g+Math.imul(be,Ge)|0,S=S+Math.imul(Te,lt)|0,d=d+Math.imul(Te,Je)|0,d=d+Math.imul(ve,lt)|0,g=g+Math.imul(ve,Je)|0,S=S+Math.imul(Ie,It)|0,d=d+Math.imul(Ie,Fe)|0,d=d+Math.imul(me,It)|0,g=g+Math.imul(me,Fe)|0,S=S+Math.imul(Qe,tt)|0,d=d+Math.imul(Qe,Be)|0,d=d+Math.imul(Pe,tt)|0,g=g+Math.imul(Pe,Be)|0,S=S+Math.imul(ye,Ze)|0,d=d+Math.imul(ye,Ue)|0,d=d+Math.imul(we,Ze)|0,g=g+Math.imul(we,Ue)|0,S=S+Math.imul(ne,rt)|0,d=d+Math.imul(ne,ze)|0,d=d+Math.imul(ce,rt)|0,g=g+Math.imul(ce,ze)|0,S=S+Math.imul(K,st)|0,d=d+Math.imul(K,Le)|0,d=d+Math.imul(w,st)|0,g=g+Math.imul(w,Le)|0,S=S+Math.imul(ee,ut)|0,d=d+Math.imul(ee,je)|0,d=d+Math.imul(B,ut)|0,g=g+Math.imul(B,je)|0,S=S+Math.imul(Z,Tt)|0,d=d+Math.imul(Z,at)|0,d=d+Math.imul(se,Tt)|0,g=g+Math.imul(se,at)|0;var Zr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,S=Math.imul(Me,ht),d=Math.imul(Me,Ge),d=d+Math.imul(_e,ht)|0,g=Math.imul(_e,Ge),S=S+Math.imul(Se,lt)|0,d=d+Math.imul(Se,Je)|0,d=d+Math.imul(be,lt)|0,g=g+Math.imul(be,Je)|0,S=S+Math.imul(Te,It)|0,d=d+Math.imul(Te,Fe)|0,d=d+Math.imul(ve,It)|0,g=g+Math.imul(ve,Fe)|0,S=S+Math.imul(Ie,tt)|0,d=d+Math.imul(Ie,Be)|0,d=d+Math.imul(me,tt)|0,g=g+Math.imul(me,Be)|0,S=S+Math.imul(Qe,Ze)|0,d=d+Math.imul(Qe,Ue)|0,d=d+Math.imul(Pe,Ze)|0,g=g+Math.imul(Pe,Ue)|0,S=S+Math.imul(ye,rt)|0,d=d+Math.imul(ye,ze)|0,d=d+Math.imul(we,rt)|0,g=g+Math.imul(we,ze)|0,S=S+Math.imul(ne,st)|0,d=d+Math.imul(ne,Le)|0,d=d+Math.imul(ce,st)|0,g=g+Math.imul(ce,Le)|0,S=S+Math.imul(K,ut)|0,d=d+Math.imul(K,je)|0,d=d+Math.imul(w,ut)|0,g=g+Math.imul(w,je)|0,S=S+Math.imul(ee,Tt)|0,d=d+Math.imul(ee,at)|0,d=d+Math.imul(B,Tt)|0,g=g+Math.imul(B,at)|0;var Wi=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,S=Math.imul(Me,lt),d=Math.imul(Me,Je),d=d+Math.imul(_e,lt)|0,g=Math.imul(_e,Je),S=S+Math.imul(Se,It)|0,d=d+Math.imul(Se,Fe)|0,d=d+Math.imul(be,It)|0,g=g+Math.imul(be,Fe)|0,S=S+Math.imul(Te,tt)|0,d=d+Math.imul(Te,Be)|0,d=d+Math.imul(ve,tt)|0,g=g+Math.imul(ve,Be)|0,S=S+Math.imul(Ie,Ze)|0,d=d+Math.imul(Ie,Ue)|0,d=d+Math.imul(me,Ze)|0,g=g+Math.imul(me,Ue)|0,S=S+Math.imul(Qe,rt)|0,d=d+Math.imul(Qe,ze)|0,d=d+Math.imul(Pe,rt)|0,g=g+Math.imul(Pe,ze)|0,S=S+Math.imul(ye,st)|0,d=d+Math.imul(ye,Le)|0,d=d+Math.imul(we,st)|0,g=g+Math.imul(we,Le)|0,S=S+Math.imul(ne,ut)|0,d=d+Math.imul(ne,je)|0,d=d+Math.imul(ce,ut)|0,g=g+Math.imul(ce,je)|0,S=S+Math.imul(K,Tt)|0,d=d+Math.imul(K,at)|0,d=d+Math.imul(w,Tt)|0,g=g+Math.imul(w,at)|0;var Ji=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,S=Math.imul(Me,It),d=Math.imul(Me,Fe),d=d+Math.imul(_e,It)|0,g=Math.imul(_e,Fe),S=S+Math.imul(Se,tt)|0,d=d+Math.imul(Se,Be)|0,d=d+Math.imul(be,tt)|0,g=g+Math.imul(be,Be)|0,S=S+Math.imul(Te,Ze)|0,d=d+Math.imul(Te,Ue)|0,d=d+Math.imul(ve,Ze)|0,g=g+Math.imul(ve,Ue)|0,S=S+Math.imul(Ie,rt)|0,d=d+Math.imul(Ie,ze)|0,d=d+Math.imul(me,rt)|0,g=g+Math.imul(me,ze)|0,S=S+Math.imul(Qe,st)|0,d=d+Math.imul(Qe,Le)|0,d=d+Math.imul(Pe,st)|0,g=g+Math.imul(Pe,Le)|0,S=S+Math.imul(ye,ut)|0,d=d+Math.imul(ye,je)|0,d=d+Math.imul(we,ut)|0,g=g+Math.imul(we,je)|0,S=S+Math.imul(ne,Tt)|0,d=d+Math.imul(ne,at)|0,d=d+Math.imul(ce,Tt)|0,g=g+Math.imul(ce,at)|0;var ei=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(ei>>>26)|0,ei&=67108863,S=Math.imul(Me,tt),d=Math.imul(Me,Be),d=d+Math.imul(_e,tt)|0,g=Math.imul(_e,Be),S=S+Math.imul(Se,Ze)|0,d=d+Math.imul(Se,Ue)|0,d=d+Math.imul(be,Ze)|0,g=g+Math.imul(be,Ue)|0,S=S+Math.imul(Te,rt)|0,d=d+Math.imul(Te,ze)|0,d=d+Math.imul(ve,rt)|0,g=g+Math.imul(ve,ze)|0,S=S+Math.imul(Ie,st)|0,d=d+Math.imul(Ie,Le)|0,d=d+Math.imul(me,st)|0,g=g+Math.imul(me,Le)|0,S=S+Math.imul(Qe,ut)|0,d=d+Math.imul(Qe,je)|0,d=d+Math.imul(Pe,ut)|0,g=g+Math.imul(Pe,je)|0,S=S+Math.imul(ye,Tt)|0,d=d+Math.imul(ye,at)|0,d=d+Math.imul(we,Tt)|0,g=g+Math.imul(we,at)|0;var Si=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Si>>>26)|0,Si&=67108863,S=Math.imul(Me,Ze),d=Math.imul(Me,Ue),d=d+Math.imul(_e,Ze)|0,g=Math.imul(_e,Ue),S=S+Math.imul(Se,rt)|0,d=d+Math.imul(Se,ze)|0,d=d+Math.imul(be,rt)|0,g=g+Math.imul(be,ze)|0,S=S+Math.imul(Te,st)|0,d=d+Math.imul(Te,Le)|0,d=d+Math.imul(ve,st)|0,g=g+Math.imul(ve,Le)|0,S=S+Math.imul(Ie,ut)|0,d=d+Math.imul(Ie,je)|0,d=d+Math.imul(me,ut)|0,g=g+Math.imul(me,je)|0,S=S+Math.imul(Qe,Tt)|0,d=d+Math.imul(Qe,at)|0,d=d+Math.imul(Pe,Tt)|0,g=g+Math.imul(Pe,at)|0;var Ii=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,S=Math.imul(Me,rt),d=Math.imul(Me,ze),d=d+Math.imul(_e,rt)|0,g=Math.imul(_e,ze),S=S+Math.imul(Se,st)|0,d=d+Math.imul(Se,Le)|0,d=d+Math.imul(be,st)|0,g=g+Math.imul(be,Le)|0,S=S+Math.imul(Te,ut)|0,d=d+Math.imul(Te,je)|0,d=d+Math.imul(ve,ut)|0,g=g+Math.imul(ve,je)|0,S=S+Math.imul(Ie,Tt)|0,d=d+Math.imul(Ie,at)|0,d=d+Math.imul(me,Tt)|0,g=g+Math.imul(me,at)|0;var lr=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(lr>>>26)|0,lr&=67108863,S=Math.imul(Me,st),d=Math.imul(Me,Le),d=d+Math.imul(_e,st)|0,g=Math.imul(_e,Le),S=S+Math.imul(Se,ut)|0,d=d+Math.imul(Se,je)|0,d=d+Math.imul(be,ut)|0,g=g+Math.imul(be,je)|0,S=S+Math.imul(Te,Tt)|0,d=d+Math.imul(Te,at)|0,d=d+Math.imul(ve,Tt)|0,g=g+Math.imul(ve,at)|0;var Yi=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,S=Math.imul(Me,ut),d=Math.imul(Me,je),d=d+Math.imul(_e,ut)|0,g=Math.imul(_e,je),S=S+Math.imul(Se,Tt)|0,d=d+Math.imul(Se,at)|0,d=d+Math.imul(be,Tt)|0,g=g+Math.imul(be,at)|0;var Qi=(P+S|0)+((d&8191)<<13)|0;P=(g+(d>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,S=Math.imul(Me,Tt),d=Math.imul(Me,at),d=d+Math.imul(_e,Tt)|0,g=Math.imul(_e,at);var Xi=(P+S|0)+((d&8191)<<13)|0;return P=(g+(d>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,I[0]=bt,I[1]=Cr,I[2]=Rr,I[3]=Nr,I[4]=Tr,I[5]=Fr,I[6]=er,I[7]=Xr,I[8]=Gi,I[9]=Zr,I[10]=Wi,I[11]=Ji,I[12]=ei,I[13]=Si,I[14]=Ii,I[15]=lr,I[16]=Yi,I[17]=Qi,I[18]=Xi,P!==0&&(I[19]=P,l.length++),l};Math.imul||(H=C);function W($,m,c){c.negative=m.negative^$.negative,c.length=$.length+m.length;for(var l=0,b=0,x=0;x<c.length-1;x++){var I=b;b=0;for(var P=l&67108863,S=Math.min(x,m.length-1),d=Math.max(0,x-$.length+1);d<=S;d++){var g=x-d,N=$.words[g]|0,Z=m.words[d]|0,se=N*Z,M=se&67108863;I=I+(se/67108864|0)|0,M=M+P|0,P=M&67108863,I=I+(M>>>26)|0,b+=I>>>26,I&=67108863}c.words[x]=P,l=I,I=b}return l!==0?c.words[x]=l:c.length--,c.strip()}function Q($,m,c){var l=new z;return l.mulp($,m,c)}a.prototype.mulTo=function(m,c){var l,b=this.length+m.length;return this.length===10&&m.length===10?l=H(this,m,c):b<63?l=C(this,m,c):b<1024?l=W(this,m,c):l=Q(this,m,c),l};function z($,m){this.x=$,this.y=m}z.prototype.makeRBT=function(m){for(var c=new Array(m),l=a.prototype._countBits(m)-1,b=0;b<m;b++)c[b]=this.revBin(b,l,m);return c},z.prototype.revBin=function(m,c,l){if(m===0||m===l-1)return m;for(var b=0,x=0;x<c;x++)b|=(m&1)<<c-x-1,m>>=1;return b},z.prototype.permute=function(m,c,l,b,x,I){for(var P=0;P<I;P++)b[P]=c[m[P]],x[P]=l[m[P]]},z.prototype.transform=function(m,c,l,b,x,I){this.permute(I,m,c,l,b,x);for(var P=1;P<x;P<<=1)for(var S=P<<1,d=Math.cos(2*Math.PI/S),g=Math.sin(2*Math.PI/S),N=0;N<x;N+=S)for(var Z=d,se=g,M=0;M<P;M++){var ee=l[N+M],B=b[N+M],k=l[N+M+P],K=b[N+M+P],w=Z*k-se*K;K=Z*K+se*k,k=w,l[N+M]=ee+k,b[N+M]=B+K,l[N+M+P]=ee-k,b[N+M+P]=B-K,M!==S&&(w=d*Z-g*se,se=d*se+g*Z,Z=w)}},z.prototype.guessLen13b=function(m,c){var l=Math.max(c,m)|1,b=l&1,x=0;for(l=l/2|0;l;l=l>>>1)x++;return 1<<x+1+b},z.prototype.conjugate=function(m,c,l){if(!(l<=1))for(var b=0;b<l/2;b++){var x=m[b];m[b]=m[l-b-1],m[l-b-1]=x,x=c[b],c[b]=-c[l-b-1],c[l-b-1]=-x}},z.prototype.normalize13b=function(m,c){for(var l=0,b=0;b<c/2;b++){var x=Math.round(m[2*b+1]/c)*8192+Math.round(m[2*b]/c)+l;m[b]=x&67108863,x<67108864?l=0:l=x/67108864|0}return m},z.prototype.convert13b=function(m,c,l,b){for(var x=0,I=0;I<c;I++)x=x+(m[I]|0),l[2*I]=x&8191,x=x>>>13,l[2*I+1]=x&8191,x=x>>>13;for(I=2*c;I<b;++I)l[I]=0;i(x===0),i((x&-8192)===0)},z.prototype.stub=function(m){for(var c=new Array(m),l=0;l<m;l++)c[l]=0;return c},z.prototype.mulp=function(m,c,l){var b=2*this.guessLen13b(m.length,c.length),x=this.makeRBT(b),I=this.stub(b),P=new Array(b),S=new Array(b),d=new Array(b),g=new Array(b),N=new Array(b),Z=new Array(b),se=l.words;se.length=b,this.convert13b(m.words,m.length,P,b),this.convert13b(c.words,c.length,g,b),this.transform(P,I,S,d,b,x),this.transform(g,I,N,Z,b,x);for(var M=0;M<b;M++){var ee=S[M]*N[M]-d[M]*Z[M];d[M]=S[M]*Z[M]+d[M]*N[M],S[M]=ee}return this.conjugate(S,d,b),this.transform(S,d,se,I,b,x),this.conjugate(se,I,b),this.normalize13b(se,b),l.negative=m.negative^c.negative,l.length=m.length+c.length,l.strip()},a.prototype.mul=function(m){var c=new a(null);return c.words=new Array(this.length+m.length),this.mulTo(m,c)},a.prototype.mulf=function(m){var c=new a(null);return c.words=new Array(this.length+m.length),Q(this,m,c)},a.prototype.imul=function(m){return this.clone().mulTo(m,this)},a.prototype.imuln=function(m){i(typeof m=="number"),i(m<67108864);for(var c=0,l=0;l<this.length;l++){var b=(this.words[l]|0)*m,x=(b&67108863)+(c&67108863);c>>=26,c+=b/67108864|0,c+=x>>>26,this.words[l]=x&67108863}return c!==0&&(this.words[l]=c,this.length++),this},a.prototype.muln=function(m){return this.clone().imuln(m)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(m){var c=D(m);if(c.length===0)return new a(1);for(var l=this,b=0;b<c.length&&c[b]===0;b++,l=l.sqr());if(++b<c.length)for(var x=l.sqr();b<c.length;b++,x=x.sqr())c[b]!==0&&(l=l.mul(x));return l},a.prototype.iushln=function(m){i(typeof m=="number"&&m>=0);var c=m%26,l=(m-c)/26,b=67108863>>>26-c<<26-c,x;if(c!==0){var I=0;for(x=0;x<this.length;x++){var P=this.words[x]&b,S=(this.words[x]|0)-P<<c;this.words[x]=S|I,I=P>>>26-c}I&&(this.words[x]=I,this.length++)}if(l!==0){for(x=this.length-1;x>=0;x--)this.words[x+l]=this.words[x];for(x=0;x<l;x++)this.words[x]=0;this.length+=l}return this.strip()},a.prototype.ishln=function(m){return i(this.negative===0),this.iushln(m)},a.prototype.iushrn=function(m,c,l){i(typeof m=="number"&&m>=0);var b;c?b=(c-c%26)/26:b=0;var x=m%26,I=Math.min((m-x)/26,this.length),P=67108863^67108863>>>x<<x,S=l;if(b-=I,b=Math.max(0,b),S){for(var d=0;d<I;d++)S.words[d]=this.words[d];S.length=I}if(I!==0)if(this.length>I)for(this.length-=I,d=0;d<this.length;d++)this.words[d]=this.words[d+I];else this.words[0]=0,this.length=1;var g=0;for(d=this.length-1;d>=0&&(g!==0||d>=b);d--){var N=this.words[d]|0;this.words[d]=g<<26-x|N>>>x,g=N&P}return S&&g!==0&&(S.words[S.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(m,c,l){return i(this.negative===0),this.iushrn(m,c,l)},a.prototype.shln=function(m){return this.clone().ishln(m)},a.prototype.ushln=function(m){return this.clone().iushln(m)},a.prototype.shrn=function(m){return this.clone().ishrn(m)},a.prototype.ushrn=function(m){return this.clone().iushrn(m)},a.prototype.testn=function(m){i(typeof m=="number"&&m>=0);var c=m%26,l=(m-c)/26,b=1<<c;if(this.length<=l)return!1;var x=this.words[l];return!!(x&b)},a.prototype.imaskn=function(m){i(typeof m=="number"&&m>=0);var c=m%26,l=(m-c)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(c!==0&&l++,this.length=Math.min(l,this.length),c!==0){var b=67108863^67108863>>>c<<c;this.words[this.length-1]&=b}return this.strip()},a.prototype.maskn=function(m){return this.clone().imaskn(m)},a.prototype.iaddn=function(m){return i(typeof m=="number"),i(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},a.prototype._iaddn=function(m){this.words[0]+=m;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},a.prototype.isubn=function(m){if(i(typeof m=="number"),i(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},a.prototype.addn=function(m){return this.clone().iaddn(m)},a.prototype.subn=function(m){return this.clone().isubn(m)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(m,c,l){var b=m.length+l,x;this._expand(b);var I,P=0;for(x=0;x<m.length;x++){I=(this.words[x+l]|0)+P;var S=(m.words[x]|0)*c;I-=S&67108863,P=(I>>26)-(S/67108864|0),this.words[x+l]=I&67108863}for(;x<this.length-l;x++)I=(this.words[x+l]|0)+P,P=I>>26,this.words[x+l]=I&67108863;if(P===0)return this.strip();for(i(P===-1),P=0,x=0;x<this.length;x++)I=-(this.words[x]|0)+P,P=I>>26,this.words[x]=I&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(m,c){var l=this.length-m.length,b=this.clone(),x=m,I=x.words[x.length-1]|0,P=this._countBits(I);l=26-P,l!==0&&(x=x.ushln(l),b.iushln(l),I=x.words[x.length-1]|0);var S=b.length-x.length,d;if(c!=="mod"){d=new a(null),d.length=S+1,d.words=new Array(d.length);for(var g=0;g<d.length;g++)d.words[g]=0}var N=b.clone()._ishlnsubmul(x,1,S);N.negative===0&&(b=N,d&&(d.words[S]=1));for(var Z=S-1;Z>=0;Z--){var se=(b.words[x.length+Z]|0)*67108864+(b.words[x.length+Z-1]|0);for(se=Math.min(se/I|0,67108863),b._ishlnsubmul(x,se,Z);b.negative!==0;)se--,b.negative=0,b._ishlnsubmul(x,1,Z),b.isZero()||(b.negative^=1);d&&(d.words[Z]=se)}return d&&d.strip(),b.strip(),c!=="div"&&l!==0&&b.iushrn(l),{div:d||null,mod:b}},a.prototype.divmod=function(m,c,l){if(i(!m.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var b,x,I;return this.negative!==0&&m.negative===0?(I=this.neg().divmod(m,c),c!=="mod"&&(b=I.div.neg()),c!=="div"&&(x=I.mod.neg(),l&&x.negative!==0&&x.iadd(m)),{div:b,mod:x}):this.negative===0&&m.negative!==0?(I=this.divmod(m.neg(),c),c!=="mod"&&(b=I.div.neg()),{div:b,mod:I.mod}):this.negative&m.negative?(I=this.neg().divmod(m.neg(),c),c!=="div"&&(x=I.mod.neg(),l&&x.negative!==0&&x.isub(m)),{div:I.div,mod:x}):m.length>this.length||this.cmp(m)<0?{div:new a(0),mod:this}:m.length===1?c==="div"?{div:this.divn(m.words[0]),mod:null}:c==="mod"?{div:null,mod:new a(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new a(this.modn(m.words[0]))}:this._wordDiv(m,c)},a.prototype.div=function(m){return this.divmod(m,"div",!1).div},a.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},a.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},a.prototype.divRound=function(m){var c=this.divmod(m);if(c.mod.isZero())return c.div;var l=c.div.negative!==0?c.mod.isub(m):c.mod,b=m.ushrn(1),x=m.andln(1),I=l.cmp(b);return I<0||x===1&&I===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},a.prototype.modn=function(m){i(m<=67108863);for(var c=(1<<26)%m,l=0,b=this.length-1;b>=0;b--)l=(c*l+(this.words[b]|0))%m;return l},a.prototype.idivn=function(m){i(m<=67108863);for(var c=0,l=this.length-1;l>=0;l--){var b=(this.words[l]|0)+c*67108864;this.words[l]=b/m|0,c=b%m}return this.strip()},a.prototype.divn=function(m){return this.clone().idivn(m)},a.prototype.egcd=function(m){i(m.negative===0),i(!m.isZero());var c=this,l=m.clone();c.negative!==0?c=c.umod(m):c=c.clone();for(var b=new a(1),x=new a(0),I=new a(0),P=new a(1),S=0;c.isEven()&&l.isEven();)c.iushrn(1),l.iushrn(1),++S;for(var d=l.clone(),g=c.clone();!c.isZero();){for(var N=0,Z=1;!(c.words[0]&Z)&&N<26;++N,Z<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(b.isOdd()||x.isOdd())&&(b.iadd(d),x.isub(g)),b.iushrn(1),x.iushrn(1);for(var se=0,M=1;!(l.words[0]&M)&&se<26;++se,M<<=1);if(se>0)for(l.iushrn(se);se-- >0;)(I.isOdd()||P.isOdd())&&(I.iadd(d),P.isub(g)),I.iushrn(1),P.iushrn(1);c.cmp(l)>=0?(c.isub(l),b.isub(I),x.isub(P)):(l.isub(c),I.isub(b),P.isub(x))}return{a:I,b:P,gcd:l.iushln(S)}},a.prototype._invmp=function(m){i(m.negative===0),i(!m.isZero());var c=this,l=m.clone();c.negative!==0?c=c.umod(m):c=c.clone();for(var b=new a(1),x=new a(0),I=l.clone();c.cmpn(1)>0&&l.cmpn(1)>0;){for(var P=0,S=1;!(c.words[0]&S)&&P<26;++P,S<<=1);if(P>0)for(c.iushrn(P);P-- >0;)b.isOdd()&&b.iadd(I),b.iushrn(1);for(var d=0,g=1;!(l.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(l.iushrn(d);d-- >0;)x.isOdd()&&x.iadd(I),x.iushrn(1);c.cmp(l)>=0?(c.isub(l),b.isub(x)):(l.isub(c),x.isub(b))}var N;return c.cmpn(1)===0?N=b:N=x,N.cmpn(0)<0&&N.iadd(m),N},a.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var c=this.clone(),l=m.clone();c.negative=0,l.negative=0;for(var b=0;c.isEven()&&l.isEven();b++)c.iushrn(1),l.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;l.isEven();)l.iushrn(1);var x=c.cmp(l);if(x<0){var I=c;c=l,l=I}else if(x===0||l.cmpn(1)===0)break;c.isub(l)}while(!0);return l.iushln(b)},a.prototype.invm=function(m){return this.egcd(m).a.umod(m)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(m){return this.words[0]&m},a.prototype.bincn=function(m){i(typeof m=="number");var c=m%26,l=(m-c)/26,b=1<<c;if(this.length<=l)return this._expand(l+1),this.words[l]|=b,this;for(var x=b,I=l;x!==0&&I<this.length;I++){var P=this.words[I]|0;P+=x,x=P>>>26,P&=67108863,this.words[I]=P}return x!==0&&(this.words[I]=x,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(m){var c=m<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var l;if(this.length>1)l=1;else{c&&(m=-m),i(m<=67108863,"Number is too big");var b=this.words[0]|0;l=b===m?0:b<m?-1:1}return this.negative!==0?-l|0:l},a.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var c=this.ucmp(m);return this.negative!==0?-c|0:c},a.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var c=0,l=this.length-1;l>=0;l--){var b=this.words[l]|0,x=m.words[l]|0;if(b!==x){b<x?c=-1:b>x&&(c=1);break}}return c},a.prototype.gtn=function(m){return this.cmpn(m)===1},a.prototype.gt=function(m){return this.cmp(m)===1},a.prototype.gten=function(m){return this.cmpn(m)>=0},a.prototype.gte=function(m){return this.cmp(m)>=0},a.prototype.ltn=function(m){return this.cmpn(m)===-1},a.prototype.lt=function(m){return this.cmp(m)===-1},a.prototype.lten=function(m){return this.cmpn(m)<=0},a.prototype.lte=function(m){return this.cmp(m)<=0},a.prototype.eqn=function(m){return this.cmpn(m)===0},a.prototype.eq=function(m){return this.cmp(m)===0},a.red=function(m){return new ae(m)},a.prototype.toRed=function(m){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(m){return this.red=m,this},a.prototype.forceRed=function(m){return i(!this.red,"Already a number in reduction context"),this._forceRed(m)},a.prototype.redAdd=function(m){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},a.prototype.redIAdd=function(m){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},a.prototype.redSub=function(m){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},a.prototype.redISub=function(m){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},a.prototype.redShl=function(m){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},a.prototype.redMul=function(m){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},a.prototype.redIMul=function(m){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(m){return i(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var Y={k256:null,p224:null,p192:null,p25519:null};function q($,m){this.name=$,this.p=new a(m,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var m=new a(null);return m.words=new Array(Math.ceil(this.n/13)),m},q.prototype.ireduce=function(m){var c=m,l;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),l=c.bitLength();while(l>this.n);var b=l<this.n?-1:c.ucmp(this.p);return b===0?(c.words[0]=0,c.length=1):b>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},q.prototype.split=function(m,c){m.iushrn(this.n,0,c)},q.prototype.imulK=function(m){return m.imul(this.k)};function j(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(j,q),j.prototype.split=function(m,c){for(var l=4194303,b=Math.min(m.length,9),x=0;x<b;x++)c.words[x]=m.words[x];if(c.length=b,m.length<=9){m.words[0]=0,m.length=1;return}var I=m.words[9];for(c.words[c.length++]=I&l,x=10;x<m.length;x++){var P=m.words[x]|0;m.words[x-10]=(P&l)<<4|I>>>22,I=P}I>>>=22,m.words[x-10]=I,I===0&&m.length>10?m.length-=10:m.length-=9},j.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var c=0,l=0;l<m.length;l++){var b=m.words[l]|0;c+=b*977,m.words[l]=c&67108863,c=b*64+(c/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function V(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(V,q);function A(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(A,q);function F(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,q),F.prototype.imulK=function(m){for(var c=0,l=0;l<m.length;l++){var b=(m.words[l]|0)*19+c,x=b&67108863;b>>>=26,m.words[l]=x,c=b}return c!==0&&(m.words[m.length++]=c),m},a._prime=function(m){if(Y[m])return Y[m];var c;if(m==="k256")c=new j;else if(m==="p224")c=new V;else if(m==="p192")c=new A;else if(m==="p25519")c=new F;else throw new Error("Unknown prime "+m);return Y[m]=c,c};function ae($){if(typeof $=="string"){var m=a._prime($);this.m=m.p,this.prime=m}else i($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}ae.prototype._verify1=function(m){i(m.negative===0,"red works only with positives"),i(m.red,"red works only with red numbers")},ae.prototype._verify2=function(m,c){i((m.negative|c.negative)===0,"red works only with positives"),i(m.red&&m.red===c.red,"red works only with red numbers")},ae.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):m.umod(this.m)._forceRed(this)},ae.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},ae.prototype.add=function(m,c){this._verify2(m,c);var l=m.add(c);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},ae.prototype.iadd=function(m,c){this._verify2(m,c);var l=m.iadd(c);return l.cmp(this.m)>=0&&l.isub(this.m),l},ae.prototype.sub=function(m,c){this._verify2(m,c);var l=m.sub(c);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},ae.prototype.isub=function(m,c){this._verify2(m,c);var l=m.isub(c);return l.cmpn(0)<0&&l.iadd(this.m),l},ae.prototype.shl=function(m,c){return this._verify1(m),this.imod(m.ushln(c))},ae.prototype.imul=function(m,c){return this._verify2(m,c),this.imod(m.imul(c))},ae.prototype.mul=function(m,c){return this._verify2(m,c),this.imod(m.mul(c))},ae.prototype.isqr=function(m){return this.imul(m,m.clone())},ae.prototype.sqr=function(m){return this.mul(m,m)},ae.prototype.sqrt=function(m){if(m.isZero())return m.clone();var c=this.m.andln(3);if(i(c%2===1),c===3){var l=this.m.add(new a(1)).iushrn(2);return this.pow(m,l)}for(var b=this.m.subn(1),x=0;!b.isZero()&&b.andln(1)===0;)x++,b.iushrn(1);i(!b.isZero());var I=new a(1).toRed(this),P=I.redNeg(),S=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,S).cmp(P)!==0;)d.redIAdd(P);for(var g=this.pow(d,b),N=this.pow(m,b.addn(1).iushrn(1)),Z=this.pow(m,b),se=x;Z.cmp(I)!==0;){for(var M=Z,ee=0;M.cmp(I)!==0;ee++)M=M.redSqr();i(ee<se);var B=this.pow(g,new a(1).iushln(se-ee-1));N=N.redMul(B),g=B.redSqr(),Z=Z.redMul(g),se=ee}return N},ae.prototype.invm=function(m){var c=m._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},ae.prototype.pow=function(m,c){if(c.isZero())return new a(1).toRed(this);if(c.cmpn(1)===0)return m.clone();var l=4,b=new Array(1<<l);b[0]=new a(1).toRed(this),b[1]=m;for(var x=2;x<b.length;x++)b[x]=this.mul(b[x-1],m);var I=b[0],P=0,S=0,d=c.bitLength()%26;for(d===0&&(d=26),x=c.length-1;x>=0;x--){for(var g=c.words[x],N=d-1;N>=0;N--){var Z=g>>N&1;if(I!==b[0]&&(I=this.sqr(I)),Z===0&&P===0){S=0;continue}P<<=1,P|=Z,S++,!(S!==l&&(x!==0||N!==0))&&(I=this.mul(I,b[P]),S=0,P=0)}d=26}return I},ae.prototype.convertTo=function(m){var c=m.umod(this.m);return c===m?c.clone():c},ae.prototype.convertFrom=function(m){var c=m.clone();return c.red=null,c},a.mont=function(m){return new de(m)};function de($){ae.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(de,ae),de.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},de.prototype.convertFrom=function(m){var c=this.imod(m.mul(this.rinv));return c.red=null,c},de.prototype.imul=function(m,c){if(m.isZero()||c.isZero())return m.words[0]=0,m.length=1,m;var l=m.imul(c),b=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=l.isub(b).iushrn(this.shift),I=x;return x.cmp(this.m)>=0?I=x.isub(this.m):x.cmpn(0)<0&&(I=x.iadd(this.m)),I._forceRed(this)},de.prototype.mul=function(m,c){if(m.isZero()||c.isZero())return new a(0)._forceRed(this);var l=m.mul(c),b=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=l.isub(b).iushrn(this.shift),I=x;return x.cmp(this.m)>=0?I=x.isub(this.m):x.cmpn(0)<0&&(I=x.iadd(this.m)),I._forceRed(this)},de.prototype.invm=function(m){var c=this.imod(m._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(r,ln)})(U0);var ys=U0.exports,wa=_b;function _b(r,e){if(!r)throw new Error(e||"Assertion failed")}_b.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)};var z0={};(function(r){var e=r;function t(a,f){if(Array.isArray(a))return a.slice();if(!a)return[];var u=[];if(typeof a!="string"){for(var v=0;v<a.length;v++)u[v]=a[v]|0;return u}if(f==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var v=0;v<a.length;v+=2)u.push(parseInt(a[v]+a[v+1],16))}else for(var v=0;v<a.length;v++){var p=a.charCodeAt(v),y=p>>8,_=p&255;y?u.push(y,_):u.push(_)}return u}e.toArray=t;function i(a){return a.length===1?"0"+a:a}e.zero2=i;function n(a){for(var f="",u=0;u<a.length;u++)f+=i(a[u].toString(16));return f}e.toHex=n,e.encode=function(f,u){return u==="hex"?n(f):f}})(z0);(function(r){var e=r,t=ys,i=wa,n=z0;e.assert=i,e.toArray=n.toArray,e.zero2=n.zero2,e.toHex=n.toHex,e.encode=n.encode;function a(y,_,O){var D=new Array(Math.max(y.bitLength(),O)+1),C;for(C=0;C<D.length;C+=1)D[C]=0;var H=1<<_+1,W=y.clone();for(C=0;C<D.length;C++){var Q,z=W.andln(H-1);W.isOdd()?(z>(H>>1)-1?Q=(H>>1)-z:Q=z,W.isubn(Q)):Q=0,D[C]=Q,W.iushrn(1)}return D}e.getNAF=a;function f(y,_){var O=[[],[]];y=y.clone(),_=_.clone();for(var D=0,C=0,H;y.cmpn(-D)>0||_.cmpn(-C)>0;){var W=y.andln(3)+D&3,Q=_.andln(3)+C&3;W===3&&(W=-1),Q===3&&(Q=-1);var z;W&1?(H=y.andln(7)+D&7,(H===3||H===5)&&Q===2?z=-W:z=W):z=0,O[0].push(z);var Y;Q&1?(H=_.andln(7)+C&7,(H===3||H===5)&&W===2?Y=-Q:Y=Q):Y=0,O[1].push(Y),2*D===z+1&&(D=1-D),2*C===Y+1&&(C=1-C),y.iushrn(1),_.iushrn(1)}return O}e.getJSF=f;function u(y,_,O){var D="_"+_;y.prototype[_]=function(){return this[D]!==void 0?this[D]:this[D]=O.call(this)}}e.cachedProperty=u;function v(y){return typeof y=="string"?e.toArray(y,"hex"):y}e.parseBytes=v;function p(y){return new t(y,"hex","le")}e.intFromLE=p})(xi);var j0={exports:{}},bl;j0.exports=function(e){return bl||(bl=new Bs(null)),bl.generate(e)};function Bs(r){this.rand=r}j0.exports.Rand=Bs;Bs.prototype.generate=function(e){return this._rand(e)};Bs.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Bs.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Bs.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Bs.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var B1=T0;if(typeof B1.randomBytes!="function")throw new Error("Not supported");Bs.prototype._rand=function(e){return B1.randomBytes(e)}}catch{}var Ab=j0.exports,k0={},sa=ys,Dc=xi,du=Dc.getNAF,m9=Dc.getJSF,pu=Dc.assert;function js(r,e){this.type=r,this.p=new sa(e.p,16),this.red=e.prime?sa.red(e.prime):sa.mont(this.p),this.zero=new sa(0).toRed(this.red),this.one=new sa(1).toRed(this.red),this.two=new sa(2).toRed(this.red),this.n=e.n&&new sa(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Lu=js;js.prototype.point=function(){throw new Error("Not implemented")};js.prototype.validate=function(){throw new Error("Not implemented")};js.prototype._fixedNafMul=function(e,t){pu(e.precomputed);var i=e._getDoubles(),n=du(t,1,this._bitLength),a=(1<<i.step+1)-(i.step%2===0?2:1);a/=3;var f=[],u,v;for(u=0;u<n.length;u+=i.step){v=0;for(var p=u+i.step-1;p>=u;p--)v=(v<<1)+n[p];f.push(v)}for(var y=this.jpoint(null,null,null),_=this.jpoint(null,null,null),O=a;O>0;O--){for(u=0;u<f.length;u++)v=f[u],v===O?_=_.mixedAdd(i.points[u]):v===-O&&(_=_.mixedAdd(i.points[u].neg()));y=y.add(_)}return y.toP()};js.prototype._wnafMul=function(e,t){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var a=n.points,f=du(t,i,this._bitLength),u=this.jpoint(null,null,null),v=f.length-1;v>=0;v--){for(var p=0;v>=0&&f[v]===0;v--)p++;if(v>=0&&p++,u=u.dblp(p),v<0)break;var y=f[v];pu(y!==0),e.type==="affine"?y>0?u=u.mixedAdd(a[y-1>>1]):u=u.mixedAdd(a[-y-1>>1].neg()):y>0?u=u.add(a[y-1>>1]):u=u.add(a[-y-1>>1].neg())}return e.type==="affine"?u.toP():u};js.prototype._wnafMulAdd=function(e,t,i,n,a){var f=this._wnafT1,u=this._wnafT2,v=this._wnafT3,p=0,y,_,O;for(y=0;y<n;y++){O=t[y];var D=O._getNAFPoints(e);f[y]=D.wnd,u[y]=D.points}for(y=n-1;y>=1;y-=2){var C=y-1,H=y;if(f[C]!==1||f[H]!==1){v[C]=du(i[C],f[C],this._bitLength),v[H]=du(i[H],f[H],this._bitLength),p=Math.max(v[C].length,p),p=Math.max(v[H].length,p);continue}var W=[t[C],null,null,t[H]];t[C].y.cmp(t[H].y)===0?(W[1]=t[C].add(t[H]),W[2]=t[C].toJ().mixedAdd(t[H].neg())):t[C].y.cmp(t[H].y.redNeg())===0?(W[1]=t[C].toJ().mixedAdd(t[H]),W[2]=t[C].add(t[H].neg())):(W[1]=t[C].toJ().mixedAdd(t[H]),W[2]=t[C].toJ().mixedAdd(t[H].neg()));var Q=[-3,-1,-5,-7,0,7,5,1,3],z=m9(i[C],i[H]);for(p=Math.max(z[0].length,p),v[C]=new Array(p),v[H]=new Array(p),_=0;_<p;_++){var Y=z[0][_]|0,q=z[1][_]|0;v[C][_]=Q[(Y+1)*3+(q+1)],v[H][_]=0,u[C]=W}}var j=this.jpoint(null,null,null),V=this._wnafT4;for(y=p;y>=0;y--){for(var A=0;y>=0;){var F=!0;for(_=0;_<n;_++)V[_]=v[_][y]|0,V[_]!==0&&(F=!1);if(!F)break;A++,y--}if(y>=0&&A++,j=j.dblp(A),y<0)break;for(_=0;_<n;_++){var ae=V[_];ae!==0&&(ae>0?O=u[_][ae-1>>1]:ae<0&&(O=u[_][-ae-1>>1].neg()),O.type==="affine"?j=j.mixedAdd(O):j=j.add(O))}}for(y=0;y<n;y++)u[y]=null;return a?j:j.toP()};function Ki(r,e){this.curve=r,this.type=e,this.precomputed=null}js.BasePoint=Ki;Ki.prototype.eq=function(){throw new Error("Not implemented")};Ki.prototype.validate=function(){return this.curve.validate(this)};js.prototype.decodePoint=function(e,t){e=Dc.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?pu(e[e.length-1]%2===0):e[0]===7&&pu(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Ki.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ki.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};Ki.prototype.encode=function(e,t){return Dc.encode(this._encode(t),e)};Ki.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Ki.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Ki.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,a=0;a<t;a+=e){for(var f=0;f<e;f++)n=n.dbl();i.push(n)}return{step:e,points:i}};Ki.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),a=1;a<i;a++)t[a]=t[a-1].add(n);return{wnd:e,points:t}};Ki.prototype._getBeta=function(){return null};Ki.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var y9=xi,nr=ys,H0=Pu,uo=Lu,w9=y9.assert;function Vi(r){uo.call(this,"short",r),this.a=new nr(r.a,16).toRed(this.red),this.b=new nr(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}H0(Vi,uo);var _9=Vi;Vi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new nr(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=n[0].cmp(n[1])<0?n[0]:n[1],t=t.toRed(this.red)}if(e.lambda)i=new nr(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))===0?i=a[0]:(i=a[1],w9(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var f;return e.basis?f=e.basis.map(function(u){return{a:new nr(u.a,16),b:new nr(u.b,16)}}):f=this._getEndoBasis(i),{beta:t,lambda:i,basis:f}}};Vi.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:nr.mont(e),i=new nr(2).toRed(t).redInvm(),n=i.redNeg(),a=new nr(3).toRed(t).redNeg().redSqrt().redMul(i),f=n.redAdd(a).fromRed(),u=n.redSub(a).fromRed();return[f,u]};Vi.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),a=new nr(1),f=new nr(0),u=new nr(0),v=new nr(1),p,y,_,O,D,C,H,W=0,Q,z;i.cmpn(0)!==0;){var Y=n.div(i);Q=n.sub(Y.mul(i)),z=u.sub(Y.mul(a));var q=v.sub(Y.mul(f));if(!_&&Q.cmp(t)<0)p=H.neg(),y=a,_=Q.neg(),O=z;else if(_&&++W===2)break;H=Q,n=i,i=Q,u=a,a=z,v=f,f=q}D=Q.neg(),C=z;var j=_.sqr().add(O.sqr()),V=D.sqr().add(C.sqr());return V.cmp(j)>=0&&(D=p,C=y),_.negative&&(_=_.neg(),O=O.neg()),D.negative&&(D=D.neg(),C=C.neg()),[{a:_,b:O},{a:D,b:C}]};Vi.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],n=t[1],a=n.b.mul(e).divRound(this.n),f=i.b.neg().mul(e).divRound(this.n),u=a.mul(i.a),v=f.mul(n.a),p=a.mul(i.b),y=f.mul(n.b),_=e.sub(u).sub(v),O=p.add(y).neg();return{k1:_,k2:O}};Vi.prototype.pointFromX=function(e,t){e=new nr(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var a=n.fromRed().isOdd();return(t&&!a||!t&&a)&&(n=n.redNeg()),this.point(e,n)};Vi.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,n=this.a.redMul(t),a=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(a).cmpn(0)===0};Vi.prototype._endoWnafMulAdd=function(e,t,i){for(var n=this._endoWnafT1,a=this._endoWnafT2,f=0;f<e.length;f++){var u=this._endoSplit(t[f]),v=e[f],p=v._getBeta();u.k1.negative&&(u.k1.ineg(),v=v.neg(!0)),u.k2.negative&&(u.k2.ineg(),p=p.neg(!0)),n[f*2]=v,n[f*2+1]=p,a[f*2]=u.k1,a[f*2+1]=u.k2}for(var y=this._wnafMulAdd(1,n,a,f*2,i),_=0;_<f*2;_++)n[_]=null,a[_]=null;return y};function xr(r,e,t,i){uo.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new nr(e,16),this.y=new nr(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}H0(xr,uo.BasePoint);Vi.prototype.point=function(e,t,i){return new xr(this,e,t,i)};Vi.prototype.pointFromJSON=function(e,t){return xr.fromJSON(this,e,t)};xr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(a){return i.point(a.x.redMul(i.endo.beta),a.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}};xr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};xr.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var n=e.point(t[0],t[1],i);if(!t[2])return n;function a(u){return e.point(u[0],u[1],i)}var f=t[2];return n.precomputed={beta:null,doubles:f.doubles&&{step:f.doubles.step,points:[n].concat(f.doubles.points.map(a))},naf:f.naf&&{wnd:f.naf.wnd,points:[n].concat(f.naf.points.map(a))}},n};xr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};xr.prototype.isInfinity=function(){return this.inf};xr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};xr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),a=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(n),f=a.redSqr().redISub(this.x.redAdd(this.x)),u=a.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,u)};xr.prototype.getX=function(){return this.x.fromRed()};xr.prototype.getY=function(){return this.y.fromRed()};xr.prototype.mul=function(e){return e=new nr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};xr.prototype.mulAdd=function(e,t,i){var n=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,a):this.curve._wnafMulAdd(1,n,a,2)};xr.prototype.jmulAdd=function(e,t,i){var n=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,a,!0):this.curve._wnafMulAdd(1,n,a,2,!0)};xr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};xr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(a){return a.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return t};xr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Pr(r,e,t,i){uo.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new nr(0)):(this.x=new nr(e,16),this.y=new nr(t,16),this.z=new nr(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}H0(Pr,uo.BasePoint);Vi.prototype.jpoint=function(e,t,i){return new Pr(this,e,t,i)};Pr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(i,n)};Pr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Pr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(t),a=e.x.redMul(i),f=this.y.redMul(t.redMul(e.z)),u=e.y.redMul(i.redMul(this.z)),v=n.redSub(a),p=f.redSub(u);if(v.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=v.redSqr(),_=y.redMul(v),O=n.redMul(y),D=p.redSqr().redIAdd(_).redISub(O).redISub(O),C=p.redMul(O.redISub(D)).redISub(f.redMul(_)),H=this.z.redMul(e.z).redMul(v);return this.curve.jpoint(D,C,H)};Pr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,n=e.x.redMul(t),a=this.y,f=e.y.redMul(t).redMul(this.z),u=i.redSub(n),v=a.redSub(f);if(u.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=u.redSqr(),y=p.redMul(u),_=i.redMul(p),O=v.redSqr().redIAdd(y).redISub(_).redISub(_),D=v.redMul(_.redISub(O)).redISub(a.redMul(y)),C=this.z.redMul(u);return this.curve.jpoint(O,D,C)};Pr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var n=this.curve.a,a=this.curve.tinv,f=this.x,u=this.y,v=this.z,p=v.redSqr().redSqr(),y=u.redAdd(u);for(t=0;t<e;t++){var _=f.redSqr(),O=y.redSqr(),D=O.redSqr(),C=_.redAdd(_).redIAdd(_).redIAdd(n.redMul(p)),H=f.redMul(O),W=C.redSqr().redISub(H.redAdd(H)),Q=H.redISub(W),z=C.redMul(Q);z=z.redIAdd(z).redISub(D);var Y=y.redMul(v);t+1<e&&(p=p.redMul(D)),f=W,v=Y,y=z}return this.curve.jpoint(f,y.redMul(a),v)};Pr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Pr.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),f=a.redSqr(),u=this.x.redAdd(a).redSqr().redISub(n).redISub(f);u=u.redIAdd(u);var v=n.redAdd(n).redIAdd(n),p=v.redSqr().redISub(u).redISub(u),y=f.redIAdd(f);y=y.redIAdd(y),y=y.redIAdd(y),e=p,t=v.redMul(u.redISub(p)).redISub(y),i=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),O=this.y.redSqr(),D=O.redSqr(),C=this.x.redAdd(O).redSqr().redISub(_).redISub(D);C=C.redIAdd(C);var H=_.redAdd(_).redIAdd(_),W=H.redSqr(),Q=D.redIAdd(D);Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),e=W.redISub(C).redISub(C),t=H.redMul(C.redISub(e)).redISub(Q),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)};Pr.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),f=a.redSqr(),u=this.x.redAdd(a).redSqr().redISub(n).redISub(f);u=u.redIAdd(u);var v=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),p=v.redSqr().redISub(u).redISub(u);e=p;var y=f.redIAdd(f);y=y.redIAdd(y),y=y.redIAdd(y),t=v.redMul(u.redISub(p)).redISub(y),i=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),O=this.y.redSqr(),D=this.x.redMul(O),C=this.x.redSub(_).redMul(this.x.redAdd(_));C=C.redAdd(C).redIAdd(C);var H=D.redIAdd(D);H=H.redIAdd(H);var W=H.redAdd(H);e=C.redSqr().redISub(W),i=this.y.redAdd(this.z).redSqr().redISub(O).redISub(_);var Q=O.redSqr();Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),t=C.redMul(H.redISub(e)).redISub(Q)}return this.curve.jpoint(e,t,i)};Pr.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,n=this.z,a=n.redSqr().redSqr(),f=t.redSqr(),u=i.redSqr(),v=f.redAdd(f).redIAdd(f).redIAdd(e.redMul(a)),p=t.redAdd(t);p=p.redIAdd(p);var y=p.redMul(u),_=v.redSqr().redISub(y.redAdd(y)),O=y.redISub(_),D=u.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var C=v.redMul(O).redISub(D),H=i.redAdd(i).redMul(n);return this.curve.jpoint(_,C,H)};Pr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),n=t.redSqr(),a=e.redAdd(e).redIAdd(e),f=a.redSqr(),u=this.x.redAdd(t).redSqr().redISub(e).redISub(n);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(f);var v=u.redSqr(),p=n.redIAdd(n);p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var y=a.redIAdd(u).redSqr().redISub(f).redISub(v).redISub(p),_=t.redMul(y);_=_.redIAdd(_),_=_.redIAdd(_);var O=this.x.redMul(v).redISub(_);O=O.redIAdd(O),O=O.redIAdd(O);var D=this.y.redMul(y.redMul(p.redISub(y)).redISub(u.redMul(v)));D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var C=this.z.redAdd(u).redSqr().redISub(i).redISub(v);return this.curve.jpoint(O,D,C)};Pr.prototype.mul=function(e,t){return e=new nr(e,t),this.curve._wnafMul(this,e)};Pr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var n=t.redMul(this.z),a=i.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(n)).cmpn(0)===0};Pr.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),a=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(a),this.x.cmp(i)===0)return!0}};Pr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Pr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Za=ys,Eb=Pu,qu=Lu,A9=xi;function ho(r){qu.call(this,"mont",r),this.a=new Za(r.a,16).toRed(this.red),this.b=new Za(r.b,16).toRed(this.red),this.i4=new Za(4).toRed(this.red).redInvm(),this.two=new Za(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Eb(ho,qu);var E9=ho;ho.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),n=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t),a=n.redSqrt();return a.redSqr().cmp(n)===0};function Er(r,e,t){qu.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Za(e,16),this.z=new Za(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Eb(Er,qu.BasePoint);ho.prototype.decodePoint=function(e,t){return this.point(A9.toArray(e,t),1)};ho.prototype.point=function(e,t){return new Er(this,e,t)};ho.prototype.pointFromJSON=function(e){return Er.fromJSON(this,e)};Er.prototype.precompute=function(){};Er.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Er.fromJSON=function(e,t){return new Er(e,t[0],t[1]||e.one)};Er.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Er.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Er.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),a=t.redSub(n),f=t.redMul(n),u=a.redMul(n.redAdd(this.curve.a24.redMul(a)));return this.curve.point(f,u)};Er.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Er.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),a=e.x.redAdd(e.z),f=e.x.redSub(e.z),u=f.redMul(i),v=a.redMul(n),p=t.z.redMul(u.redAdd(v).redSqr()),y=t.x.redMul(u.redISub(v).redSqr());return this.curve.point(p,y)};Er.prototype.mul=function(e){for(var t=e.clone(),i=this,n=this.curve.point(null,null),a=this,f=[];t.cmpn(0)!==0;t.iushrn(1))f.push(t.andln(1));for(var u=f.length-1;u>=0;u--)f[u]===0?(i=i.diffAdd(n,a),n=n.dbl()):(n=i.diffAdd(n,a),i=i.dbl());return n};Er.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Er.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Er.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Er.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Er.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var x9=xi,ps=ys,xb=Pu,$u=Lu,S9=x9.assert;function Vn(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,$u.call(this,"edwards",r),this.a=new ps(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ps(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ps(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),S9(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}xb(Vn,$u);var I9=Vn;Vn.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Vn.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Vn.prototype.jpoint=function(e,t,i,n){return this.point(e,t,i,n)};Vn.prototype.pointFromX=function(e,t){e=new ps(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),a=this.one.redSub(this.c2.redMul(this.d).redMul(i)),f=n.redMul(a.redInvm()),u=f.redSqrt();if(u.redSqr().redSub(f).cmp(this.zero)!==0)throw new Error("invalid point");var v=u.fromRed().isOdd();return(t&&!v||!t&&v)&&(u=u.redNeg()),this.point(e,u)};Vn.prototype.pointFromY=function(e,t){e=new ps(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),a=i.redMul(this.d).redMul(this.c2).redSub(this.a),f=n.redMul(a.redInvm());if(f.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var u=f.redSqrt();if(u.redSqr().redSub(f).cmp(this.zero)!==0)throw new Error("invalid point");return u.fromRed().isOdd()!==t&&(u=u.redNeg()),this.point(u,e)};Vn.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),n=t.redMul(this.a).redAdd(i),a=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return n.cmp(a)===0};function Wt(r,e,t,i,n){$u.BasePoint.call(this,r,"projective"),e===null&&t===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ps(e,16),this.y=new ps(t,16),this.z=i?new ps(i,16):this.curve.one,this.t=n&&new ps(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}xb(Wt,$u.BasePoint);Vn.prototype.pointFromJSON=function(e){return Wt.fromJSON(this,e)};Vn.prototype.point=function(e,t,i,n){return new Wt(this,e,t,i,n)};Wt.fromJSON=function(e,t){return new Wt(e,t[0],t[1],t[2])};Wt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Wt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Wt.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),f=n.redAdd(t),u=f.redSub(i),v=n.redSub(t),p=a.redMul(u),y=f.redMul(v),_=a.redMul(v),O=u.redMul(f);return this.curve.point(p,y,O,_)};Wt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),i=this.y.redSqr(),n,a,f,u,v,p;if(this.curve.twisted){u=this.curve._mulA(t);var y=u.redAdd(i);this.zOne?(n=e.redSub(t).redSub(i).redMul(y.redSub(this.curve.two)),a=y.redMul(u.redSub(i)),f=y.redSqr().redSub(y).redSub(y)):(v=this.z.redSqr(),p=y.redSub(v).redISub(v),n=e.redSub(t).redISub(i).redMul(p),a=y.redMul(u.redSub(i)),f=y.redMul(p))}else u=t.redAdd(i),v=this.curve._mulC(this.z).redSqr(),p=u.redSub(v).redSub(v),n=this.curve._mulC(e.redISub(u)).redMul(p),a=this.curve._mulC(u).redMul(t.redISub(i)),f=u.redMul(p);return this.curve.point(n,a,f)};Wt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Wt.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),f=i.redSub(t),u=a.redSub(n),v=a.redAdd(n),p=i.redAdd(t),y=f.redMul(u),_=v.redMul(p),O=f.redMul(p),D=u.redMul(v);return this.curve.point(y,_,D,O)};Wt.prototype._projAdd=function(e){var t=this.z.redMul(e.z),i=t.redSqr(),n=this.x.redMul(e.x),a=this.y.redMul(e.y),f=this.curve.d.redMul(n).redMul(a),u=i.redSub(f),v=i.redAdd(f),p=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(a),y=t.redMul(u).redMul(p),_,O;return this.curve.twisted?(_=t.redMul(v).redMul(a.redSub(this.curve._mulA(n))),O=u.redMul(v)):(_=t.redMul(v).redMul(a.redSub(n)),O=this.curve._mulC(u).redMul(v)),this.curve.point(y,_,O)};Wt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Wt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Wt.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)};Wt.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)};Wt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Wt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Wt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Wt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Wt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Wt.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),this.x.cmp(t)===0)return!0}};Wt.prototype.toP=Wt.prototype.normalize;Wt.prototype.mixedAdd=Wt.prototype.add;(function(r){var e=r;e.base=Lu,e.short=_9,e.mont=E9,e.edwards=I9})(k0);var Uu={},zu={},Pt={},M9=wa,D9=Pu;Pt.inherits=D9;function P9(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function O9(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var i=0,n=0;n<r.length;n++){var a=r.charCodeAt(n);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):P9(r,n)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++n)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(n=0;n<r.length;n++)t[n]=r[n]|0;return t}Pt.toArray=O9;function C9(r){for(var e="",t=0;t<r.length;t++)e+=Ib(r[t].toString(16));return e}Pt.toHex=C9;function Sb(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Pt.htonl=Sb;function R9(r,e){for(var t="",i=0;i<r.length;i++){var n=r[i];e==="little"&&(n=Sb(n)),t+=Mb(n.toString(16))}return t}Pt.toHex32=R9;function Ib(r){return r.length===1?"0"+r:r}Pt.zero2=Ib;function Mb(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Pt.zero8=Mb;function N9(r,e,t,i){var n=t-e;M9(n%4===0);for(var a=new Array(n/4),f=0,u=e;f<a.length;f++,u+=4){var v;i==="big"?v=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:v=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],a[f]=v>>>0}return a}Pt.join32=N9;function T9(r,e){for(var t=new Array(r.length*4),i=0,n=0;i<r.length;i++,n+=4){var a=r[i];e==="big"?(t[n]=a>>>24,t[n+1]=a>>>16&255,t[n+2]=a>>>8&255,t[n+3]=a&255):(t[n+3]=a>>>24,t[n+2]=a>>>16&255,t[n+1]=a>>>8&255,t[n]=a&255)}return t}Pt.split32=T9;function F9(r,e){return r>>>e|r<<32-e}Pt.rotr32=F9;function B9(r,e){return r<<e|r>>>32-e}Pt.rotl32=B9;function L9(r,e){return r+e>>>0}Pt.sum32=L9;function q9(r,e,t){return r+e+t>>>0}Pt.sum32_3=q9;function $9(r,e,t,i){return r+e+t+i>>>0}Pt.sum32_4=$9;function U9(r,e,t,i,n){return r+e+t+i+n>>>0}Pt.sum32_5=U9;function z9(r,e,t,i){var n=r[e],a=r[e+1],f=i+a>>>0,u=(f<i?1:0)+t+n;r[e]=u>>>0,r[e+1]=f}Pt.sum64=z9;function j9(r,e,t,i){var n=e+i>>>0,a=(n<e?1:0)+r+t;return a>>>0}Pt.sum64_hi=j9;function k9(r,e,t,i){var n=e+i;return n>>>0}Pt.sum64_lo=k9;function H9(r,e,t,i,n,a,f,u){var v=0,p=e;p=p+i>>>0,v+=p<e?1:0,p=p+a>>>0,v+=p<a?1:0,p=p+u>>>0,v+=p<u?1:0;var y=r+t+n+f+v;return y>>>0}Pt.sum64_4_hi=H9;function K9(r,e,t,i,n,a,f,u){var v=e+i+a+u;return v>>>0}Pt.sum64_4_lo=K9;function V9(r,e,t,i,n,a,f,u,v,p){var y=0,_=e;_=_+i>>>0,y+=_<e?1:0,_=_+a>>>0,y+=_<a?1:0,_=_+u>>>0,y+=_<u?1:0,_=_+p>>>0,y+=_<p?1:0;var O=r+t+n+f+v+y;return O>>>0}Pt.sum64_5_hi=V9;function G9(r,e,t,i,n,a,f,u,v,p){var y=e+i+a+u+p;return y>>>0}Pt.sum64_5_lo=G9;function W9(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Pt.rotr64_hi=W9;function J9(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Pt.rotr64_lo=J9;function Y9(r,e,t){return r>>>t}Pt.shr64_hi=Y9;function Q9(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Pt.shr64_lo=Q9;var lo={},L1=Pt,X9=wa;function ju(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}lo.BlockHash=ju;ju.prototype.update=function(e,t){if(e=L1.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=L1.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};ju.prototype.digest=function(e){return this.update(this._pad()),X9(this.pending===null),this._digest(e)};ju.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,n=new Array(i+this.padLength);n[0]=128;for(var a=1;a<i;a++)n[a]=0;if(e<<=3,this.endian==="big"){for(var f=8;f<this.padLength;f++)n[a++]=0;n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=e>>>24&255,n[a++]=e>>>16&255,n[a++]=e>>>8&255,n[a++]=e&255}else for(n[a++]=e&255,n[a++]=e>>>8&255,n[a++]=e>>>16&255,n[a++]=e>>>24&255,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,f=8;f<this.padLength;f++)n[a++]=0;return n};var po={},Gn={},Z9=Pt,Nn=Z9.rotr32;function eA(r,e,t,i){if(r===0)return Db(e,t,i);if(r===1||r===3)return Ob(e,t,i);if(r===2)return Pb(e,t,i)}Gn.ft_1=eA;function Db(r,e,t){return r&e^~r&t}Gn.ch32=Db;function Pb(r,e,t){return r&e^r&t^e&t}Gn.maj32=Pb;function Ob(r,e,t){return r^e^t}Gn.p32=Ob;function tA(r){return Nn(r,2)^Nn(r,13)^Nn(r,22)}Gn.s0_256=tA;function rA(r){return Nn(r,6)^Nn(r,11)^Nn(r,25)}Gn.s1_256=rA;function iA(r){return Nn(r,7)^Nn(r,18)^r>>>3}Gn.g0_256=iA;function nA(r){return Nn(r,17)^Nn(r,19)^r>>>10}Gn.g1_256=nA;var io=Pt,sA=lo,aA=Gn,ml=io.rotl32,Go=io.sum32,oA=io.sum32_5,cA=aA.ft_1,Cb=sA.BlockHash,fA=[1518500249,1859775393,2400959708,3395469782];function zn(){if(!(this instanceof zn))return new zn;Cb.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}io.inherits(zn,Cb);var uA=zn;zn.blockSize=512;zn.outSize=160;zn.hmacStrength=80;zn.padLength=64;zn.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=ml(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var a=this.h[0],f=this.h[1],u=this.h[2],v=this.h[3],p=this.h[4];for(n=0;n<i.length;n++){var y=~~(n/20),_=oA(ml(a,5),cA(y,f,u,v),p,i[n],fA[y]);p=v,v=u,u=ml(f,30),f=a,a=_}this.h[0]=Go(this.h[0],a),this.h[1]=Go(this.h[1],f),this.h[2]=Go(this.h[2],u),this.h[3]=Go(this.h[3],v),this.h[4]=Go(this.h[4],p)};zn.prototype._digest=function(e){return e==="hex"?io.toHex32(this.h,"big"):io.split32(this.h,"big")};var no=Pt,hA=lo,go=Gn,lA=wa,sn=no.sum32,dA=no.sum32_4,pA=no.sum32_5,gA=go.ch32,vA=go.maj32,bA=go.s0_256,mA=go.s1_256,yA=go.g0_256,wA=go.g1_256,Rb=hA.BlockHash,_A=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function jn(){if(!(this instanceof jn))return new jn;Rb.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_A,this.W=new Array(64)}no.inherits(jn,Rb);var Nb=jn;jn.blockSize=512;jn.outSize=256;jn.hmacStrength=192;jn.padLength=64;jn.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=dA(wA(i[n-2]),i[n-7],yA(i[n-15]),i[n-16]);var a=this.h[0],f=this.h[1],u=this.h[2],v=this.h[3],p=this.h[4],y=this.h[5],_=this.h[6],O=this.h[7];for(lA(this.k.length===i.length),n=0;n<i.length;n++){var D=pA(O,mA(p),gA(p,y,_),this.k[n],i[n]),C=sn(bA(a),vA(a,f,u));O=_,_=y,y=p,p=sn(v,D),v=u,u=f,f=a,a=sn(D,C)}this.h[0]=sn(this.h[0],a),this.h[1]=sn(this.h[1],f),this.h[2]=sn(this.h[2],u),this.h[3]=sn(this.h[3],v),this.h[4]=sn(this.h[4],p),this.h[5]=sn(this.h[5],y),this.h[6]=sn(this.h[6],_),this.h[7]=sn(this.h[7],O)};jn.prototype._digest=function(e){return e==="hex"?no.toHex32(this.h,"big"):no.split32(this.h,"big")};var u0=Pt,Tb=Nb;function vs(){if(!(this instanceof vs))return new vs;Tb.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}u0.inherits(vs,Tb);var AA=vs;vs.blockSize=512;vs.outSize=224;vs.hmacStrength=192;vs.padLength=64;vs.prototype._digest=function(e){return e==="hex"?u0.toHex32(this.h.slice(0,7),"big"):u0.split32(this.h.slice(0,7),"big")};var ui=Pt,EA=lo,xA=wa,Tn=ui.rotr64_hi,Fn=ui.rotr64_lo,Fb=ui.shr64_hi,Bb=ui.shr64_lo,Os=ui.sum64,yl=ui.sum64_hi,wl=ui.sum64_lo,SA=ui.sum64_4_hi,IA=ui.sum64_4_lo,MA=ui.sum64_5_hi,DA=ui.sum64_5_lo,Lb=EA.BlockHash,PA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function pn(){if(!(this instanceof pn))return new pn;Lb.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=PA,this.W=new Array(160)}ui.inherits(pn,Lb);var qb=pn;pn.blockSize=1024;pn.outSize=512;pn.hmacStrength=192;pn.padLength=128;pn.prototype._prepareBlock=function(e,t){for(var i=this.W,n=0;n<32;n++)i[n]=e[t+n];for(;n<i.length;n+=2){var a=UA(i[n-4],i[n-3]),f=zA(i[n-4],i[n-3]),u=i[n-14],v=i[n-13],p=qA(i[n-30],i[n-29]),y=$A(i[n-30],i[n-29]),_=i[n-32],O=i[n-31];i[n]=SA(a,f,u,v,p,y,_,O),i[n+1]=IA(a,f,u,v,p,y,_,O)}};pn.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,n=this.h[0],a=this.h[1],f=this.h[2],u=this.h[3],v=this.h[4],p=this.h[5],y=this.h[6],_=this.h[7],O=this.h[8],D=this.h[9],C=this.h[10],H=this.h[11],W=this.h[12],Q=this.h[13],z=this.h[14],Y=this.h[15];xA(this.k.length===i.length);for(var q=0;q<i.length;q+=2){var j=z,V=Y,A=BA(O,D),F=LA(O,D),ae=OA(O,D,C,H,W),de=CA(O,D,C,H,W,Q),$=this.k[q],m=this.k[q+1],c=i[q],l=i[q+1],b=MA(j,V,A,F,ae,de,$,m,c,l),x=DA(j,V,A,F,ae,de,$,m,c,l);j=TA(n,a),V=FA(n,a),A=RA(n,a,f,u,v),F=NA(n,a,f,u,v,p);var I=yl(j,V,A,F),P=wl(j,V,A,F);z=W,Y=Q,W=C,Q=H,C=O,H=D,O=yl(y,_,b,x),D=wl(_,_,b,x),y=v,_=p,v=f,p=u,f=n,u=a,n=yl(b,x,I,P),a=wl(b,x,I,P)}Os(this.h,0,n,a),Os(this.h,2,f,u),Os(this.h,4,v,p),Os(this.h,6,y,_),Os(this.h,8,O,D),Os(this.h,10,C,H),Os(this.h,12,W,Q),Os(this.h,14,z,Y)};pn.prototype._digest=function(e){return e==="hex"?ui.toHex32(this.h,"big"):ui.split32(this.h,"big")};function OA(r,e,t,i,n){var a=r&t^~r&n;return a<0&&(a+=4294967296),a}function CA(r,e,t,i,n,a){var f=e&i^~e&a;return f<0&&(f+=4294967296),f}function RA(r,e,t,i,n){var a=r&t^r&n^t&n;return a<0&&(a+=4294967296),a}function NA(r,e,t,i,n,a){var f=e&i^e&a^i&a;return f<0&&(f+=4294967296),f}function TA(r,e){var t=Tn(r,e,28),i=Tn(e,r,2),n=Tn(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function FA(r,e){var t=Fn(r,e,28),i=Fn(e,r,2),n=Fn(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function BA(r,e){var t=Tn(r,e,14),i=Tn(r,e,18),n=Tn(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function LA(r,e){var t=Fn(r,e,14),i=Fn(r,e,18),n=Fn(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function qA(r,e){var t=Tn(r,e,1),i=Tn(r,e,8),n=Fb(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function $A(r,e){var t=Fn(r,e,1),i=Fn(r,e,8),n=Bb(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function UA(r,e){var t=Tn(r,e,19),i=Tn(e,r,29),n=Fb(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}function zA(r,e){var t=Fn(r,e,19),i=Fn(e,r,29),n=Bb(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}var h0=Pt,$b=qb;function bs(){if(!(this instanceof bs))return new bs;$b.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}h0.inherits(bs,$b);var jA=bs;bs.blockSize=1024;bs.outSize=384;bs.hmacStrength=192;bs.padLength=128;bs.prototype._digest=function(e){return e==="hex"?h0.toHex32(this.h.slice(0,12),"big"):h0.split32(this.h.slice(0,12),"big")};po.sha1=uA;po.sha224=AA;po.sha256=Nb;po.sha384=jA;po.sha512=qb;var Ub={},ga=Pt,kA=lo,jf=ga.rotl32,q1=ga.sum32,Wo=ga.sum32_3,$1=ga.sum32_4,zb=kA.BlockHash;function kn(){if(!(this instanceof kn))return new kn;zb.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}ga.inherits(kn,zb);Ub.ripemd160=kn;kn.blockSize=512;kn.outSize=160;kn.hmacStrength=192;kn.padLength=64;kn.prototype._update=function(e,t){for(var i=this.h[0],n=this.h[1],a=this.h[2],f=this.h[3],u=this.h[4],v=i,p=n,y=a,_=f,O=u,D=0;D<80;D++){var C=q1(jf($1(i,U1(D,n,a,f),e[VA[D]+t],HA(D)),WA[D]),u);i=u,u=f,f=jf(a,10),a=n,n=C,C=q1(jf($1(v,U1(79-D,p,y,_),e[GA[D]+t],KA(D)),JA[D]),O),v=O,O=_,_=jf(y,10),y=p,p=C}C=Wo(this.h[1],a,_),this.h[1]=Wo(this.h[2],f,O),this.h[2]=Wo(this.h[3],u,v),this.h[3]=Wo(this.h[4],i,p),this.h[4]=Wo(this.h[0],n,y),this.h[0]=C};kn.prototype._digest=function(e){return e==="hex"?ga.toHex32(this.h,"little"):ga.split32(this.h,"little")};function U1(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function HA(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function KA(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var VA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],GA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],WA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],JA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],YA=Pt,QA=wa;function so(r,e,t){if(!(this instanceof so))return new so(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(YA.toArray(e,t))}var XA=so;so.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),QA(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};so.prototype.update=function(e,t){return this.inner.update(e,t),this};so.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=Pt,e.common=lo,e.sha=po,e.ripemd=Ub,e.hmac=XA,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(zu);var _l,z1;function ZA(){return z1||(z1=1,_l={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),_l}(function(r){var e=r,t=zu,i=k0,n=xi,a=n.assert;function f(p){p.type==="short"?this.curve=new i.short(p):p.type==="edwards"?this.curve=new i.edwards(p):this.curve=new i.mont(p),this.g=this.curve.g,this.n=this.curve.n,this.hash=p.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=f;function u(p,y){Object.defineProperty(e,p,{configurable:!0,enumerable:!0,get:function(){var _=new f(y);return Object.defineProperty(e,p,{configurable:!0,enumerable:!0,value:_}),_}})}u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var v;try{v=ZA()}catch{v=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",v]})})(Uu);var eE=zu,la=z0,jb=wa;function $s(r){if(!(this instanceof $s))return new $s(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=la.toArray(r.entropy,r.entropyEnc||"hex"),t=la.toArray(r.nonce,r.nonceEnc||"hex"),i=la.toArray(r.pers,r.persEnc||"hex");jb(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var tE=$s;$s.prototype._init=function(e,t,i){var n=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};$s.prototype._hmac=function(){return new eE.hmac(this.hash,this.K)};$s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};$s.prototype.reseed=function(e,t,i,n){typeof t!="string"&&(n=i,i=t,t=null),e=la.toArray(e,t),i=la.toArray(i,n),jb(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};$s.prototype.generate=function(e,t,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(n=i,i=t,t=null),i&&(i=la.toArray(i,n||"hex"),this._update(i));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var f=a.slice(0,e);return this._update(i),this._reseed++,la.encode(f,t)};var rE=ys,iE=xi,l0=iE.assert;function Ur(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var nE=Ur;Ur.fromPublic=function(e,t,i){return t instanceof Ur?t:new Ur(e,{pub:t,pubEnc:i})};Ur.fromPrivate=function(e,t,i){return t instanceof Ur?t:new Ur(e,{priv:t,privEnc:i})};Ur.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ur.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Ur.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Ur.prototype._importPrivate=function(e,t){this.priv=new rE(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Ur.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?l0(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&l0(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Ur.prototype.derive=function(e){return e.validate()||l0(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Ur.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)};Ur.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Ur.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var gu=ys,K0=xi,sE=K0.assert;function ku(r,e){if(r instanceof ku)return r;this._importDER(r,e)||(sE(r.r&&r.s,"Signature without r or s"),this.r=new gu(r.r,16),this.s=new gu(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var aE=ku;function oE(){this.place=0}function Al(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4||r[e.place]===0)return!1;for(var n=0,a=0,f=e.place;a<i;a++,f++)n<<=8,n|=r[f],n>>>=0;return n<=127?!1:(e.place=f,n)}function j1(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}ku.prototype._importDER=function(e,t){e=K0.toArray(e,t);var i=new oE;if(e[i.place++]!==48)return!1;var n=Al(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var a=Al(e,i);if(a===!1||e[i.place]&128)return!1;var f=e.slice(i.place,a+i.place);if(i.place+=a,e[i.place++]!==2)return!1;var u=Al(e,i);if(u===!1||e.length!==u+i.place||e[i.place]&128)return!1;var v=e.slice(i.place,u+i.place);if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;return this.r=new gu(f),this.s=new gu(v),this.recoveryParam=null,!0};function El(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}ku.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=j1(t),i=j1(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];El(n,t.length),n=n.concat(t),n.push(2),El(n,i.length);var a=n.concat(i),f=[48];return El(f,a.length),f=f.concat(a),K0.encode(f,e)};var da=ys,kb=tE,cE=xi,xl=Uu,fE=Ab,Hb=cE.assert,V0=nE,Hu=aE;function ki(r){if(!(this instanceof ki))return new ki(r);typeof r=="string"&&(Hb(Object.prototype.hasOwnProperty.call(xl,r),"Unknown curve "+r),r=xl[r]),r instanceof xl.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var uE=ki;ki.prototype.keyPair=function(e){return new V0(this,e)};ki.prototype.keyFromPrivate=function(e,t){return V0.fromPrivate(this,e,t)};ki.prototype.keyFromPublic=function(e,t){return V0.fromPublic(this,e,t)};ki.prototype.genKeyPair=function(e){e||(e={});for(var t=new kb({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||fE(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new da(2));;){var a=new da(t.generate(i));if(!(a.cmp(n)>0))return a.iaddn(1),this.keyFromPrivate(a)}};ki.prototype._truncateToN=function(e,t){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};ki.prototype.sign=function(e,t,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new da(e,16));for(var a=this.n.byteLength(),f=t.getPrivate().toArray("be",a),u=e.toArray("be",a),v=new kb({hash:this.hash,entropy:f,nonce:u,pers:n.pers,persEnc:n.persEnc||"utf8"}),p=this.n.sub(new da(1)),y=0;;y++){var _=n.k?n.k(y):new da(v.generate(this.n.byteLength()));if(_=this._truncateToN(_,!0),!(_.cmpn(1)<=0||_.cmp(p)>=0)){var O=this.g.mul(_);if(!O.isInfinity()){var D=O.getX(),C=D.umod(this.n);if(C.cmpn(0)!==0){var H=_.invm(this.n).mul(C.mul(t.getPrivate()).iadd(e));if(H=H.umod(this.n),H.cmpn(0)!==0){var W=(O.getY().isOdd()?1:0)|(D.cmp(C)!==0?2:0);return n.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),W^=1),new Hu({r:C,s:H,recoveryParam:W})}}}}}};ki.prototype.verify=function(e,t,i,n){e=this._truncateToN(new da(e,16)),i=this.keyFromPublic(i,n),t=new Hu(t,"hex");var a=t.r,f=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;var u=f.invm(this.n),v=u.mul(e).umod(this.n),p=u.mul(a).umod(this.n),y;return this.curve._maxwellTrick?(y=this.g.jmulAdd(v,i.getPublic(),p),y.isInfinity()?!1:y.eqXToP(a)):(y=this.g.mulAdd(v,i.getPublic(),p),y.isInfinity()?!1:y.getX().umod(this.n).cmp(a)===0)};ki.prototype.recoverPubKey=function(r,e,t,i){Hb((3&t)===t,"The recovery param is more than two bits"),e=new Hu(e,i);var n=this.n,a=new da(r),f=e.r,u=e.s,v=t&1,p=t>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&p)throw new Error("Unable to find sencond key candinate");p?f=this.curve.pointFromX(f.add(this.curve.n),v):f=this.curve.pointFromX(f,v);var y=e.r.invm(n),_=n.sub(a).mul(y).umod(n),O=u.mul(y).umod(n);return this.g.mulAdd(_,f,O)};ki.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Hu(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var a;try{a=this.recoverPubKey(r,e,n)}catch{continue}if(a.eq(t))return n}throw new Error("Unable to find valid recovery factor")};var Pc=xi,Kb=Pc.assert,k1=Pc.parseBytes,vo=Pc.cachedProperty;function Ar(r,e){this.eddsa=r,this._secret=k1(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=k1(e.pub)}Ar.fromPublic=function(e,t){return t instanceof Ar?t:new Ar(e,{pub:t})};Ar.fromSecret=function(e,t){return t instanceof Ar?t:new Ar(e,{secret:t})};Ar.prototype.secret=function(){return this._secret};vo(Ar,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});vo(Ar,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});vo(Ar,"privBytes",function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});vo(Ar,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});vo(Ar,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});vo(Ar,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Ar.prototype.sign=function(e){return Kb(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Ar.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};Ar.prototype.getSecret=function(e){return Kb(this._secret,"KeyPair is public only"),Pc.encode(this.secret(),e)};Ar.prototype.getPublic=function(e){return Pc.encode(this.pubBytes(),e)};var hE=Ar,lE=ys,Ku=xi,H1=Ku.assert,Vu=Ku.cachedProperty,dE=Ku.parseBytes;function _a(r,e){this.eddsa=r,typeof e!="object"&&(e=dE(e)),Array.isArray(e)&&(H1(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),H1(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof lE&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Vu(_a,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Vu(_a,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Vu(_a,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Vu(_a,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});_a.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};_a.prototype.toHex=function(){return Ku.encode(this.toBytes(),"hex").toUpperCase()};var pE=_a,gE=zu,vE=Uu,ao=xi,bE=ao.assert,Vb=ao.parseBytes,Gb=hE,K1=pE;function hi(r){if(bE(r==="ed25519","only tested with ed25519 so far"),!(this instanceof hi))return new hi(r);r=vE[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=gE.sha512}var mE=hi;hi.prototype.sign=function(e,t){e=Vb(e);var i=this.keyFromSecret(t),n=this.hashInt(i.messagePrefix(),e),a=this.g.mul(n),f=this.encodePoint(a),u=this.hashInt(f,i.pubBytes(),e).mul(i.priv()),v=n.add(u).umod(this.curve.n);return this.makeSignature({R:a,S:v,Rencoded:f})};hi.prototype.verify=function(e,t,i){if(e=Vb(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var n=this.keyFromPublic(i),a=this.hashInt(t.Rencoded(),n.pubBytes(),e),f=this.g.mul(t.S()),u=t.R().add(n.pub().mul(a));return u.eq(f)};hi.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return ao.intFromLE(e.digest()).umod(this.curve.n)};hi.prototype.keyFromPublic=function(e){return Gb.fromPublic(this,e)};hi.prototype.keyFromSecret=function(e){return Gb.fromSecret(this,e)};hi.prototype.makeSignature=function(e){return e instanceof K1?e:new K1(this,e)};hi.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};hi.prototype.decodePoint=function(e){e=ao.parseBytes(e);var t=e.length-1,i=e.slice(0,t).concat(e[t]&-129),n=(e[t]&128)!==0,a=ao.intFromLE(i);return this.curve.pointFromY(a,n)};hi.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};hi.prototype.decodeInt=function(e){return ao.intFromLE(e)};hi.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=b9.version,e.utils=xi,e.rand=Ab,e.curve=k0,e.curves=Uu,e.ec=uE,e.eddsa=mE})(wb);var G0={},Wb={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=mt,t=Ei;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function u(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},u.prototype.update=function(v,p){if(p===void 0&&(p=v.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var y=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=v[y++],p--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(y=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,v,y,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=v[y++],p--;return this},u.prototype.finish=function(v){if(!this._finished){var p=this._bytesHashed,y=this._bufferLength,_=p/536870912|0,O=p<<3,D=p%128<112?128:256;this._buffer[y]=128;for(var C=y+1;C<D-8;C++)this._buffer[C]=0;e.writeUint32BE(_,this._buffer,D-8),e.writeUint32BE(O,this._buffer,D-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,D),this._finished=!0}for(var C=0;C<this.digestLength/8;C++)e.writeUint32BE(this._stateHi[C],v,C*8),e.writeUint32BE(this._stateLo[C],v,C*8+4);return this},u.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(v){return this._stateHi.set(v.stateHi),this._stateLo.set(v.stateLo),this._bufferLength=v.bufferLength,v.buffer&&this._buffer.set(v.buffer),this._bytesHashed=v.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(v){t.wipe(v.stateHi),t.wipe(v.stateLo),v.buffer&&t.wipe(v.buffer),v.bufferLength=0,v.bytesHashed=0},u}();r.SHA512=i;var n=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(u,v,p,y,_,O,D){for(var C=p[0],H=p[1],W=p[2],Q=p[3],z=p[4],Y=p[5],q=p[6],j=p[7],V=y[0],A=y[1],F=y[2],ae=y[3],de=y[4],$=y[5],m=y[6],c=y[7],l,b,x,I,P,S,d,g;D>=128;){for(var N=0;N<16;N++){var Z=8*N+O;u[N]=e.readUint32BE(_,Z),v[N]=e.readUint32BE(_,Z+4)}for(var N=0;N<80;N++){var se=C,M=H,ee=W,B=Q,k=z,K=Y,w=q,U=j,ne=V,ce=A,ue=F,ye=ae,we=de,Re=$,Qe=m,Pe=c;if(l=j,b=c,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=(z>>>14|de<<18)^(z>>>18|de<<14)^(de>>>9|z<<23),b=(de>>>14|z<<18)^(de>>>18|z<<14)^(z>>>9|de<<23),P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,l=z&Y^~z&q,b=de&$^~de&m,P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,l=n[N*2],b=n[N*2+1],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,l=u[N%16],b=v[N%16],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,x=d&65535|g<<16,I=P&65535|S<<16,l=x,b=I,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=(C>>>28|V<<4)^(V>>>2|C<<30)^(V>>>7|C<<25),b=(V>>>28|C<<4)^(C>>>2|V<<30)^(C>>>7|V<<25),P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,l=C&H^C&W^H&W,b=V&A^V&F^A&F,P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,U=d&65535|g<<16,Pe=P&65535|S<<16,l=B,b=ye,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=x,b=I,P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,B=d&65535|g<<16,ye=P&65535|S<<16,H=se,W=M,Q=ee,z=B,Y=k,q=K,j=w,C=U,A=ne,F=ce,ae=ue,de=ye,$=we,m=Re,c=Qe,V=Pe,N%16===15)for(var Z=0;Z<16;Z++)l=u[Z],b=v[Z],P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=u[(Z+9)%16],b=v[(Z+9)%16],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,x=u[(Z+1)%16],I=v[(Z+1)%16],l=(x>>>1|I<<31)^(x>>>8|I<<24)^x>>>7,b=(I>>>1|x<<31)^(I>>>8|x<<24)^(I>>>7|x<<25),P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,x=u[(Z+14)%16],I=v[(Z+14)%16],l=(x>>>19|I<<13)^(I>>>29|x<<3)^x>>>6,b=(I>>>19|x<<13)^(x>>>29|I<<3)^(I>>>6|x<<26),P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,u[Z]=d&65535|g<<16,v[Z]=P&65535|S<<16}l=C,b=V,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[0],b=y[0],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[0]=C=d&65535|g<<16,y[0]=V=P&65535|S<<16,l=H,b=A,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[1],b=y[1],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[1]=H=d&65535|g<<16,y[1]=A=P&65535|S<<16,l=W,b=F,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[2],b=y[2],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[2]=W=d&65535|g<<16,y[2]=F=P&65535|S<<16,l=Q,b=ae,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[3],b=y[3],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[3]=Q=d&65535|g<<16,y[3]=ae=P&65535|S<<16,l=z,b=de,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[4],b=y[4],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[4]=z=d&65535|g<<16,y[4]=de=P&65535|S<<16,l=Y,b=$,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[5],b=y[5],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[5]=Y=d&65535|g<<16,y[5]=$=P&65535|S<<16,l=q,b=m,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[6],b=y[6],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[6]=q=d&65535|g<<16,y[6]=m=P&65535|S<<16,l=j,b=c,P=b&65535,S=b>>>16,d=l&65535,g=l>>>16,l=p[7],b=y[7],P+=b&65535,S+=b>>>16,d+=l&65535,g+=l>>>16,S+=P>>>16,d+=S>>>16,g+=d>>>16,p[7]=j=d&65535|g<<16,y[7]=c=P&65535|S<<16,O+=128,D-=128}return O}function f(u){var v=new i;v.update(u);var p=v.digest();return v.clean(),p}r.hash=f})(Wb);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=zs,t=Wb,i=Ei;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function n(B){const k=new Float64Array(16);if(B)for(let K=0;K<B.length;K++)k[K]=B[K];return k}const a=new Uint8Array(32);a[0]=9;const f=n(),u=n([1]),v=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),y=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),O=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function D(B,k){for(let K=0;K<16;K++)B[K]=k[K]|0}function C(B){let k=1;for(let K=0;K<16;K++){let w=B[K]+k+65535;k=Math.floor(w/65536),B[K]=w-k*65536}B[0]+=k-1+37*(k-1)}function H(B,k,K){const w=~(K-1);for(let U=0;U<16;U++){const ne=w&(B[U]^k[U]);B[U]^=ne,k[U]^=ne}}function W(B,k){const K=n(),w=n();for(let U=0;U<16;U++)w[U]=k[U];C(w),C(w),C(w);for(let U=0;U<2;U++){K[0]=w[0]-65517;for(let ce=1;ce<15;ce++)K[ce]=w[ce]-65535-(K[ce-1]>>16&1),K[ce-1]&=65535;K[15]=w[15]-32767-(K[14]>>16&1);const ne=K[15]>>16&1;K[14]&=65535,H(w,K,1-ne)}for(let U=0;U<16;U++)B[2*U]=w[U]&255,B[2*U+1]=w[U]>>8}function Q(B,k){let K=0;for(let w=0;w<32;w++)K|=B[w]^k[w];return(1&K-1>>>8)-1}function z(B,k){const K=new Uint8Array(32),w=new Uint8Array(32);return W(K,B),W(w,k),Q(K,w)}function Y(B){const k=new Uint8Array(32);return W(k,B),k[0]&1}function q(B,k){for(let K=0;K<16;K++)B[K]=k[2*K]+(k[2*K+1]<<8);B[15]&=32767}function j(B,k,K){for(let w=0;w<16;w++)B[w]=k[w]+K[w]}function V(B,k,K){for(let w=0;w<16;w++)B[w]=k[w]-K[w]}function A(B,k,K){let w,U,ne=0,ce=0,ue=0,ye=0,we=0,Re=0,Qe=0,Pe=0,Ne=0,Ie=0,me=0,Oe=0,Te=0,ve=0,Ce=0,Se=0,be=0,qe=0,Me=0,_e=0,He=0,Ve=0,Ee=0,Ke=0,ht=0,Ge=0,_t=0,lt=0,Je=0,Et=0,It=0,Fe=K[0],Xe=K[1],tt=K[2],Be=K[3],et=K[4],Ze=K[5],Ue=K[6],ft=K[7],rt=K[8],ze=K[9],it=K[10],st=K[11],Le=K[12],Ye=K[13],ut=K[14],je=K[15];w=k[0],ne+=w*Fe,ce+=w*Xe,ue+=w*tt,ye+=w*Be,we+=w*et,Re+=w*Ze,Qe+=w*Ue,Pe+=w*ft,Ne+=w*rt,Ie+=w*ze,me+=w*it,Oe+=w*st,Te+=w*Le,ve+=w*Ye,Ce+=w*ut,Se+=w*je,w=k[1],ce+=w*Fe,ue+=w*Xe,ye+=w*tt,we+=w*Be,Re+=w*et,Qe+=w*Ze,Pe+=w*Ue,Ne+=w*ft,Ie+=w*rt,me+=w*ze,Oe+=w*it,Te+=w*st,ve+=w*Le,Ce+=w*Ye,Se+=w*ut,be+=w*je,w=k[2],ue+=w*Fe,ye+=w*Xe,we+=w*tt,Re+=w*Be,Qe+=w*et,Pe+=w*Ze,Ne+=w*Ue,Ie+=w*ft,me+=w*rt,Oe+=w*ze,Te+=w*it,ve+=w*st,Ce+=w*Le,Se+=w*Ye,be+=w*ut,qe+=w*je,w=k[3],ye+=w*Fe,we+=w*Xe,Re+=w*tt,Qe+=w*Be,Pe+=w*et,Ne+=w*Ze,Ie+=w*Ue,me+=w*ft,Oe+=w*rt,Te+=w*ze,ve+=w*it,Ce+=w*st,Se+=w*Le,be+=w*Ye,qe+=w*ut,Me+=w*je,w=k[4],we+=w*Fe,Re+=w*Xe,Qe+=w*tt,Pe+=w*Be,Ne+=w*et,Ie+=w*Ze,me+=w*Ue,Oe+=w*ft,Te+=w*rt,ve+=w*ze,Ce+=w*it,Se+=w*st,be+=w*Le,qe+=w*Ye,Me+=w*ut,_e+=w*je,w=k[5],Re+=w*Fe,Qe+=w*Xe,Pe+=w*tt,Ne+=w*Be,Ie+=w*et,me+=w*Ze,Oe+=w*Ue,Te+=w*ft,ve+=w*rt,Ce+=w*ze,Se+=w*it,be+=w*st,qe+=w*Le,Me+=w*Ye,_e+=w*ut,He+=w*je,w=k[6],Qe+=w*Fe,Pe+=w*Xe,Ne+=w*tt,Ie+=w*Be,me+=w*et,Oe+=w*Ze,Te+=w*Ue,ve+=w*ft,Ce+=w*rt,Se+=w*ze,be+=w*it,qe+=w*st,Me+=w*Le,_e+=w*Ye,He+=w*ut,Ve+=w*je,w=k[7],Pe+=w*Fe,Ne+=w*Xe,Ie+=w*tt,me+=w*Be,Oe+=w*et,Te+=w*Ze,ve+=w*Ue,Ce+=w*ft,Se+=w*rt,be+=w*ze,qe+=w*it,Me+=w*st,_e+=w*Le,He+=w*Ye,Ve+=w*ut,Ee+=w*je,w=k[8],Ne+=w*Fe,Ie+=w*Xe,me+=w*tt,Oe+=w*Be,Te+=w*et,ve+=w*Ze,Ce+=w*Ue,Se+=w*ft,be+=w*rt,qe+=w*ze,Me+=w*it,_e+=w*st,He+=w*Le,Ve+=w*Ye,Ee+=w*ut,Ke+=w*je,w=k[9],Ie+=w*Fe,me+=w*Xe,Oe+=w*tt,Te+=w*Be,ve+=w*et,Ce+=w*Ze,Se+=w*Ue,be+=w*ft,qe+=w*rt,Me+=w*ze,_e+=w*it,He+=w*st,Ve+=w*Le,Ee+=w*Ye,Ke+=w*ut,ht+=w*je,w=k[10],me+=w*Fe,Oe+=w*Xe,Te+=w*tt,ve+=w*Be,Ce+=w*et,Se+=w*Ze,be+=w*Ue,qe+=w*ft,Me+=w*rt,_e+=w*ze,He+=w*it,Ve+=w*st,Ee+=w*Le,Ke+=w*Ye,ht+=w*ut,Ge+=w*je,w=k[11],Oe+=w*Fe,Te+=w*Xe,ve+=w*tt,Ce+=w*Be,Se+=w*et,be+=w*Ze,qe+=w*Ue,Me+=w*ft,_e+=w*rt,He+=w*ze,Ve+=w*it,Ee+=w*st,Ke+=w*Le,ht+=w*Ye,Ge+=w*ut,_t+=w*je,w=k[12],Te+=w*Fe,ve+=w*Xe,Ce+=w*tt,Se+=w*Be,be+=w*et,qe+=w*Ze,Me+=w*Ue,_e+=w*ft,He+=w*rt,Ve+=w*ze,Ee+=w*it,Ke+=w*st,ht+=w*Le,Ge+=w*Ye,_t+=w*ut,lt+=w*je,w=k[13],ve+=w*Fe,Ce+=w*Xe,Se+=w*tt,be+=w*Be,qe+=w*et,Me+=w*Ze,_e+=w*Ue,He+=w*ft,Ve+=w*rt,Ee+=w*ze,Ke+=w*it,ht+=w*st,Ge+=w*Le,_t+=w*Ye,lt+=w*ut,Je+=w*je,w=k[14],Ce+=w*Fe,Se+=w*Xe,be+=w*tt,qe+=w*Be,Me+=w*et,_e+=w*Ze,He+=w*Ue,Ve+=w*ft,Ee+=w*rt,Ke+=w*ze,ht+=w*it,Ge+=w*st,_t+=w*Le,lt+=w*Ye,Je+=w*ut,Et+=w*je,w=k[15],Se+=w*Fe,be+=w*Xe,qe+=w*tt,Me+=w*Be,_e+=w*et,He+=w*Ze,Ve+=w*Ue,Ee+=w*ft,Ke+=w*rt,ht+=w*ze,Ge+=w*it,_t+=w*st,lt+=w*Le,Je+=w*Ye,Et+=w*ut,It+=w*je,ne+=38*be,ce+=38*qe,ue+=38*Me,ye+=38*_e,we+=38*He,Re+=38*Ve,Qe+=38*Ee,Pe+=38*Ke,Ne+=38*ht,Ie+=38*Ge,me+=38*_t,Oe+=38*lt,Te+=38*Je,ve+=38*Et,Ce+=38*It,U=1,w=ne+U+65535,U=Math.floor(w/65536),ne=w-U*65536,w=ce+U+65535,U=Math.floor(w/65536),ce=w-U*65536,w=ue+U+65535,U=Math.floor(w/65536),ue=w-U*65536,w=ye+U+65535,U=Math.floor(w/65536),ye=w-U*65536,w=we+U+65535,U=Math.floor(w/65536),we=w-U*65536,w=Re+U+65535,U=Math.floor(w/65536),Re=w-U*65536,w=Qe+U+65535,U=Math.floor(w/65536),Qe=w-U*65536,w=Pe+U+65535,U=Math.floor(w/65536),Pe=w-U*65536,w=Ne+U+65535,U=Math.floor(w/65536),Ne=w-U*65536,w=Ie+U+65535,U=Math.floor(w/65536),Ie=w-U*65536,w=me+U+65535,U=Math.floor(w/65536),me=w-U*65536,w=Oe+U+65535,U=Math.floor(w/65536),Oe=w-U*65536,w=Te+U+65535,U=Math.floor(w/65536),Te=w-U*65536,w=ve+U+65535,U=Math.floor(w/65536),ve=w-U*65536,w=Ce+U+65535,U=Math.floor(w/65536),Ce=w-U*65536,w=Se+U+65535,U=Math.floor(w/65536),Se=w-U*65536,ne+=U-1+37*(U-1),U=1,w=ne+U+65535,U=Math.floor(w/65536),ne=w-U*65536,w=ce+U+65535,U=Math.floor(w/65536),ce=w-U*65536,w=ue+U+65535,U=Math.floor(w/65536),ue=w-U*65536,w=ye+U+65535,U=Math.floor(w/65536),ye=w-U*65536,w=we+U+65535,U=Math.floor(w/65536),we=w-U*65536,w=Re+U+65535,U=Math.floor(w/65536),Re=w-U*65536,w=Qe+U+65535,U=Math.floor(w/65536),Qe=w-U*65536,w=Pe+U+65535,U=Math.floor(w/65536),Pe=w-U*65536,w=Ne+U+65535,U=Math.floor(w/65536),Ne=w-U*65536,w=Ie+U+65535,U=Math.floor(w/65536),Ie=w-U*65536,w=me+U+65535,U=Math.floor(w/65536),me=w-U*65536,w=Oe+U+65535,U=Math.floor(w/65536),Oe=w-U*65536,w=Te+U+65535,U=Math.floor(w/65536),Te=w-U*65536,w=ve+U+65535,U=Math.floor(w/65536),ve=w-U*65536,w=Ce+U+65535,U=Math.floor(w/65536),Ce=w-U*65536,w=Se+U+65535,U=Math.floor(w/65536),Se=w-U*65536,ne+=U-1+37*(U-1),B[0]=ne,B[1]=ce,B[2]=ue,B[3]=ye,B[4]=we,B[5]=Re,B[6]=Qe,B[7]=Pe,B[8]=Ne,B[9]=Ie,B[10]=me,B[11]=Oe,B[12]=Te,B[13]=ve,B[14]=Ce,B[15]=Se}function F(B,k){A(B,k,k)}function ae(B,k){const K=n();let w;for(w=0;w<16;w++)K[w]=k[w];for(w=253;w>=0;w--)F(K,K),w!==2&&w!==4&&A(K,K,k);for(w=0;w<16;w++)B[w]=K[w]}function de(B,k){const K=n();let w;for(w=0;w<16;w++)K[w]=k[w];for(w=250;w>=0;w--)F(K,K),w!==1&&A(K,K,k);for(w=0;w<16;w++)B[w]=K[w]}function $(B,k){const K=n(),w=n(),U=n(),ne=n(),ce=n(),ue=n(),ye=n(),we=n(),Re=n();V(K,B[1],B[0]),V(Re,k[1],k[0]),A(K,K,Re),j(w,B[0],B[1]),j(Re,k[0],k[1]),A(w,w,Re),A(U,B[3],k[3]),A(U,U,p),A(ne,B[2],k[2]),j(ne,ne,ne),V(ce,w,K),V(ue,ne,U),j(ye,ne,U),j(we,w,K),A(B[0],ce,ue),A(B[1],we,ye),A(B[2],ye,ue),A(B[3],ce,we)}function m(B,k,K){for(let w=0;w<4;w++)H(B[w],k[w],K)}function c(B,k){const K=n(),w=n(),U=n();ae(U,k[2]),A(K,k[0],U),A(w,k[1],U),W(B,w),B[31]^=Y(K)<<7}function l(B,k,K){D(B[0],f),D(B[1],u),D(B[2],u),D(B[3],f);for(let w=255;w>=0;--w){const U=K[w/8|0]>>(w&7)&1;m(B,k,U),$(k,B),$(B,B),m(B,k,U)}}function b(B,k){const K=[n(),n(),n(),n()];D(K[0],y),D(K[1],_),D(K[2],u),A(K[3],y,_),l(B,K,k)}function x(B){if(B.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const k=(0,t.hash)(B);k[0]&=248,k[31]&=127,k[31]|=64;const K=new Uint8Array(32),w=[n(),n(),n(),n()];b(w,k),c(K,w);const U=new Uint8Array(64);return U.set(B),U.set(K,32),{publicKey:K,secretKey:U}}r.generateKeyPairFromSeed=x;function I(B){const k=(0,e.randomBytes)(32,B),K=x(k);return(0,i.wipe)(k),K}r.generateKeyPair=I;function P(B){if(B.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(B.subarray(32))}r.extractPublicKeyFromSecretKey=P;const S=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function d(B,k){let K,w,U,ne;for(w=63;w>=32;--w){for(K=0,U=w-32,ne=w-12;U<ne;++U)k[U]+=K-16*k[w]*S[U-(w-32)],K=Math.floor((k[U]+128)/256),k[U]-=K*256;k[U]+=K,k[w]=0}for(K=0,U=0;U<32;U++)k[U]+=K-(k[31]>>4)*S[U],K=k[U]>>8,k[U]&=255;for(U=0;U<32;U++)k[U]-=K*S[U];for(w=0;w<32;w++)k[w+1]+=k[w]>>8,B[w]=k[w]&255}function g(B){const k=new Float64Array(64);for(let K=0;K<64;K++)k[K]=B[K];for(let K=0;K<64;K++)B[K]=0;d(B,k)}function N(B,k){const K=new Float64Array(64),w=[n(),n(),n(),n()],U=(0,t.hash)(B.subarray(0,32));U[0]&=248,U[31]&=127,U[31]|=64;const ne=new Uint8Array(64);ne.set(U.subarray(32),32);const ce=new t.SHA512;ce.update(ne.subarray(32)),ce.update(k);const ue=ce.digest();ce.clean(),g(ue),b(w,ue),c(ne,w),ce.reset(),ce.update(ne.subarray(0,32)),ce.update(B.subarray(32)),ce.update(k);const ye=ce.digest();g(ye);for(let we=0;we<32;we++)K[we]=ue[we];for(let we=0;we<32;we++)for(let Re=0;Re<32;Re++)K[we+Re]+=ye[we]*U[Re];return d(ne.subarray(32),K),ne}r.sign=N;function Z(B,k){const K=n(),w=n(),U=n(),ne=n(),ce=n(),ue=n(),ye=n();return D(B[2],u),q(B[1],k),F(U,B[1]),A(ne,U,v),V(U,U,B[2]),j(ne,B[2],ne),F(ce,ne),F(ue,ce),A(ye,ue,ce),A(K,ye,U),A(K,K,ne),de(K,K),A(K,K,U),A(K,K,ne),A(K,K,ne),A(B[0],K,ne),F(w,B[0]),A(w,w,ne),z(w,U)&&A(B[0],B[0],O),F(w,B[0]),A(w,w,ne),z(w,U)?-1:(Y(B[0])===k[31]>>7&&V(B[0],f,B[0]),A(B[3],B[0],B[1]),0)}function se(B,k,K){const w=new Uint8Array(32),U=[n(),n(),n(),n()],ne=[n(),n(),n(),n()];if(K.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(Z(ne,B))return!1;const ce=new t.SHA512;ce.update(K.subarray(0,32)),ce.update(B),ce.update(k);const ue=ce.digest();return g(ue),l(U,ne,ue),b(ne,K.subarray(32)),$(U,ne),c(w,U),!Q(K,w)}r.verify=se;function M(B){let k=[n(),n(),n(),n()];if(Z(k,B))throw new Error("Ed25519: invalid public key");let K=n(),w=n(),U=k[1];j(K,u,U),V(w,u,U),ae(w,w),A(K,K,w);let ne=new Uint8Array(32);return W(ne,K),ne}r.convertPublicKeyToX25519=M;function ee(B){const k=(0,t.hash)(B.subarray(0,32));k[0]&=248,k[31]&=127,k[31]|=64;const K=new Uint8Array(k.subarray(0,32));return(0,i.wipe)(k),K}r.convertSecretKeyToX25519=ee})(G0);const yE="EdDSA",wE="JWT",vu=".",Gu="base64url",Jb="utf8",Yb="utf8",_E=":",AE="did",EE="key",V1="base58btc",xE="z",SE="K36",IE=32;function W0(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Qb(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?W0(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function ME(r,e){e||(e=r.reduce((n,a)=>n+a.length,0));const t=Qb(e);let i=0;for(const n of r)t.set(n,i),i+=n.length;return W0(t)}function Xb(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const G1=Xb("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Sl=Xb("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Qb(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Zb={utf8:G1,"utf-8":G1,hex:lu.base16,latin1:Sl,ascii:Sl,binary:Sl,...lu};function Wu(r,e="utf8"){const t=Zb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function bo(r,e="utf8"){const t=Zb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?W0(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const DE=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),PE=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function va(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return PE(r)}catch{return r}}function ms(r){return typeof r=="string"?r:DE(r)||""}function W1(r){return va(Wu(bo(r,Gu),Jb))}function bu(r){return Wu(bo(ms(r),Jb),Gu)}function e2(r){const e=bo(SE,V1),t=xE+Wu(ME([e,r]),V1);return[AE,EE,t].join(_E)}function OE(r){return Wu(r,Gu)}function CE(r){return bo(r,Gu)}function RE(r){return bo([bu(r.header),bu(r.payload)].join(vu),Yb)}function NE(r){return[bu(r.header),bu(r.payload),OE(r.signature)].join(vu)}function d0(r){const e=r.split(vu),t=W1(e[0]),i=W1(e[1]),n=CE(e[2]),a=bo(e.slice(0,2).join(vu),Yb);return{header:t,payload:i,signature:n,data:a}}function J1(r=zs.randomBytes(IE)){return G0.generateKeyPairFromSeed(r)}async function TE(r,e,t,i,n=xe.fromMiliseconds(Date.now())){const a={alg:yE,typ:wE},f=e2(i.publicKey),u=n+t,v={iss:f,sub:r,aud:e,iat:n,exp:u},p=RE({header:a,payload:v}),y=G0.sign(i.secretKey,p);return NE({header:a,payload:v,signature:y})}const FE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var BE={};const LE=":";function cc(r){const[e,t]=r.split(LE);return{namespace:e,reference:t}}function Y1(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const n=r[i];t.push(...n.accounts)}),t}function t2(r,e){return r.includes(":")?[r]:e.chains||[]}var qE=Object.defineProperty,Q1=Object.getOwnPropertySymbols,$E=Object.prototype.hasOwnProperty,UE=Object.prototype.propertyIsEnumerable,X1=(r,e,t)=>e in r?qE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Z1=(r,e)=>{for(var t in e||(e={}))$E.call(e,t)&&X1(r,t,e[t]);if(Q1)for(var t of Q1(e))UE.call(e,t)&&X1(r,t,e[t]);return r};const zE="ReactNative",wi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},jE="js";function mu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function mo(){return!Cu()&&!!F0()&&navigator.product===zE}function Oc(){return!mu()&&!!F0()&&!!Cu()}function Cc(){return mo()?wi.reactNative:mu()?wi.node:Oc()?wi.browser:wi.unknown}function kE(){var r;try{return mo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function HE(r,e){let t=bc.parse(r);return t=Z1(Z1({},t),e),r=bc.stringify(t),r}function r2(){return rb()||{name:"",description:"",url:"",icons:[""]}}function KE(){if(Cc()===wi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const r=x4();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function VE(){var r;const e=Cc();return e===wi.browser?[e,((r=tb())==null?void 0:r.host)||"unknown"].join(":"):e}function i2(r,e,t){const i=KE(),n=VE();return[[r,e].join("-"),[jE,t].join("-"),i,n].join("/")}function GE({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:n,projectId:a,useOnCloseEvent:f,bundleId:u}){const v=t.split("?"),p=i2(r,e,i),y={auth:n,ua:p,projectId:a,useOnCloseEvent:f||void 0,origin:u||void 0},_=HE(v[1]||"",y);return v[0]+"?"+_}function ua(r,e){return r.filter(t=>e.includes(t)).length===r.length}function n2(r){return Object.fromEntries(r.entries())}function s2(r){return new Map(Object.entries(r))}function ca(r=xe.FIVE_MINUTES,e){const t=xe.toMiliseconds(r||xe.FIVE_MINUTES);let i,n,a;return{resolve:f=>{a&&i&&(clearTimeout(a),i(f))},reject:f=>{a&&n&&(clearTimeout(a),n(f))},done:()=>new Promise((f,u)=>{a=setTimeout(()=>{u(new Error(e))},t),i=f,n=u})}}function eo(r,e,t){return new Promise(async(i,n)=>{const a=setTimeout(()=>n(new Error(t)),e);try{const f=await r;i(f)}catch(f){n(f)}clearTimeout(a)})}function a2(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function WE(r){return a2("topic",r)}function JE(r){return a2("id",r)}function o2(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function vr(r,e){return xe.fromMiliseconds((e||Date.now())+xe.toMiliseconds(r))}function Rs(r){return Date.now()>=xe.toMiliseconds(r)}function St(r,e){return`${r}${e?`:${e}`:""}`}function tu(r=[],e=[]){return[...new Set([...r,...e])]}async function YE({id:r,topic:e,wcDeepLink:t}){var i;try{if(!t)return;const n=typeof t=="string"?JSON.parse(t):t,a=n?.href;if(typeof a!="string")return;const f=QE(a,r,e),u=Cc();if(u===wi.browser){if(!((i=Cu())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}f.startsWith("https://")||f.startsWith("http://")?window.open(f,"_blank","noreferrer noopener"):window.open(f,ZE()?"_blank":"_self","noreferrer noopener")}else u===wi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(f)}catch(n){console.error(n)}}function QE(r,e,t){const i=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let n=`${r}`;if(r.startsWith("https://t.me")){const a=r.includes("?")?"&startapp=":"?startapp=";n=`${n}${a}${ex(i,!0)}`}else n=`${n}/wc?${i}`;return n}async function XE(r,e){let t="";try{if(Oc()&&(t=localStorage.getItem(e),t))return t;t=await r.getItem(e)}catch(i){console.error(i)}return t}function eg(r,e){if(!r.includes(e))return null;const t=r.split(/([&,?,=])/),i=t.indexOf(e);return t[i+2]}function tg(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function J0(){return typeof process<"u"&&BE.IS_VITEST==="true"}function ZE(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function ex(r,e=!1){const t=Buffer.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function c2(r){return Buffer.from(r,"base64").toString("utf-8")}var f2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tx(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var u2={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(r){(function(){var e="input is invalid type",t="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",f=!n.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;f?n=f2:a&&(n=self);var u=!n.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,v=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",p="0123456789abcdef".split(""),y=[31,7936,2031616,520093696],_=[4,1024,262144,67108864],O=[1,256,65536,16777216],D=[6,1536,393216,100663296],C=[0,8,16,24],H=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],W=[224,256,384,512],Q=[128,256],z=["hex","buffer","arrayBuffer","array","digest"],Y={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(M){return Object.prototype.toString.call(M)==="[object Array]"}),v&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(M){return typeof M=="object"&&M.buffer&&M.buffer.constructor===ArrayBuffer});for(var q=function(M,ee,B){return function(k){return new N(M,ee,M).update(k)[B]()}},j=function(M,ee,B){return function(k,K){return new N(M,ee,K).update(k)[B]()}},V=function(M,ee,B){return function(k,K,w,U){return l["cshake"+M].update(k,K,w,U)[B]()}},A=function(M,ee,B){return function(k,K,w,U){return l["kmac"+M].update(k,K,w,U)[B]()}},F=function(M,ee,B,k){for(var K=0;K<z.length;++K){var w=z[K];M[w]=ee(B,k,w)}return M},ae=function(M,ee){var B=q(M,ee,"hex");return B.create=function(){return new N(M,ee,M)},B.update=function(k){return B.create().update(k)},F(B,q,M,ee)},de=function(M,ee){var B=j(M,ee,"hex");return B.create=function(k){return new N(M,ee,k)},B.update=function(k,K){return B.create(K).update(k)},F(B,j,M,ee)},$=function(M,ee){var B=Y[M],k=V(M,ee,"hex");return k.create=function(K,w,U){return!w&&!U?l["shake"+M].create(K):new N(M,ee,K).bytepad([w,U],B)},k.update=function(K,w,U,ne){return k.create(w,U,ne).update(K)},F(k,V,M,ee)},m=function(M,ee){var B=Y[M],k=A(M,ee,"hex");return k.create=function(K,w,U){return new Z(M,ee,w).bytepad(["KMAC",U],B).bytepad([K],B)},k.update=function(K,w,U,ne){return k.create(K,U,ne).update(w)},F(k,A,M,ee)},c=[{name:"keccak",padding:O,bits:W,createMethod:ae},{name:"sha3",padding:D,bits:W,createMethod:ae},{name:"shake",padding:y,bits:Q,createMethod:de},{name:"cshake",padding:_,bits:Q,createMethod:$},{name:"kmac",padding:_,bits:Q,createMethod:m}],l={},b=[],x=0;x<c.length;++x)for(var I=c[x],P=I.bits,S=0;S<P.length;++S){var d=I.name+"_"+P[S];if(b.push(d),l[d]=I.createMethod(P[S],I.padding),I.name!=="sha3"){var g=I.name+P[S];b.push(g),l[g]=l[d]}}function N(M,ee,B){this.blocks=[],this.s=[],this.padding=ee,this.outputBits=B,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(M<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=B>>5,this.extraBytes=(B&31)>>3;for(var k=0;k<50;++k)this.s[k]=0}N.prototype.update=function(M){if(this.finalized)throw new Error(t);var ee,B=typeof M;if(B!=="string"){if(B==="object"){if(M===null)throw new Error(e);if(v&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!v||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);ee=!0}for(var k=this.blocks,K=this.byteCount,w=M.length,U=this.blockCount,ne=0,ce=this.s,ue,ye;ne<w;){if(this.reset)for(this.reset=!1,k[0]=this.block,ue=1;ue<U+1;++ue)k[ue]=0;if(ee)for(ue=this.start;ne<w&&ue<K;++ne)k[ue>>2]|=M[ne]<<C[ue++&3];else for(ue=this.start;ne<w&&ue<K;++ne)ye=M.charCodeAt(ne),ye<128?k[ue>>2]|=ye<<C[ue++&3]:ye<2048?(k[ue>>2]|=(192|ye>>6)<<C[ue++&3],k[ue>>2]|=(128|ye&63)<<C[ue++&3]):ye<55296||ye>=57344?(k[ue>>2]|=(224|ye>>12)<<C[ue++&3],k[ue>>2]|=(128|ye>>6&63)<<C[ue++&3],k[ue>>2]|=(128|ye&63)<<C[ue++&3]):(ye=65536+((ye&1023)<<10|M.charCodeAt(++ne)&1023),k[ue>>2]|=(240|ye>>18)<<C[ue++&3],k[ue>>2]|=(128|ye>>12&63)<<C[ue++&3],k[ue>>2]|=(128|ye>>6&63)<<C[ue++&3],k[ue>>2]|=(128|ye&63)<<C[ue++&3]);if(this.lastByteIndex=ue,ue>=K){for(this.start=ue-K,this.block=k[U],ue=0;ue<U;++ue)ce[ue]^=k[ue];se(ce),this.reset=!0}else this.start=ue}return this},N.prototype.encode=function(M,ee){var B=M&255,k=1,K=[B];for(M=M>>8,B=M&255;B>0;)K.unshift(B),M=M>>8,B=M&255,++k;return ee?K.push(k):K.unshift(k),this.update(K),K.length},N.prototype.encodeString=function(M){var ee,B=typeof M;if(B!=="string"){if(B==="object"){if(M===null)throw new Error(e);if(v&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!v||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);ee=!0}var k=0,K=M.length;if(ee)k=K;else for(var w=0;w<M.length;++w){var U=M.charCodeAt(w);U<128?k+=1:U<2048?k+=2:U<55296||U>=57344?k+=3:(U=65536+((U&1023)<<10|M.charCodeAt(++w)&1023),k+=4)}return k+=this.encode(k*8),this.update(M),k},N.prototype.bytepad=function(M,ee){for(var B=this.encode(ee),k=0;k<M.length;++k)B+=this.encodeString(M[k]);var K=ee-B%ee,w=[];return w.length=K,this.update(w),this},N.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var M=this.blocks,ee=this.lastByteIndex,B=this.blockCount,k=this.s;if(M[ee>>2]|=this.padding[ee&3],this.lastByteIndex===this.byteCount)for(M[0]=M[B],ee=1;ee<B+1;++ee)M[ee]=0;for(M[B-1]|=2147483648,ee=0;ee<B;++ee)k[ee]^=M[ee];se(k)}},N.prototype.toString=N.prototype.hex=function(){this.finalize();for(var M=this.blockCount,ee=this.s,B=this.outputBlocks,k=this.extraBytes,K=0,w=0,U="",ne;w<B;){for(K=0;K<M&&w<B;++K,++w)ne=ee[K],U+=p[ne>>4&15]+p[ne&15]+p[ne>>12&15]+p[ne>>8&15]+p[ne>>20&15]+p[ne>>16&15]+p[ne>>28&15]+p[ne>>24&15];w%M===0&&(se(ee),K=0)}return k&&(ne=ee[K],U+=p[ne>>4&15]+p[ne&15],k>1&&(U+=p[ne>>12&15]+p[ne>>8&15]),k>2&&(U+=p[ne>>20&15]+p[ne>>16&15])),U},N.prototype.arrayBuffer=function(){this.finalize();var M=this.blockCount,ee=this.s,B=this.outputBlocks,k=this.extraBytes,K=0,w=0,U=this.outputBits>>3,ne;k?ne=new ArrayBuffer(B+1<<2):ne=new ArrayBuffer(U);for(var ce=new Uint32Array(ne);w<B;){for(K=0;K<M&&w<B;++K,++w)ce[w]=ee[K];w%M===0&&se(ee)}return k&&(ce[K]=ee[K],ne=ne.slice(0,U)),ne},N.prototype.buffer=N.prototype.arrayBuffer,N.prototype.digest=N.prototype.array=function(){this.finalize();for(var M=this.blockCount,ee=this.s,B=this.outputBlocks,k=this.extraBytes,K=0,w=0,U=[],ne,ce;w<B;){for(K=0;K<M&&w<B;++K,++w)ne=w<<2,ce=ee[K],U[ne]=ce&255,U[ne+1]=ce>>8&255,U[ne+2]=ce>>16&255,U[ne+3]=ce>>24&255;w%M===0&&se(ee)}return k&&(ne=w<<2,ce=ee[K],U[ne]=ce&255,k>1&&(U[ne+1]=ce>>8&255),k>2&&(U[ne+2]=ce>>16&255)),U};function Z(M,ee,B){N.call(this,M,ee,B)}Z.prototype=new N,Z.prototype.finalize=function(){return this.encode(this.outputBits,!0),N.prototype.finalize.call(this)};var se=function(M){var ee,B,k,K,w,U,ne,ce,ue,ye,we,Re,Qe,Pe,Ne,Ie,me,Oe,Te,ve,Ce,Se,be,qe,Me,_e,He,Ve,Ee,Ke,ht,Ge,_t,lt,Je,Et,It,Fe,Xe,tt,Be,et,Ze,Ue,ft,rt,ze,it,st,Le,Ye,ut,je,Nt,Tt,at,bt,Cr,Rr,Nr,Tr,Fr,er;for(k=0;k<48;k+=2)K=M[0]^M[10]^M[20]^M[30]^M[40],w=M[1]^M[11]^M[21]^M[31]^M[41],U=M[2]^M[12]^M[22]^M[32]^M[42],ne=M[3]^M[13]^M[23]^M[33]^M[43],ce=M[4]^M[14]^M[24]^M[34]^M[44],ue=M[5]^M[15]^M[25]^M[35]^M[45],ye=M[6]^M[16]^M[26]^M[36]^M[46],we=M[7]^M[17]^M[27]^M[37]^M[47],Re=M[8]^M[18]^M[28]^M[38]^M[48],Qe=M[9]^M[19]^M[29]^M[39]^M[49],ee=Re^(U<<1|ne>>>31),B=Qe^(ne<<1|U>>>31),M[0]^=ee,M[1]^=B,M[10]^=ee,M[11]^=B,M[20]^=ee,M[21]^=B,M[30]^=ee,M[31]^=B,M[40]^=ee,M[41]^=B,ee=K^(ce<<1|ue>>>31),B=w^(ue<<1|ce>>>31),M[2]^=ee,M[3]^=B,M[12]^=ee,M[13]^=B,M[22]^=ee,M[23]^=B,M[32]^=ee,M[33]^=B,M[42]^=ee,M[43]^=B,ee=U^(ye<<1|we>>>31),B=ne^(we<<1|ye>>>31),M[4]^=ee,M[5]^=B,M[14]^=ee,M[15]^=B,M[24]^=ee,M[25]^=B,M[34]^=ee,M[35]^=B,M[44]^=ee,M[45]^=B,ee=ce^(Re<<1|Qe>>>31),B=ue^(Qe<<1|Re>>>31),M[6]^=ee,M[7]^=B,M[16]^=ee,M[17]^=B,M[26]^=ee,M[27]^=B,M[36]^=ee,M[37]^=B,M[46]^=ee,M[47]^=B,ee=ye^(K<<1|w>>>31),B=we^(w<<1|K>>>31),M[8]^=ee,M[9]^=B,M[18]^=ee,M[19]^=B,M[28]^=ee,M[29]^=B,M[38]^=ee,M[39]^=B,M[48]^=ee,M[49]^=B,Pe=M[0],Ne=M[1],rt=M[11]<<4|M[10]>>>28,ze=M[10]<<4|M[11]>>>28,Ve=M[20]<<3|M[21]>>>29,Ee=M[21]<<3|M[20]>>>29,Nr=M[31]<<9|M[30]>>>23,Tr=M[30]<<9|M[31]>>>23,et=M[40]<<18|M[41]>>>14,Ze=M[41]<<18|M[40]>>>14,lt=M[2]<<1|M[3]>>>31,Je=M[3]<<1|M[2]>>>31,Ie=M[13]<<12|M[12]>>>20,me=M[12]<<12|M[13]>>>20,it=M[22]<<10|M[23]>>>22,st=M[23]<<10|M[22]>>>22,Ke=M[33]<<13|M[32]>>>19,ht=M[32]<<13|M[33]>>>19,Fr=M[42]<<2|M[43]>>>30,er=M[43]<<2|M[42]>>>30,Nt=M[5]<<30|M[4]>>>2,Tt=M[4]<<30|M[5]>>>2,Et=M[14]<<6|M[15]>>>26,It=M[15]<<6|M[14]>>>26,Oe=M[25]<<11|M[24]>>>21,Te=M[24]<<11|M[25]>>>21,Le=M[34]<<15|M[35]>>>17,Ye=M[35]<<15|M[34]>>>17,Ge=M[45]<<29|M[44]>>>3,_t=M[44]<<29|M[45]>>>3,qe=M[6]<<28|M[7]>>>4,Me=M[7]<<28|M[6]>>>4,at=M[17]<<23|M[16]>>>9,bt=M[16]<<23|M[17]>>>9,Fe=M[26]<<25|M[27]>>>7,Xe=M[27]<<25|M[26]>>>7,ve=M[36]<<21|M[37]>>>11,Ce=M[37]<<21|M[36]>>>11,ut=M[47]<<24|M[46]>>>8,je=M[46]<<24|M[47]>>>8,Ue=M[8]<<27|M[9]>>>5,ft=M[9]<<27|M[8]>>>5,_e=M[18]<<20|M[19]>>>12,He=M[19]<<20|M[18]>>>12,Cr=M[29]<<7|M[28]>>>25,Rr=M[28]<<7|M[29]>>>25,tt=M[38]<<8|M[39]>>>24,Be=M[39]<<8|M[38]>>>24,Se=M[48]<<14|M[49]>>>18,be=M[49]<<14|M[48]>>>18,M[0]=Pe^~Ie&Oe,M[1]=Ne^~me&Te,M[10]=qe^~_e&Ve,M[11]=Me^~He&Ee,M[20]=lt^~Et&Fe,M[21]=Je^~It&Xe,M[30]=Ue^~rt&it,M[31]=ft^~ze&st,M[40]=Nt^~at&Cr,M[41]=Tt^~bt&Rr,M[2]=Ie^~Oe&ve,M[3]=me^~Te&Ce,M[12]=_e^~Ve&Ke,M[13]=He^~Ee&ht,M[22]=Et^~Fe&tt,M[23]=It^~Xe&Be,M[32]=rt^~it&Le,M[33]=ze^~st&Ye,M[42]=at^~Cr&Nr,M[43]=bt^~Rr&Tr,M[4]=Oe^~ve&Se,M[5]=Te^~Ce&be,M[14]=Ve^~Ke&Ge,M[15]=Ee^~ht&_t,M[24]=Fe^~tt&et,M[25]=Xe^~Be&Ze,M[34]=it^~Le&ut,M[35]=st^~Ye&je,M[44]=Cr^~Nr&Fr,M[45]=Rr^~Tr&er,M[6]=ve^~Se&Pe,M[7]=Ce^~be&Ne,M[16]=Ke^~Ge&qe,M[17]=ht^~_t&Me,M[26]=tt^~et&lt,M[27]=Be^~Ze&Je,M[36]=Le^~ut&Ue,M[37]=Ye^~je&ft,M[46]=Nr^~Fr&Nt,M[47]=Tr^~er&Tt,M[8]=Se^~Pe&Ie,M[9]=be^~Ne&me,M[18]=Ge^~qe&_e,M[19]=_t^~Me&He,M[28]=et^~lt&Et,M[29]=Ze^~Je&It,M[38]=ut^~Ue&rt,M[39]=je^~ft&ze,M[48]=Fr^~Nt&at,M[49]=er^~Tt&bt,M[0]^=H[k],M[1]^=H[k+1]};if(u)r.exports=l;else for(x=0;x<b.length;++x)n[b[x]]=l[b[x]]})()})(u2);var rx=u2.exports;const ix="logger/5.7.0";let rg=!1,ig=!1;const ru={debug:1,default:2,info:2,warning:3,error:4,off:5};let ng=ru.default,Il=null;function nx(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const sg=nx();var p0;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(p0||(p0={}));var un;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(un||(un={}));const ag="0123456789abcdef";let Mr=class gr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const i=e.toLowerCase();ru[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(ng>ru[i])&&console.log.apply(console,t)}debug(...e){this._log(gr.levels.DEBUG,e)}info(...e){this._log(gr.levels.INFO,e)}warn(...e){this._log(gr.levels.WARNING,e)}makeError(e,t,i){if(ig)return this.makeError("censored error",t,{});t||(t=gr.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach(v=>{const p=i[v];try{if(p instanceof Uint8Array){let y="";for(let _=0;_<p.length;_++)y+=ag[p[_]>>4],y+=ag[p[_]&15];n.push(v+"=Uint8Array(0x"+y+")")}else n.push(v+"="+JSON.stringify(p))}catch{n.push(v+"="+JSON.stringify(i[v].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const a=e;let f="";switch(t){case un.NUMERIC_FAULT:{f="NUMERIC_FAULT";const v=e;switch(v){case"overflow":case"underflow":case"division-by-zero":f+="-"+v;break;case"negative-power":case"negative-width":f+="-unsupported";break;case"unbound-bitwise-result":f+="-unbound-result";break}break}case un.CALL_EXCEPTION:case un.INSUFFICIENT_FUNDS:case un.MISSING_NEW:case un.NONCE_EXPIRED:case un.REPLACEMENT_UNDERPRICED:case un.TRANSACTION_REPLACED:case un.UNPREDICTABLE_GAS_LIMIT:f=t;break}f&&(e+=" [ See: https://links.ethers.org/v5-errors-"+f+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const u=new Error(e);return u.reason=a,u.code=t,Object.keys(i).forEach(function(v){u[v]=i[v]}),u}throwError(e,t,i){throw this.makeError(e,t,i)}throwArgumentError(e,t,i){return this.throwError(e,gr.errors.INVALID_ARGUMENT,{argument:t,value:i})}assert(e,t,i,n){e||this.throwError(t,i,n)}assertArgument(e,t,i,n){e||this.throwArgumentError(t,i,n)}checkNormalize(e){sg&&this.throwError("platform missing String.prototype.normalize",gr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:sg})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,gr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,gr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,i){i?i=": "+i:i="",e<t&&this.throwError("missing argument"+i,gr.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+i,gr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",gr.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",gr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",gr.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Il||(Il=new gr(ix)),Il}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",gr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),rg){if(!e)return;this.globalLogger().throwError("error censorship permanent",gr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ig=!!e,rg=!!t}static setLogLevel(e){const t=ru[e.toLowerCase()];if(t==null){gr.globalLogger().warn("invalid log level - "+e);return}ng=t}static from(e){return new gr(e)}};Mr.errors=un,Mr.levels=p0;const sx="bytes/5.7.0",cr=new Mr(sx);function h2(r){return!!r.toHexString}function to(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return to(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function ax(r){return _i(r)&&!(r.length%2)||yo(r)}function og(r){return typeof r=="number"&&r==r&&r%1===0}function yo(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!og(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!og(t)||t<0||t>=256)return!1}return!0}function ir(r,e){if(e||(e={}),typeof r=="number"){cr.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),to(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),h2(r)&&(r=r.toHexString()),_i(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":cr.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let n=0;n<t.length;n+=2)i.push(parseInt(t.substring(n,n+2),16));return to(new Uint8Array(i))}return yo(r)?to(new Uint8Array(r)):cr.throwArgumentError("invalid arrayify value","value",r)}function ox(r){const e=r.map(n=>ir(n)),t=e.reduce((n,a)=>n+a.length,0),i=new Uint8Array(t);return e.reduce((n,a)=>(i.set(a,n),n+a.length),0),to(i)}function cx(r,e){r=ir(r),r.length>e&&cr.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),to(t)}function _i(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const Ml="0123456789abcdef";function Vr(r,e){if(e||(e={}),typeof r=="number"){cr.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Ml[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),h2(r))return r.toHexString();if(_i(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":cr.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(yo(r)){let t="0x";for(let i=0;i<r.length;i++){let n=r[i];t+=Ml[(n&240)>>4]+Ml[n&15]}return t}return cr.throwArgumentError("invalid hexlify value","value",r)}function fx(r){if(typeof r!="string")r=Vr(r);else if(!_i(r)||r.length%2)return null;return(r.length-2)/2}function cg(r,e,t){return typeof r!="string"?r=Vr(r):(!_i(r)||r.length%2)&&cr.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function Bn(r,e){for(typeof r!="string"?r=Vr(r):_i(r)||cr.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&cr.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function l2(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(ax(r)){let t=ir(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Vr(t.slice(0,32)),e.s=Vr(t.slice(32,64))):t.length===65?(e.r=Vr(t.slice(0,32)),e.s=Vr(t.slice(32,64)),e.v=t[64]):cr.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:cr.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Vr(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const n=cx(ir(e._vs),32);e._vs=Vr(n);const a=n[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=a:e.recoveryParam!==a&&cr.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),n[0]&=127;const f=Vr(n);e.s==null?e.s=f:e.s!==f&&cr.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?cr.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const n=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==n&&cr.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!_i(e.r)?cr.throwArgumentError("signature missing or invalid r","signature",r):e.r=Bn(e.r,32),e.s==null||!_i(e.s)?cr.throwArgumentError("signature missing or invalid s","signature",r):e.s=Bn(e.s,32);const t=ir(e.s);t[0]>=128&&cr.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const i=Vr(t);e._vs&&(_i(e._vs)||cr.throwArgumentError("signature invalid _vs","signature",r),e._vs=Bn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&cr.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Y0(r){return"0x"+rx.keccak_256(ir(r))}var d2={exports:{}},ux={},hx=Object.freeze({__proto__:null,default:ux}),lx=tx(hx);(function(r){(function(e,t){function i(c,l){if(!c)throw new Error(l||"Assertion failed")}function n(c,l){c.super_=l;var b=function(){};b.prototype=l.prototype,c.prototype=new b,c.prototype.constructor=c}function a(c,l,b){if(a.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((l==="le"||l==="be")&&(b=l,l=10),this._init(c||0,l||10,b||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=lx.Buffer}catch{}a.isBN=function(c){return c instanceof a?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===a.wordSize&&Array.isArray(c.words)},a.max=function(c,l){return c.cmp(l)>0?c:l},a.min=function(c,l){return c.cmp(l)<0?c:l},a.prototype._init=function(c,l,b){if(typeof c=="number")return this._initNumber(c,l,b);if(typeof c=="object")return this._initArray(c,l,b);l==="hex"&&(l=16),i(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var x=0;c[0]==="-"&&(x++,this.negative=1),x<c.length&&(l===16?this._parseHex(c,x,b):(this._parseBase(c,l,x),b==="le"&&this._initArray(this.toArray(),l,b)))},a.prototype._initNumber=function(c,l,b){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(i(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),l,b)},a.prototype._initArray=function(c,l,b){if(i(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var I,P,S=0;if(b==="be")for(x=c.length-1,I=0;x>=0;x-=3)P=c[x]|c[x-1]<<8|c[x-2]<<16,this.words[I]|=P<<S&67108863,this.words[I+1]=P>>>26-S&67108863,S+=24,S>=26&&(S-=26,I++);else if(b==="le")for(x=0,I=0;x<c.length;x+=3)P=c[x]|c[x+1]<<8|c[x+2]<<16,this.words[I]|=P<<S&67108863,this.words[I+1]=P>>>26-S&67108863,S+=24,S>=26&&(S-=26,I++);return this._strip()};function u(c,l){var b=c.charCodeAt(l);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;i(!1,"Invalid character in "+c)}function v(c,l,b){var x=u(c,b);return b-1>=l&&(x|=u(c,b-1)<<4),x}a.prototype._parseHex=function(c,l,b){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var I=0,P=0,S;if(b==="be")for(x=c.length-1;x>=l;x-=2)S=v(c,l,x)<<I,this.words[P]|=S&67108863,I>=18?(I-=18,P+=1,this.words[P]|=S>>>26):I+=8;else{var d=c.length-l;for(x=d%2===0?l+1:l;x<c.length;x+=2)S=v(c,l,x)<<I,this.words[P]|=S&67108863,I>=18?(I-=18,P+=1,this.words[P]|=S>>>26):I+=8}this._strip()};function p(c,l,b,x){for(var I=0,P=0,S=Math.min(c.length,b),d=l;d<S;d++){var g=c.charCodeAt(d)-48;I*=x,g>=49?P=g-49+10:g>=17?P=g-17+10:P=g,i(g>=0&&P<x,"Invalid character"),I+=P}return I}a.prototype._parseBase=function(c,l,b){this.words=[0],this.length=1;for(var x=0,I=1;I<=67108863;I*=l)x++;x--,I=I/l|0;for(var P=c.length-b,S=P%x,d=Math.min(P,P-S)+b,g=0,N=b;N<d;N+=x)g=p(c,N,N+x,l),this.imuln(I),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(S!==0){var Z=1;for(g=p(c,N,c.length,l),N=0;N<S;N++)Z*=l;this.imuln(Z),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this._strip()},a.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red};function y(c,l){c.words=l.words,c.length=l.length,c.negative=l.negative,c.red=l.red}if(a.prototype._move=function(c){y(c,this)},a.prototype.clone=function(){var c=new a(null);return this.copy(c),c},a.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{a.prototype.inspect=_}else a.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var O=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(c,l){c=c||10,l=l|0||1;var b;if(c===16||c==="hex"){b="";for(var x=0,I=0,P=0;P<this.length;P++){var S=this.words[P],d=((S<<x|I)&16777215).toString(16);I=S>>>24-x&16777215,x+=2,x>=26&&(x-=26,P--),I!==0||P!==this.length-1?b=O[6-d.length]+d+b:b=d+b}for(I!==0&&(b=I.toString(16)+b);b.length%l!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(c===(c|0)&&c>=2&&c<=36){var g=D[c],N=C[c];b="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var se=Z.modrn(N).toString(c);Z=Z.idivn(N),Z.isZero()?b=se+b:b=O[g-se.length]+se+b}for(this.isZero()&&(b="0"+b);b.length%l!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},a.prototype.toJSON=function(){return this.toString(16,2)},f&&(a.prototype.toBuffer=function(c,l){return this.toArrayLike(f,c,l)}),a.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)};var H=function(c,l){return c.allocUnsafe?c.allocUnsafe(l):new c(l)};a.prototype.toArrayLike=function(c,l,b){this._strip();var x=this.byteLength(),I=b||Math.max(1,x);i(x<=I,"byte array longer than desired length"),i(I>0,"Requested array length <= 0");var P=H(c,I),S=l==="le"?"LE":"BE";return this["_toArrayLike"+S](P,x),P},a.prototype._toArrayLikeLE=function(c,l){for(var b=0,x=0,I=0,P=0;I<this.length;I++){var S=this.words[I]<<P|x;c[b++]=S&255,b<c.length&&(c[b++]=S>>8&255),b<c.length&&(c[b++]=S>>16&255),P===6?(b<c.length&&(c[b++]=S>>24&255),x=0,P=0):(x=S>>>24,P+=2)}if(b<c.length)for(c[b++]=x;b<c.length;)c[b++]=0},a.prototype._toArrayLikeBE=function(c,l){for(var b=c.length-1,x=0,I=0,P=0;I<this.length;I++){var S=this.words[I]<<P|x;c[b--]=S&255,b>=0&&(c[b--]=S>>8&255),b>=0&&(c[b--]=S>>16&255),P===6?(b>=0&&(c[b--]=S>>24&255),x=0,P=0):(x=S>>>24,P+=2)}if(b>=0)for(c[b--]=x;b>=0;)c[b--]=0},Math.clz32?a.prototype._countBits=function(c){return 32-Math.clz32(c)}:a.prototype._countBits=function(c){var l=c,b=0;return l>=4096&&(b+=13,l>>>=13),l>=64&&(b+=7,l>>>=7),l>=8&&(b+=4,l>>>=4),l>=2&&(b+=2,l>>>=2),b+l},a.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,b=0;return l&8191||(b+=13,l>>>=13),l&127||(b+=7,l>>>=7),l&15||(b+=4,l>>>=4),l&3||(b+=2,l>>>=2),l&1||b++,b},a.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function W(c){for(var l=new Array(c.bitLength()),b=0;b<l.length;b++){var x=b/26|0,I=b%26;l[b]=c.words[x]>>>I&1}return l}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var b=this._zeroBits(this.words[l]);if(c+=b,b!==26)break}return c},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},a.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this._strip()},a.prototype.ior=function(c){return i((this.negative|c.negative)===0),this.iuor(c)},a.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},a.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},a.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var b=0;b<l.length;b++)this.words[b]=this.words[b]&c.words[b];return this.length=l.length,this._strip()},a.prototype.iand=function(c){return i((this.negative|c.negative)===0),this.iuand(c)},a.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},a.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},a.prototype.iuxor=function(c){var l,b;this.length>c.length?(l=this,b=c):(l=c,b=this);for(var x=0;x<b.length;x++)this.words[x]=l.words[x]^b.words[x];if(this!==l)for(;x<l.length;x++)this.words[x]=l.words[x];return this.length=l.length,this._strip()},a.prototype.ixor=function(c){return i((this.negative|c.negative)===0),this.iuxor(c)},a.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},a.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},a.prototype.inotn=function(c){i(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,b=c%26;this._expand(l),b>0&&l--;for(var x=0;x<l;x++)this.words[x]=~this.words[x]&67108863;return b>0&&(this.words[x]=~this.words[x]&67108863>>26-b),this._strip()},a.prototype.notn=function(c){return this.clone().inotn(c)},a.prototype.setn=function(c,l){i(typeof c=="number"&&c>=0);var b=c/26|0,x=c%26;return this._expand(b+1),l?this.words[b]=this.words[b]|1<<x:this.words[b]=this.words[b]&~(1<<x),this._strip()},a.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var b,x;this.length>c.length?(b=this,x=c):(b=c,x=this);for(var I=0,P=0;P<x.length;P++)l=(b.words[P]|0)+(x.words[P]|0)+I,this.words[P]=l&67108863,I=l>>>26;for(;I!==0&&P<b.length;P++)l=(b.words[P]|0)+I,this.words[P]=l&67108863,I=l>>>26;if(this.length=b.length,I!==0)this.words[this.length]=I,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},a.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},a.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var b=this.cmp(c);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,I;b>0?(x=this,I=c):(x=c,I=this);for(var P=0,S=0;S<I.length;S++)l=(x.words[S]|0)-(I.words[S]|0)+P,P=l>>26,this.words[S]=l&67108863;for(;P!==0&&S<x.length;S++)l=(x.words[S]|0)+P,P=l>>26,this.words[S]=l&67108863;if(P===0&&S<x.length&&x!==this)for(;S<x.length;S++)this.words[S]=x.words[S];return this.length=Math.max(this.length,S),x!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(c){return this.clone().isub(c)};function Q(c,l,b){b.negative=l.negative^c.negative;var x=c.length+l.length|0;b.length=x,x=x-1|0;var I=c.words[0]|0,P=l.words[0]|0,S=I*P,d=S&67108863,g=S/67108864|0;b.words[0]=d;for(var N=1;N<x;N++){for(var Z=g>>>26,se=g&67108863,M=Math.min(N,l.length-1),ee=Math.max(0,N-c.length+1);ee<=M;ee++){var B=N-ee|0;I=c.words[B]|0,P=l.words[ee]|0,S=I*P+se,Z+=S/67108864|0,se=S&67108863}b.words[N]=se|0,g=Z|0}return g!==0?b.words[N]=g|0:b.length--,b._strip()}var z=function(c,l,b){var x=c.words,I=l.words,P=b.words,S=0,d,g,N,Z=x[0]|0,se=Z&8191,M=Z>>>13,ee=x[1]|0,B=ee&8191,k=ee>>>13,K=x[2]|0,w=K&8191,U=K>>>13,ne=x[3]|0,ce=ne&8191,ue=ne>>>13,ye=x[4]|0,we=ye&8191,Re=ye>>>13,Qe=x[5]|0,Pe=Qe&8191,Ne=Qe>>>13,Ie=x[6]|0,me=Ie&8191,Oe=Ie>>>13,Te=x[7]|0,ve=Te&8191,Ce=Te>>>13,Se=x[8]|0,be=Se&8191,qe=Se>>>13,Me=x[9]|0,_e=Me&8191,He=Me>>>13,Ve=I[0]|0,Ee=Ve&8191,Ke=Ve>>>13,ht=I[1]|0,Ge=ht&8191,_t=ht>>>13,lt=I[2]|0,Je=lt&8191,Et=lt>>>13,It=I[3]|0,Fe=It&8191,Xe=It>>>13,tt=I[4]|0,Be=tt&8191,et=tt>>>13,Ze=I[5]|0,Ue=Ze&8191,ft=Ze>>>13,rt=I[6]|0,ze=rt&8191,it=rt>>>13,st=I[7]|0,Le=st&8191,Ye=st>>>13,ut=I[8]|0,je=ut&8191,Nt=ut>>>13,Tt=I[9]|0,at=Tt&8191,bt=Tt>>>13;b.negative=c.negative^l.negative,b.length=19,d=Math.imul(se,Ee),g=Math.imul(se,Ke),g=g+Math.imul(M,Ee)|0,N=Math.imul(M,Ke);var Cr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(B,Ee),g=Math.imul(B,Ke),g=g+Math.imul(k,Ee)|0,N=Math.imul(k,Ke),d=d+Math.imul(se,Ge)|0,g=g+Math.imul(se,_t)|0,g=g+Math.imul(M,Ge)|0,N=N+Math.imul(M,_t)|0;var Rr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(w,Ee),g=Math.imul(w,Ke),g=g+Math.imul(U,Ee)|0,N=Math.imul(U,Ke),d=d+Math.imul(B,Ge)|0,g=g+Math.imul(B,_t)|0,g=g+Math.imul(k,Ge)|0,N=N+Math.imul(k,_t)|0,d=d+Math.imul(se,Je)|0,g=g+Math.imul(se,Et)|0,g=g+Math.imul(M,Je)|0,N=N+Math.imul(M,Et)|0;var Nr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,d=Math.imul(ce,Ee),g=Math.imul(ce,Ke),g=g+Math.imul(ue,Ee)|0,N=Math.imul(ue,Ke),d=d+Math.imul(w,Ge)|0,g=g+Math.imul(w,_t)|0,g=g+Math.imul(U,Ge)|0,N=N+Math.imul(U,_t)|0,d=d+Math.imul(B,Je)|0,g=g+Math.imul(B,Et)|0,g=g+Math.imul(k,Je)|0,N=N+Math.imul(k,Et)|0,d=d+Math.imul(se,Fe)|0,g=g+Math.imul(se,Xe)|0,g=g+Math.imul(M,Fe)|0,N=N+Math.imul(M,Xe)|0;var Tr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,d=Math.imul(we,Ee),g=Math.imul(we,Ke),g=g+Math.imul(Re,Ee)|0,N=Math.imul(Re,Ke),d=d+Math.imul(ce,Ge)|0,g=g+Math.imul(ce,_t)|0,g=g+Math.imul(ue,Ge)|0,N=N+Math.imul(ue,_t)|0,d=d+Math.imul(w,Je)|0,g=g+Math.imul(w,Et)|0,g=g+Math.imul(U,Je)|0,N=N+Math.imul(U,Et)|0,d=d+Math.imul(B,Fe)|0,g=g+Math.imul(B,Xe)|0,g=g+Math.imul(k,Fe)|0,N=N+Math.imul(k,Xe)|0,d=d+Math.imul(se,Be)|0,g=g+Math.imul(se,et)|0,g=g+Math.imul(M,Be)|0,N=N+Math.imul(M,et)|0;var Fr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,d=Math.imul(Pe,Ee),g=Math.imul(Pe,Ke),g=g+Math.imul(Ne,Ee)|0,N=Math.imul(Ne,Ke),d=d+Math.imul(we,Ge)|0,g=g+Math.imul(we,_t)|0,g=g+Math.imul(Re,Ge)|0,N=N+Math.imul(Re,_t)|0,d=d+Math.imul(ce,Je)|0,g=g+Math.imul(ce,Et)|0,g=g+Math.imul(ue,Je)|0,N=N+Math.imul(ue,Et)|0,d=d+Math.imul(w,Fe)|0,g=g+Math.imul(w,Xe)|0,g=g+Math.imul(U,Fe)|0,N=N+Math.imul(U,Xe)|0,d=d+Math.imul(B,Be)|0,g=g+Math.imul(B,et)|0,g=g+Math.imul(k,Be)|0,N=N+Math.imul(k,et)|0,d=d+Math.imul(se,Ue)|0,g=g+Math.imul(se,ft)|0,g=g+Math.imul(M,Ue)|0,N=N+Math.imul(M,ft)|0;var er=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(er>>>26)|0,er&=67108863,d=Math.imul(me,Ee),g=Math.imul(me,Ke),g=g+Math.imul(Oe,Ee)|0,N=Math.imul(Oe,Ke),d=d+Math.imul(Pe,Ge)|0,g=g+Math.imul(Pe,_t)|0,g=g+Math.imul(Ne,Ge)|0,N=N+Math.imul(Ne,_t)|0,d=d+Math.imul(we,Je)|0,g=g+Math.imul(we,Et)|0,g=g+Math.imul(Re,Je)|0,N=N+Math.imul(Re,Et)|0,d=d+Math.imul(ce,Fe)|0,g=g+Math.imul(ce,Xe)|0,g=g+Math.imul(ue,Fe)|0,N=N+Math.imul(ue,Xe)|0,d=d+Math.imul(w,Be)|0,g=g+Math.imul(w,et)|0,g=g+Math.imul(U,Be)|0,N=N+Math.imul(U,et)|0,d=d+Math.imul(B,Ue)|0,g=g+Math.imul(B,ft)|0,g=g+Math.imul(k,Ue)|0,N=N+Math.imul(k,ft)|0,d=d+Math.imul(se,ze)|0,g=g+Math.imul(se,it)|0,g=g+Math.imul(M,ze)|0,N=N+Math.imul(M,it)|0;var Xr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,d=Math.imul(ve,Ee),g=Math.imul(ve,Ke),g=g+Math.imul(Ce,Ee)|0,N=Math.imul(Ce,Ke),d=d+Math.imul(me,Ge)|0,g=g+Math.imul(me,_t)|0,g=g+Math.imul(Oe,Ge)|0,N=N+Math.imul(Oe,_t)|0,d=d+Math.imul(Pe,Je)|0,g=g+Math.imul(Pe,Et)|0,g=g+Math.imul(Ne,Je)|0,N=N+Math.imul(Ne,Et)|0,d=d+Math.imul(we,Fe)|0,g=g+Math.imul(we,Xe)|0,g=g+Math.imul(Re,Fe)|0,N=N+Math.imul(Re,Xe)|0,d=d+Math.imul(ce,Be)|0,g=g+Math.imul(ce,et)|0,g=g+Math.imul(ue,Be)|0,N=N+Math.imul(ue,et)|0,d=d+Math.imul(w,Ue)|0,g=g+Math.imul(w,ft)|0,g=g+Math.imul(U,Ue)|0,N=N+Math.imul(U,ft)|0,d=d+Math.imul(B,ze)|0,g=g+Math.imul(B,it)|0,g=g+Math.imul(k,ze)|0,N=N+Math.imul(k,it)|0,d=d+Math.imul(se,Le)|0,g=g+Math.imul(se,Ye)|0,g=g+Math.imul(M,Le)|0,N=N+Math.imul(M,Ye)|0;var Gi=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,d=Math.imul(be,Ee),g=Math.imul(be,Ke),g=g+Math.imul(qe,Ee)|0,N=Math.imul(qe,Ke),d=d+Math.imul(ve,Ge)|0,g=g+Math.imul(ve,_t)|0,g=g+Math.imul(Ce,Ge)|0,N=N+Math.imul(Ce,_t)|0,d=d+Math.imul(me,Je)|0,g=g+Math.imul(me,Et)|0,g=g+Math.imul(Oe,Je)|0,N=N+Math.imul(Oe,Et)|0,d=d+Math.imul(Pe,Fe)|0,g=g+Math.imul(Pe,Xe)|0,g=g+Math.imul(Ne,Fe)|0,N=N+Math.imul(Ne,Xe)|0,d=d+Math.imul(we,Be)|0,g=g+Math.imul(we,et)|0,g=g+Math.imul(Re,Be)|0,N=N+Math.imul(Re,et)|0,d=d+Math.imul(ce,Ue)|0,g=g+Math.imul(ce,ft)|0,g=g+Math.imul(ue,Ue)|0,N=N+Math.imul(ue,ft)|0,d=d+Math.imul(w,ze)|0,g=g+Math.imul(w,it)|0,g=g+Math.imul(U,ze)|0,N=N+Math.imul(U,it)|0,d=d+Math.imul(B,Le)|0,g=g+Math.imul(B,Ye)|0,g=g+Math.imul(k,Le)|0,N=N+Math.imul(k,Ye)|0,d=d+Math.imul(se,je)|0,g=g+Math.imul(se,Nt)|0,g=g+Math.imul(M,je)|0,N=N+Math.imul(M,Nt)|0;var Zr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,d=Math.imul(_e,Ee),g=Math.imul(_e,Ke),g=g+Math.imul(He,Ee)|0,N=Math.imul(He,Ke),d=d+Math.imul(be,Ge)|0,g=g+Math.imul(be,_t)|0,g=g+Math.imul(qe,Ge)|0,N=N+Math.imul(qe,_t)|0,d=d+Math.imul(ve,Je)|0,g=g+Math.imul(ve,Et)|0,g=g+Math.imul(Ce,Je)|0,N=N+Math.imul(Ce,Et)|0,d=d+Math.imul(me,Fe)|0,g=g+Math.imul(me,Xe)|0,g=g+Math.imul(Oe,Fe)|0,N=N+Math.imul(Oe,Xe)|0,d=d+Math.imul(Pe,Be)|0,g=g+Math.imul(Pe,et)|0,g=g+Math.imul(Ne,Be)|0,N=N+Math.imul(Ne,et)|0,d=d+Math.imul(we,Ue)|0,g=g+Math.imul(we,ft)|0,g=g+Math.imul(Re,Ue)|0,N=N+Math.imul(Re,ft)|0,d=d+Math.imul(ce,ze)|0,g=g+Math.imul(ce,it)|0,g=g+Math.imul(ue,ze)|0,N=N+Math.imul(ue,it)|0,d=d+Math.imul(w,Le)|0,g=g+Math.imul(w,Ye)|0,g=g+Math.imul(U,Le)|0,N=N+Math.imul(U,Ye)|0,d=d+Math.imul(B,je)|0,g=g+Math.imul(B,Nt)|0,g=g+Math.imul(k,je)|0,N=N+Math.imul(k,Nt)|0,d=d+Math.imul(se,at)|0,g=g+Math.imul(se,bt)|0,g=g+Math.imul(M,at)|0,N=N+Math.imul(M,bt)|0;var Wi=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,d=Math.imul(_e,Ge),g=Math.imul(_e,_t),g=g+Math.imul(He,Ge)|0,N=Math.imul(He,_t),d=d+Math.imul(be,Je)|0,g=g+Math.imul(be,Et)|0,g=g+Math.imul(qe,Je)|0,N=N+Math.imul(qe,Et)|0,d=d+Math.imul(ve,Fe)|0,g=g+Math.imul(ve,Xe)|0,g=g+Math.imul(Ce,Fe)|0,N=N+Math.imul(Ce,Xe)|0,d=d+Math.imul(me,Be)|0,g=g+Math.imul(me,et)|0,g=g+Math.imul(Oe,Be)|0,N=N+Math.imul(Oe,et)|0,d=d+Math.imul(Pe,Ue)|0,g=g+Math.imul(Pe,ft)|0,g=g+Math.imul(Ne,Ue)|0,N=N+Math.imul(Ne,ft)|0,d=d+Math.imul(we,ze)|0,g=g+Math.imul(we,it)|0,g=g+Math.imul(Re,ze)|0,N=N+Math.imul(Re,it)|0,d=d+Math.imul(ce,Le)|0,g=g+Math.imul(ce,Ye)|0,g=g+Math.imul(ue,Le)|0,N=N+Math.imul(ue,Ye)|0,d=d+Math.imul(w,je)|0,g=g+Math.imul(w,Nt)|0,g=g+Math.imul(U,je)|0,N=N+Math.imul(U,Nt)|0,d=d+Math.imul(B,at)|0,g=g+Math.imul(B,bt)|0,g=g+Math.imul(k,at)|0,N=N+Math.imul(k,bt)|0;var Ji=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,d=Math.imul(_e,Je),g=Math.imul(_e,Et),g=g+Math.imul(He,Je)|0,N=Math.imul(He,Et),d=d+Math.imul(be,Fe)|0,g=g+Math.imul(be,Xe)|0,g=g+Math.imul(qe,Fe)|0,N=N+Math.imul(qe,Xe)|0,d=d+Math.imul(ve,Be)|0,g=g+Math.imul(ve,et)|0,g=g+Math.imul(Ce,Be)|0,N=N+Math.imul(Ce,et)|0,d=d+Math.imul(me,Ue)|0,g=g+Math.imul(me,ft)|0,g=g+Math.imul(Oe,Ue)|0,N=N+Math.imul(Oe,ft)|0,d=d+Math.imul(Pe,ze)|0,g=g+Math.imul(Pe,it)|0,g=g+Math.imul(Ne,ze)|0,N=N+Math.imul(Ne,it)|0,d=d+Math.imul(we,Le)|0,g=g+Math.imul(we,Ye)|0,g=g+Math.imul(Re,Le)|0,N=N+Math.imul(Re,Ye)|0,d=d+Math.imul(ce,je)|0,g=g+Math.imul(ce,Nt)|0,g=g+Math.imul(ue,je)|0,N=N+Math.imul(ue,Nt)|0,d=d+Math.imul(w,at)|0,g=g+Math.imul(w,bt)|0,g=g+Math.imul(U,at)|0,N=N+Math.imul(U,bt)|0;var ei=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(ei>>>26)|0,ei&=67108863,d=Math.imul(_e,Fe),g=Math.imul(_e,Xe),g=g+Math.imul(He,Fe)|0,N=Math.imul(He,Xe),d=d+Math.imul(be,Be)|0,g=g+Math.imul(be,et)|0,g=g+Math.imul(qe,Be)|0,N=N+Math.imul(qe,et)|0,d=d+Math.imul(ve,Ue)|0,g=g+Math.imul(ve,ft)|0,g=g+Math.imul(Ce,Ue)|0,N=N+Math.imul(Ce,ft)|0,d=d+Math.imul(me,ze)|0,g=g+Math.imul(me,it)|0,g=g+Math.imul(Oe,ze)|0,N=N+Math.imul(Oe,it)|0,d=d+Math.imul(Pe,Le)|0,g=g+Math.imul(Pe,Ye)|0,g=g+Math.imul(Ne,Le)|0,N=N+Math.imul(Ne,Ye)|0,d=d+Math.imul(we,je)|0,g=g+Math.imul(we,Nt)|0,g=g+Math.imul(Re,je)|0,N=N+Math.imul(Re,Nt)|0,d=d+Math.imul(ce,at)|0,g=g+Math.imul(ce,bt)|0,g=g+Math.imul(ue,at)|0,N=N+Math.imul(ue,bt)|0;var Si=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Si>>>26)|0,Si&=67108863,d=Math.imul(_e,Be),g=Math.imul(_e,et),g=g+Math.imul(He,Be)|0,N=Math.imul(He,et),d=d+Math.imul(be,Ue)|0,g=g+Math.imul(be,ft)|0,g=g+Math.imul(qe,Ue)|0,N=N+Math.imul(qe,ft)|0,d=d+Math.imul(ve,ze)|0,g=g+Math.imul(ve,it)|0,g=g+Math.imul(Ce,ze)|0,N=N+Math.imul(Ce,it)|0,d=d+Math.imul(me,Le)|0,g=g+Math.imul(me,Ye)|0,g=g+Math.imul(Oe,Le)|0,N=N+Math.imul(Oe,Ye)|0,d=d+Math.imul(Pe,je)|0,g=g+Math.imul(Pe,Nt)|0,g=g+Math.imul(Ne,je)|0,N=N+Math.imul(Ne,Nt)|0,d=d+Math.imul(we,at)|0,g=g+Math.imul(we,bt)|0,g=g+Math.imul(Re,at)|0,N=N+Math.imul(Re,bt)|0;var Ii=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,d=Math.imul(_e,Ue),g=Math.imul(_e,ft),g=g+Math.imul(He,Ue)|0,N=Math.imul(He,ft),d=d+Math.imul(be,ze)|0,g=g+Math.imul(be,it)|0,g=g+Math.imul(qe,ze)|0,N=N+Math.imul(qe,it)|0,d=d+Math.imul(ve,Le)|0,g=g+Math.imul(ve,Ye)|0,g=g+Math.imul(Ce,Le)|0,N=N+Math.imul(Ce,Ye)|0,d=d+Math.imul(me,je)|0,g=g+Math.imul(me,Nt)|0,g=g+Math.imul(Oe,je)|0,N=N+Math.imul(Oe,Nt)|0,d=d+Math.imul(Pe,at)|0,g=g+Math.imul(Pe,bt)|0,g=g+Math.imul(Ne,at)|0,N=N+Math.imul(Ne,bt)|0;var lr=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(lr>>>26)|0,lr&=67108863,d=Math.imul(_e,ze),g=Math.imul(_e,it),g=g+Math.imul(He,ze)|0,N=Math.imul(He,it),d=d+Math.imul(be,Le)|0,g=g+Math.imul(be,Ye)|0,g=g+Math.imul(qe,Le)|0,N=N+Math.imul(qe,Ye)|0,d=d+Math.imul(ve,je)|0,g=g+Math.imul(ve,Nt)|0,g=g+Math.imul(Ce,je)|0,N=N+Math.imul(Ce,Nt)|0,d=d+Math.imul(me,at)|0,g=g+Math.imul(me,bt)|0,g=g+Math.imul(Oe,at)|0,N=N+Math.imul(Oe,bt)|0;var Yi=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,d=Math.imul(_e,Le),g=Math.imul(_e,Ye),g=g+Math.imul(He,Le)|0,N=Math.imul(He,Ye),d=d+Math.imul(be,je)|0,g=g+Math.imul(be,Nt)|0,g=g+Math.imul(qe,je)|0,N=N+Math.imul(qe,Nt)|0,d=d+Math.imul(ve,at)|0,g=g+Math.imul(ve,bt)|0,g=g+Math.imul(Ce,at)|0,N=N+Math.imul(Ce,bt)|0;var Qi=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,d=Math.imul(_e,je),g=Math.imul(_e,Nt),g=g+Math.imul(He,je)|0,N=Math.imul(He,Nt),d=d+Math.imul(be,at)|0,g=g+Math.imul(be,bt)|0,g=g+Math.imul(qe,at)|0,N=N+Math.imul(qe,bt)|0;var Xi=(S+d|0)+((g&8191)<<13)|0;S=(N+(g>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,d=Math.imul(_e,at),g=Math.imul(_e,bt),g=g+Math.imul(He,at)|0,N=Math.imul(He,bt);var ks=(S+d|0)+((g&8191)<<13)|0;return S=(N+(g>>>13)|0)+(ks>>>26)|0,ks&=67108863,P[0]=Cr,P[1]=Rr,P[2]=Nr,P[3]=Tr,P[4]=Fr,P[5]=er,P[6]=Xr,P[7]=Gi,P[8]=Zr,P[9]=Wi,P[10]=Ji,P[11]=ei,P[12]=Si,P[13]=Ii,P[14]=lr,P[15]=Yi,P[16]=Qi,P[17]=Xi,P[18]=ks,S!==0&&(P[19]=S,b.length++),b};Math.imul||(z=Q);function Y(c,l,b){b.negative=l.negative^c.negative,b.length=c.length+l.length;for(var x=0,I=0,P=0;P<b.length-1;P++){var S=I;I=0;for(var d=x&67108863,g=Math.min(P,l.length-1),N=Math.max(0,P-c.length+1);N<=g;N++){var Z=P-N,se=c.words[Z]|0,M=l.words[N]|0,ee=se*M,B=ee&67108863;S=S+(ee/67108864|0)|0,B=B+d|0,d=B&67108863,S=S+(B>>>26)|0,I+=S>>>26,S&=67108863}b.words[P]=d,x=S,S=I}return x!==0?b.words[P]=x:b.length--,b._strip()}function q(c,l,b){return Y(c,l,b)}a.prototype.mulTo=function(c,l){var b,x=this.length+c.length;return this.length===10&&c.length===10?b=z(this,c,l):x<63?b=Q(this,c,l):x<1024?b=Y(this,c,l):b=q(this,c,l),b},a.prototype.mul=function(c){var l=new a(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},a.prototype.mulf=function(c){var l=new a(null);return l.words=new Array(this.length+c.length),q(this,c,l)},a.prototype.imul=function(c){return this.clone().mulTo(c,this)},a.prototype.imuln=function(c){var l=c<0;l&&(c=-c),i(typeof c=="number"),i(c<67108864);for(var b=0,x=0;x<this.length;x++){var I=(this.words[x]|0)*c,P=(I&67108863)+(b&67108863);b>>=26,b+=I/67108864|0,b+=P>>>26,this.words[x]=P&67108863}return b!==0&&(this.words[x]=b,this.length++),l?this.ineg():this},a.prototype.muln=function(c){return this.clone().imuln(c)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(c){var l=W(c);if(l.length===0)return new a(1);for(var b=this,x=0;x<l.length&&l[x]===0;x++,b=b.sqr());if(++x<l.length)for(var I=b.sqr();x<l.length;x++,I=I.sqr())l[x]!==0&&(b=b.mul(I));return b},a.prototype.iushln=function(c){i(typeof c=="number"&&c>=0);var l=c%26,b=(c-l)/26,x=67108863>>>26-l<<26-l,I;if(l!==0){var P=0;for(I=0;I<this.length;I++){var S=this.words[I]&x,d=(this.words[I]|0)-S<<l;this.words[I]=d|P,P=S>>>26-l}P&&(this.words[I]=P,this.length++)}if(b!==0){for(I=this.length-1;I>=0;I--)this.words[I+b]=this.words[I];for(I=0;I<b;I++)this.words[I]=0;this.length+=b}return this._strip()},a.prototype.ishln=function(c){return i(this.negative===0),this.iushln(c)},a.prototype.iushrn=function(c,l,b){i(typeof c=="number"&&c>=0);var x;l?x=(l-l%26)/26:x=0;var I=c%26,P=Math.min((c-I)/26,this.length),S=67108863^67108863>>>I<<I,d=b;if(x-=P,x=Math.max(0,x),d){for(var g=0;g<P;g++)d.words[g]=this.words[g];d.length=P}if(P!==0)if(this.length>P)for(this.length-=P,g=0;g<this.length;g++)this.words[g]=this.words[g+P];else this.words[0]=0,this.length=1;var N=0;for(g=this.length-1;g>=0&&(N!==0||g>=x);g--){var Z=this.words[g]|0;this.words[g]=N<<26-I|Z>>>I,N=Z&S}return d&&N!==0&&(d.words[d.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(c,l,b){return i(this.negative===0),this.iushrn(c,l,b)},a.prototype.shln=function(c){return this.clone().ishln(c)},a.prototype.ushln=function(c){return this.clone().iushln(c)},a.prototype.shrn=function(c){return this.clone().ishrn(c)},a.prototype.ushrn=function(c){return this.clone().iushrn(c)},a.prototype.testn=function(c){i(typeof c=="number"&&c>=0);var l=c%26,b=(c-l)/26,x=1<<l;if(this.length<=b)return!1;var I=this.words[b];return!!(I&x)},a.prototype.imaskn=function(c){i(typeof c=="number"&&c>=0);var l=c%26,b=(c-l)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(l!==0&&b++,this.length=Math.min(b,this.length),l!==0){var x=67108863^67108863>>>l<<l;this.words[this.length-1]&=x}return this._strip()},a.prototype.maskn=function(c){return this.clone().imaskn(c)},a.prototype.iaddn=function(c){return i(typeof c=="number"),i(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},a.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},a.prototype.isubn=function(c){if(i(typeof c=="number"),i(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},a.prototype.addn=function(c){return this.clone().iaddn(c)},a.prototype.subn=function(c){return this.clone().isubn(c)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(c,l,b){var x=c.length+b,I;this._expand(x);var P,S=0;for(I=0;I<c.length;I++){P=(this.words[I+b]|0)+S;var d=(c.words[I]|0)*l;P-=d&67108863,S=(P>>26)-(d/67108864|0),this.words[I+b]=P&67108863}for(;I<this.length-b;I++)P=(this.words[I+b]|0)+S,S=P>>26,this.words[I+b]=P&67108863;if(S===0)return this._strip();for(i(S===-1),S=0,I=0;I<this.length;I++)P=-(this.words[I]|0)+S,S=P>>26,this.words[I]=P&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(c,l){var b=this.length-c.length,x=this.clone(),I=c,P=I.words[I.length-1]|0,S=this._countBits(P);b=26-S,b!==0&&(I=I.ushln(b),x.iushln(b),P=I.words[I.length-1]|0);var d=x.length-I.length,g;if(l!=="mod"){g=new a(null),g.length=d+1,g.words=new Array(g.length);for(var N=0;N<g.length;N++)g.words[N]=0}var Z=x.clone()._ishlnsubmul(I,1,d);Z.negative===0&&(x=Z,g&&(g.words[d]=1));for(var se=d-1;se>=0;se--){var M=(x.words[I.length+se]|0)*67108864+(x.words[I.length+se-1]|0);for(M=Math.min(M/P|0,67108863),x._ishlnsubmul(I,M,se);x.negative!==0;)M--,x.negative=0,x._ishlnsubmul(I,1,se),x.isZero()||(x.negative^=1);g&&(g.words[se]=M)}return g&&g._strip(),x._strip(),l!=="div"&&b!==0&&x.iushrn(b),{div:g||null,mod:x}},a.prototype.divmod=function(c,l,b){if(i(!c.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var x,I,P;return this.negative!==0&&c.negative===0?(P=this.neg().divmod(c,l),l!=="mod"&&(x=P.div.neg()),l!=="div"&&(I=P.mod.neg(),b&&I.negative!==0&&I.iadd(c)),{div:x,mod:I}):this.negative===0&&c.negative!==0?(P=this.divmod(c.neg(),l),l!=="mod"&&(x=P.div.neg()),{div:x,mod:P.mod}):this.negative&c.negative?(P=this.neg().divmod(c.neg(),l),l!=="div"&&(I=P.mod.neg(),b&&I.negative!==0&&I.isub(c)),{div:P.div,mod:I}):c.length>this.length||this.cmp(c)<0?{div:new a(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new a(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new a(this.modrn(c.words[0]))}:this._wordDiv(c,l)},a.prototype.div=function(c){return this.divmod(c,"div",!1).div},a.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},a.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},a.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var b=l.div.negative!==0?l.mod.isub(c):l.mod,x=c.ushrn(1),I=c.andln(1),P=b.cmp(x);return P<0||I===1&&P===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},a.prototype.modrn=function(c){var l=c<0;l&&(c=-c),i(c<=67108863);for(var b=(1<<26)%c,x=0,I=this.length-1;I>=0;I--)x=(b*x+(this.words[I]|0))%c;return l?-x:x},a.prototype.modn=function(c){return this.modrn(c)},a.prototype.idivn=function(c){var l=c<0;l&&(c=-c),i(c<=67108863);for(var b=0,x=this.length-1;x>=0;x--){var I=(this.words[x]|0)+b*67108864;this.words[x]=I/c|0,b=I%c}return this._strip(),l?this.ineg():this},a.prototype.divn=function(c){return this.clone().idivn(c)},a.prototype.egcd=function(c){i(c.negative===0),i(!c.isZero());var l=this,b=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var x=new a(1),I=new a(0),P=new a(0),S=new a(1),d=0;l.isEven()&&b.isEven();)l.iushrn(1),b.iushrn(1),++d;for(var g=b.clone(),N=l.clone();!l.isZero();){for(var Z=0,se=1;!(l.words[0]&se)&&Z<26;++Z,se<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(x.isOdd()||I.isOdd())&&(x.iadd(g),I.isub(N)),x.iushrn(1),I.iushrn(1);for(var M=0,ee=1;!(b.words[0]&ee)&&M<26;++M,ee<<=1);if(M>0)for(b.iushrn(M);M-- >0;)(P.isOdd()||S.isOdd())&&(P.iadd(g),S.isub(N)),P.iushrn(1),S.iushrn(1);l.cmp(b)>=0?(l.isub(b),x.isub(P),I.isub(S)):(b.isub(l),P.isub(x),S.isub(I))}return{a:P,b:S,gcd:b.iushln(d)}},a.prototype._invmp=function(c){i(c.negative===0),i(!c.isZero());var l=this,b=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var x=new a(1),I=new a(0),P=b.clone();l.cmpn(1)>0&&b.cmpn(1)>0;){for(var S=0,d=1;!(l.words[0]&d)&&S<26;++S,d<<=1);if(S>0)for(l.iushrn(S);S-- >0;)x.isOdd()&&x.iadd(P),x.iushrn(1);for(var g=0,N=1;!(b.words[0]&N)&&g<26;++g,N<<=1);if(g>0)for(b.iushrn(g);g-- >0;)I.isOdd()&&I.iadd(P),I.iushrn(1);l.cmp(b)>=0?(l.isub(b),x.isub(I)):(b.isub(l),I.isub(x))}var Z;return l.cmpn(1)===0?Z=x:Z=I,Z.cmpn(0)<0&&Z.iadd(c),Z},a.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),b=c.clone();l.negative=0,b.negative=0;for(var x=0;l.isEven()&&b.isEven();x++)l.iushrn(1),b.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;b.isEven();)b.iushrn(1);var I=l.cmp(b);if(I<0){var P=l;l=b,b=P}else if(I===0||b.cmpn(1)===0)break;l.isub(b)}while(!0);return b.iushln(x)},a.prototype.invm=function(c){return this.egcd(c).a.umod(c)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(c){return this.words[0]&c},a.prototype.bincn=function(c){i(typeof c=="number");var l=c%26,b=(c-l)/26,x=1<<l;if(this.length<=b)return this._expand(b+1),this.words[b]|=x,this;for(var I=x,P=b;I!==0&&P<this.length;P++){var S=this.words[P]|0;S+=I,I=S>>>26,S&=67108863,this.words[P]=S}return I!==0&&(this.words[P]=I,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var b;if(this.length>1)b=1;else{l&&(c=-c),i(c<=67108863,"Number is too big");var x=this.words[0]|0;b=x===c?0:x<c?-1:1}return this.negative!==0?-b|0:b},a.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},a.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,b=this.length-1;b>=0;b--){var x=this.words[b]|0,I=c.words[b]|0;if(x!==I){x<I?l=-1:x>I&&(l=1);break}}return l},a.prototype.gtn=function(c){return this.cmpn(c)===1},a.prototype.gt=function(c){return this.cmp(c)===1},a.prototype.gten=function(c){return this.cmpn(c)>=0},a.prototype.gte=function(c){return this.cmp(c)>=0},a.prototype.ltn=function(c){return this.cmpn(c)===-1},a.prototype.lt=function(c){return this.cmp(c)===-1},a.prototype.lten=function(c){return this.cmpn(c)<=0},a.prototype.lte=function(c){return this.cmp(c)<=0},a.prototype.eqn=function(c){return this.cmpn(c)===0},a.prototype.eq=function(c){return this.cmp(c)===0},a.red=function(c){return new $(c)},a.prototype.toRed=function(c){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(c){return this.red=c,this},a.prototype.forceRed=function(c){return i(!this.red,"Already a number in reduction context"),this._forceRed(c)},a.prototype.redAdd=function(c){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},a.prototype.redIAdd=function(c){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},a.prototype.redSub=function(c){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},a.prototype.redISub=function(c){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},a.prototype.redShl=function(c){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},a.prototype.redMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},a.prototype.redIMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(c){return i(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var j={k256:null,p224:null,p192:null,p25519:null};function V(c,l){this.name=c,this.p=new a(l,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var c=new a(null);return c.words=new Array(Math.ceil(this.n/13)),c},V.prototype.ireduce=function(c){var l=c,b;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),b=l.bitLength();while(b>this.n);var x=b<this.n?-1:l.ucmp(this.p);return x===0?(l.words[0]=0,l.length=1):x>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},V.prototype.split=function(c,l){c.iushrn(this.n,0,l)},V.prototype.imulK=function(c){return c.imul(this.k)};function A(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(A,V),A.prototype.split=function(c,l){for(var b=4194303,x=Math.min(c.length,9),I=0;I<x;I++)l.words[I]=c.words[I];if(l.length=x,c.length<=9){c.words[0]=0,c.length=1;return}var P=c.words[9];for(l.words[l.length++]=P&b,I=10;I<c.length;I++){var S=c.words[I]|0;c.words[I-10]=(S&b)<<4|P>>>22,P=S}P>>>=22,c.words[I-10]=P,P===0&&c.length>10?c.length-=10:c.length-=9},A.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,b=0;b<c.length;b++){var x=c.words[b]|0;l+=x*977,c.words[b]=l&67108863,l=x*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function F(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(F,V);function ae(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ae,V);function de(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(de,V),de.prototype.imulK=function(c){for(var l=0,b=0;b<c.length;b++){var x=(c.words[b]|0)*19+l,I=x&67108863;x>>>=26,c.words[b]=I,l=x}return l!==0&&(c.words[c.length++]=l),c},a._prime=function(c){if(j[c])return j[c];var l;if(c==="k256")l=new A;else if(c==="p224")l=new F;else if(c==="p192")l=new ae;else if(c==="p25519")l=new de;else throw new Error("Unknown prime "+c);return j[c]=l,l};function $(c){if(typeof c=="string"){var l=a._prime(c);this.m=l.p,this.prime=l}else i(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}$.prototype._verify1=function(c){i(c.negative===0,"red works only with positives"),i(c.red,"red works only with red numbers")},$.prototype._verify2=function(c,l){i((c.negative|l.negative)===0,"red works only with positives"),i(c.red&&c.red===l.red,"red works only with red numbers")},$.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(y(c,c.umod(this.m)._forceRed(this)),c)},$.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},$.prototype.add=function(c,l){this._verify2(c,l);var b=c.add(l);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},$.prototype.iadd=function(c,l){this._verify2(c,l);var b=c.iadd(l);return b.cmp(this.m)>=0&&b.isub(this.m),b},$.prototype.sub=function(c,l){this._verify2(c,l);var b=c.sub(l);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},$.prototype.isub=function(c,l){this._verify2(c,l);var b=c.isub(l);return b.cmpn(0)<0&&b.iadd(this.m),b},$.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},$.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},$.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},$.prototype.isqr=function(c){return this.imul(c,c.clone())},$.prototype.sqr=function(c){return this.mul(c,c)},$.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(i(l%2===1),l===3){var b=this.m.add(new a(1)).iushrn(2);return this.pow(c,b)}for(var x=this.m.subn(1),I=0;!x.isZero()&&x.andln(1)===0;)I++,x.iushrn(1);i(!x.isZero());var P=new a(1).toRed(this),S=P.redNeg(),d=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new a(2*g*g).toRed(this);this.pow(g,d).cmp(S)!==0;)g.redIAdd(S);for(var N=this.pow(g,x),Z=this.pow(c,x.addn(1).iushrn(1)),se=this.pow(c,x),M=I;se.cmp(P)!==0;){for(var ee=se,B=0;ee.cmp(P)!==0;B++)ee=ee.redSqr();i(B<M);var k=this.pow(N,new a(1).iushln(M-B-1));Z=Z.redMul(k),N=k.redSqr(),se=se.redMul(N),M=B}return Z},$.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},$.prototype.pow=function(c,l){if(l.isZero())return new a(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var b=4,x=new Array(1<<b);x[0]=new a(1).toRed(this),x[1]=c;for(var I=2;I<x.length;I++)x[I]=this.mul(x[I-1],c);var P=x[0],S=0,d=0,g=l.bitLength()%26;for(g===0&&(g=26),I=l.length-1;I>=0;I--){for(var N=l.words[I],Z=g-1;Z>=0;Z--){var se=N>>Z&1;if(P!==x[0]&&(P=this.sqr(P)),se===0&&S===0){d=0;continue}S<<=1,S|=se,d++,!(d!==b&&(I!==0||Z!==0))&&(P=this.mul(P,x[S]),d=0,S=0)}g=26}return P},$.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},$.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},a.mont=function(c){return new m(c)};function m(c){$.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(m,$),m.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},m.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},m.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var b=c.imul(l),x=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=b.isub(x).iushrn(this.shift),P=I;return I.cmp(this.m)>=0?P=I.isub(this.m):I.cmpn(0)<0&&(P=I.iadd(this.m)),P._forceRed(this)},m.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new a(0)._forceRed(this);var b=c.mul(l),x=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=b.isub(x).iushrn(this.shift),P=I;return I.cmp(this.m)>=0?P=I.isub(this.m):I.cmpn(0)<0&&(P=I.iadd(this.m)),P._forceRed(this)},m.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,f2)})(d2);var vt=d2.exports;const p2="bignumber/5.7.0";var yu=vt.BN;const us=new Mr(p2),Dl={},fg=9007199254740991;function dx(r){return r!=null&&(Gt.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||_i(r)||typeof r=="bigint"||yo(r))}let ug=!1;class Gt{constructor(e,t){e!==Dl&&us.throwError("cannot call constructor directly; use BigNumber.from",Mr.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return ai(Dt(this).fromTwos(e))}toTwos(e){return ai(Dt(this).toTwos(e))}abs(){return this._hex[0]==="-"?Gt.from(this._hex.substring(1)):this}add(e){return ai(Dt(this).add(Dt(e)))}sub(e){return ai(Dt(this).sub(Dt(e)))}div(e){return Gt.from(e).isZero()&&Fi("division-by-zero","div"),ai(Dt(this).div(Dt(e)))}mul(e){return ai(Dt(this).mul(Dt(e)))}mod(e){const t=Dt(e);return t.isNeg()&&Fi("division-by-zero","mod"),ai(Dt(this).umod(t))}pow(e){const t=Dt(e);return t.isNeg()&&Fi("negative-power","pow"),ai(Dt(this).pow(t))}and(e){const t=Dt(e);return(this.isNegative()||t.isNeg())&&Fi("unbound-bitwise-result","and"),ai(Dt(this).and(t))}or(e){const t=Dt(e);return(this.isNegative()||t.isNeg())&&Fi("unbound-bitwise-result","or"),ai(Dt(this).or(t))}xor(e){const t=Dt(e);return(this.isNegative()||t.isNeg())&&Fi("unbound-bitwise-result","xor"),ai(Dt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Fi("negative-width","mask"),ai(Dt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Fi("negative-width","shl"),ai(Dt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Fi("negative-width","shr"),ai(Dt(this).shrn(e))}eq(e){return Dt(this).eq(Dt(e))}lt(e){return Dt(this).lt(Dt(e))}lte(e){return Dt(this).lte(Dt(e))}gt(e){return Dt(this).gt(Dt(e))}gte(e){return Dt(this).gte(Dt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Dt(this).isZero()}toNumber(){try{return Dt(this).toNumber()}catch{Fi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return us.throwError("this platform does not support BigInt",Mr.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?ug||(ug=!0,us.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?us.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Mr.errors.UNEXPECTED_ARGUMENT,{}):us.throwError("BigNumber.toString does not accept parameters",Mr.errors.UNEXPECTED_ARGUMENT,{})),Dt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Gt)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Gt(Dl,mc(e)):e.match(/^-?[0-9]+$/)?new Gt(Dl,mc(new yu(e))):us.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Fi("underflow","BigNumber.from",e),(e>=fg||e<=-fg)&&Fi("overflow","BigNumber.from",e),Gt.from(String(e));const t=e;if(typeof t=="bigint")return Gt.from(t.toString());if(yo(t))return Gt.from(Vr(t));if(t)if(t.toHexString){const i=t.toHexString();if(typeof i=="string")return Gt.from(i)}else{let i=t._hex;if(i==null&&t.type==="BigNumber"&&(i=t.hex),typeof i=="string"&&(_i(i)||i[0]==="-"&&_i(i.substring(1))))return Gt.from(i)}return us.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function mc(r){if(typeof r!="string")return mc(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&us.throwArgumentError("invalid hex","value",r),r=mc(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function ai(r){return Gt.from(mc(r))}function Dt(r){const e=Gt.from(r).toHexString();return e[0]==="-"?new yu("-"+e.substring(3),16):new yu(e.substring(2),16)}function Fi(r,e,t){const i={fault:r,operation:e};return t!=null&&(i.value=t),us.throwError(r,Mr.errors.NUMERIC_FAULT,i)}function px(r){return new yu(r,36).toString(16)}const Wr=new Mr(p2),fc={},g2=Gt.from(0),v2=Gt.from(-1);function b2(r,e,t,i){const n={fault:e,operation:t};return i!==void 0&&(n.value=i),Wr.throwError(r,Mr.errors.NUMERIC_FAULT,n)}let uc="0";for(;uc.length<256;)uc+=uc;function Q0(r){if(typeof r!="number")try{r=Gt.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+uc.substring(0,r):Wr.throwArgumentError("invalid decimal size","decimals",r)}function Pl(r,e){e==null&&(e=0);const t=Q0(e);r=Gt.from(r);const i=r.lt(g2);i&&(r=r.mul(v2));let n=r.mod(t).toString();for(;n.length<t.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];const a=r.div(t).toString();return t.length===1?r=a:r=a+"."+n,i&&(r="-"+r),r}function as(r,e){e==null&&(e=0);const t=Q0(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Wr.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&Wr.throwArgumentError("missing value","value",r);const n=r.split(".");n.length>2&&Wr.throwArgumentError("too many decimal points","value",r);let a=n[0],f=n[1];for(a||(a="0"),f||(f="0");f[f.length-1]==="0";)f=f.substring(0,f.length-1);for(f.length>t.length-1&&b2("fractional component exceeds decimals","underflow","parseFixed"),f===""&&(f="0");f.length<t.length-1;)f+="0";const u=Gt.from(a),v=Gt.from(f);let p=u.mul(t).add(v);return i&&(p=p.mul(v2)),p}let Ol=class g0{constructor(e,t,i,n){e!==fc&&Wr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Mr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=i,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=Q0(n),Object.freeze(this)}static from(e){if(e instanceof g0)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,i=128,n=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const a=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);a||Wr.throwArgumentError("invalid fixed format","format",e),t=a[1]!=="u",i=parseInt(a[2]),n=parseInt(a[3])}}else if(e){const a=(f,u,v)=>e[f]==null?v:(typeof e[f]!==u&&Wr.throwArgumentError("invalid fixed format ("+f+" not "+u+")","format."+f,e[f]),e[f]);t=a("signed","boolean",t),i=a("width","number",i),n=a("decimals","number",n)}return i%8&&Wr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&Wr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new g0(fc,t,i,n)}},m2=class Kr{constructor(e,t,i,n){e!==fc&&Wr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Mr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Wr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=as(this._value,this.format.decimals),i=as(e._value,e.format.decimals);return Kr.fromValue(t.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=as(this._value,this.format.decimals),i=as(e._value,e.format.decimals);return Kr.fromValue(t.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=as(this._value,this.format.decimals),i=as(e._value,e.format.decimals);return Kr.fromValue(t.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=as(this._value,this.format.decimals),i=as(e._value,e.format.decimals);return Kr.fromValue(t.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Kr.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(t=t.subUnsafe(hg.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Kr.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(t=t.addUnsafe(hg.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Wr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const i=Kr.from("1"+uc.substring(0,e),this.format),n=gx.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Wr.throwArgumentError("invalid byte width","width",e);const t=Gt.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Bn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Kr.fromString(this._value,e)}static fromValue(e,t,i){return i==null&&t!=null&&!dx(t)&&(i=t,t=null),t==null&&(t=0),i==null&&(i="fixed"),Kr.fromString(Pl(e,t),Ol.from(i))}static fromString(e,t){t==null&&(t="fixed");const i=Ol.from(t),n=as(e,i.decimals);!i.signed&&n.lt(g2)&&b2("unsigned value cannot be negative","overflow","value",e);let a=null;i.signed?a=n.toTwos(i.width).toHexString():(a=n.toHexString(),a=Bn(a,i.width/8));const f=Pl(n,i.decimals);return new Kr(fc,a,f,i)}static fromBytes(e,t){t==null&&(t="fixed");const i=Ol.from(t);if(ir(e).length>i.width/8)throw new Error("overflow");let n=Gt.from(e);i.signed&&(n=n.fromTwos(i.width));const a=n.toTwos((i.signed?0:1)+i.width).toHexString(),f=Pl(n,i.decimals);return new Kr(fc,a,f,i)}static from(e,t){if(typeof e=="string")return Kr.fromString(e,t);if(yo(e))return Kr.fromBytes(e,t);try{return Kr.fromValue(e,0,t)}catch(i){if(i.code!==Mr.errors.INVALID_ARGUMENT)throw i}return Wr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}};const hg=m2.from(1),gx=m2.from("0.5"),vx="strings/5.7.0",bx=new Mr(vx);var wu;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(wu||(wu={}));var lg;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(lg||(lg={}));function Cl(r,e=wu.current){e!=wu.current&&(bx.checkNormalize(),r=r.normalize(e));let t=[];for(let i=0;i<r.length;i++){const n=r.charCodeAt(i);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192),t.push(n&63|128);else if((n&64512)==55296){i++;const a=r.charCodeAt(i);if(i>=r.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");const f=65536+((n&1023)<<10)+(a&1023);t.push(f>>18|240),t.push(f>>12&63|128),t.push(f>>6&63|128),t.push(f&63|128)}else t.push(n>>12|224),t.push(n>>6&63|128),t.push(n&63|128)}return ir(t)}function mx(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function Rl(r,e){e||(e=function(n){return[parseInt(n,16)]});let t=0,i={};return r.split(",").forEach(n=>{let a=n.split(":");t+=parseInt(a[0],16),i[t]=e(a[1])}),i}function dg(r){let e=0;return r.split(",").map(t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let n=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:n,h:e}})}dg("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),Rl("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Rl("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Rl("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",mx),dg("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function yx(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return ir(e)}function y2(r,e){e==null&&(e=1);const t=[],i=t.forEach,n=function(a,f){i.call(a,function(u){f>0&&Array.isArray(u)?n(u,f-1):t.push(u)})};return n(r,e),t}function wx(r){const e={};for(let t=0;t<r.length;t++){const i=r[t];e[i[0]]=i[1]}return e}function _x(r){let e=0;function t(){return r[e++]<<8|r[e++]}let i=t(),n=1,a=[0,1];for(let j=1;j<i;j++)a.push(n+=t());let f=t(),u=e;e+=f;let v=0,p=0;function y(){return v==0&&(p=p<<8|r[e++],v=8),p>>--v&1}const _=31,O=Math.pow(2,_),D=O>>>1,C=D>>1,H=O-1;let W=0;for(let j=0;j<_;j++)W=W<<1|y();let Q=[],z=0,Y=O;for(;;){let j=Math.floor(((W-z+1)*n-1)/Y),V=0,A=i;for(;A-V>1;){let de=V+A>>>1;j<a[de]?A=de:V=de}if(V==0)break;Q.push(V);let F=z+Math.floor(Y*a[V]/n),ae=z+Math.floor(Y*a[V+1]/n)-1;for(;!((F^ae)&D);)W=W<<1&H|y(),F=F<<1&H,ae=ae<<1&H|1;for(;F&~ae&C;)W=W&D|W<<1&H>>>1|y(),F=F<<1^D,ae=(ae^D)<<1|D|1;z=F,Y=1+ae-F}let q=i-4;return Q.map(j=>{switch(j-q){case 3:return q+65792+(r[u++]<<16|r[u++]<<8|r[u++]);case 2:return q+256+(r[u++]<<8|r[u++]);case 1:return q+r[u++];default:return j-1}})}function Ax(r){let e=0;return()=>r[e++]}function Ex(r){return Ax(_x(r))}function xx(r){return r&1?~r>>1:r>>1}function Sx(r,e){let t=Array(r);for(let i=0;i<r;i++)t[i]=1+e();return t}function pg(r,e){let t=Array(r);for(let i=0,n=-1;i<r;i++)t[i]=n+=1+e();return t}function Ix(r,e){let t=Array(r);for(let i=0,n=0;i<r;i++)t[i]=n+=xx(e());return t}function _u(r,e){let t=pg(r(),r),i=r(),n=pg(i,r),a=Sx(i,r);for(let f=0;f<i;f++)for(let u=0;u<a[f];u++)t.push(n[f]+u);return e?t.map(f=>e[f]):t}function Mx(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(Px(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(Ox(t,r))}return wx(y2(e))}function Dx(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function w2(r,e,t){let i=Array(r).fill(void 0).map(()=>[]);for(let n=0;n<e;n++)Ix(r,t).forEach((a,f)=>i[f].push(a));return i}function Px(r,e){let t=1+e(),i=e(),n=Dx(e),a=w2(n.length,1+r,e);return y2(a.map((f,u)=>{const v=f[0],p=f.slice(1);return Array(n[u]).fill(void 0).map((y,_)=>{let O=_*i;return[v+_*t,p.map(D=>D+O)]})}))}function Ox(r,e){let t=1+e();return w2(t,1+r,e).map(i=>[i[0],i.slice(1)])}function Cx(r){let e=_u(r).sort((i,n)=>i-n);return t();function t(){let i=[];for(;;){let p=_u(r,e);if(p.length==0)break;i.push({set:new Set(p),node:t()})}i.sort((p,y)=>y.set.size-p.set.size);let n=r(),a=n%3;n=n/3|0;let f=!!(n&1);n>>=1;let u=n==1,v=n==2;return{branches:i,valid:a,fe0f:f,save:u,check:v}}}function Rx(){return Ex(yx("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const kf=Rx();new Set(_u(kf)),new Set(_u(kf)),Mx(kf),Cx(kf);const Nx=new Uint8Array(32);Nx.fill(0);const Tx=`Ethereum Signed Message:
`;function _2(r){return typeof r=="string"&&(r=Cl(r)),Y0(ox([Cl(Tx),Cl(String(r.length)),r]))}const Fx="address/5.7.0",sc=new Mr(Fx);function gg(r){_i(r,20)||sc.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let n=0;n<40;n++)t[n]=e[n].charCodeAt(0);const i=ir(Y0(t));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(i[n>>1]&15)>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}const Bx=9007199254740991;function Lx(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const X0={};for(let r=0;r<10;r++)X0[String(r)]=String(r);for(let r=0;r<26;r++)X0[String.fromCharCode(65+r)]=String(10+r);const vg=Math.floor(Lx(Bx));function qx(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(i=>X0[i]).join("");for(;e.length>=vg;){let i=e.substring(0,vg);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function $x(r){let e=null;if(typeof r!="string"&&sc.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=gg(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&sc.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==qx(r)&&sc.throwArgumentError("bad icap checksum","address",r),e=px(r.substring(4));e.length<40;)e="0"+e;e=gg("0x"+e)}else sc.throwArgumentError("invalid address","address",r);return e}function Jo(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}const Ux=new Uint8Array(32);Ux.fill(0),Gt.from(-1);const zx=Gt.from(0),jx=Gt.from(1);Gt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Bn(jx.toHexString(),32),Bn(zx.toHexString(),32);var In={},Ot={},Rc=A2;function A2(r,e){if(!r)throw new Error(e||"Assertion failed")}A2.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var v0={exports:{}};typeof Object.create=="function"?v0.exports=function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:v0.exports=function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}};var kx=Rc,Hx=v0.exports;Ot.inherits=Hx;function Kx(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function Vx(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var i=0,n=0;n<r.length;n++){var a=r.charCodeAt(n);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):Kx(r,n)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++n)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(n=0;n<r.length;n++)t[n]=r[n]|0;return t}Ot.toArray=Vx;function Gx(r){for(var e="",t=0;t<r.length;t++)e+=x2(r[t].toString(16));return e}Ot.toHex=Gx;function E2(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Ot.htonl=E2;function Wx(r,e){for(var t="",i=0;i<r.length;i++){var n=r[i];e==="little"&&(n=E2(n)),t+=S2(n.toString(16))}return t}Ot.toHex32=Wx;function x2(r){return r.length===1?"0"+r:r}Ot.zero2=x2;function S2(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Ot.zero8=S2;function Jx(r,e,t,i){var n=t-e;kx(n%4===0);for(var a=new Array(n/4),f=0,u=e;f<a.length;f++,u+=4){var v;i==="big"?v=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:v=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],a[f]=v>>>0}return a}Ot.join32=Jx;function Yx(r,e){for(var t=new Array(r.length*4),i=0,n=0;i<r.length;i++,n+=4){var a=r[i];e==="big"?(t[n]=a>>>24,t[n+1]=a>>>16&255,t[n+2]=a>>>8&255,t[n+3]=a&255):(t[n+3]=a>>>24,t[n+2]=a>>>16&255,t[n+1]=a>>>8&255,t[n]=a&255)}return t}Ot.split32=Yx;function Qx(r,e){return r>>>e|r<<32-e}Ot.rotr32=Qx;function Xx(r,e){return r<<e|r>>>32-e}Ot.rotl32=Xx;function Zx(r,e){return r+e>>>0}Ot.sum32=Zx;function eS(r,e,t){return r+e+t>>>0}Ot.sum32_3=eS;function tS(r,e,t,i){return r+e+t+i>>>0}Ot.sum32_4=tS;function rS(r,e,t,i,n){return r+e+t+i+n>>>0}Ot.sum32_5=rS;function iS(r,e,t,i){var n=r[e],a=r[e+1],f=i+a>>>0,u=(f<i?1:0)+t+n;r[e]=u>>>0,r[e+1]=f}Ot.sum64=iS;function nS(r,e,t,i){var n=e+i>>>0,a=(n<e?1:0)+r+t;return a>>>0}Ot.sum64_hi=nS;function sS(r,e,t,i){var n=e+i;return n>>>0}Ot.sum64_lo=sS;function aS(r,e,t,i,n,a,f,u){var v=0,p=e;p=p+i>>>0,v+=p<e?1:0,p=p+a>>>0,v+=p<a?1:0,p=p+u>>>0,v+=p<u?1:0;var y=r+t+n+f+v;return y>>>0}Ot.sum64_4_hi=aS;function oS(r,e,t,i,n,a,f,u){var v=e+i+a+u;return v>>>0}Ot.sum64_4_lo=oS;function cS(r,e,t,i,n,a,f,u,v,p){var y=0,_=e;_=_+i>>>0,y+=_<e?1:0,_=_+a>>>0,y+=_<a?1:0,_=_+u>>>0,y+=_<u?1:0,_=_+p>>>0,y+=_<p?1:0;var O=r+t+n+f+v+y;return O>>>0}Ot.sum64_5_hi=cS;function fS(r,e,t,i,n,a,f,u,v,p){var y=e+i+a+u+p;return y>>>0}Ot.sum64_5_lo=fS;function uS(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Ot.rotr64_hi=uS;function hS(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Ot.rotr64_lo=hS;function lS(r,e,t){return r>>>t}Ot.shr64_hi=lS;function dS(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Ot.shr64_lo=dS;var wo={},bg=Ot,pS=Rc;function Hf(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}wo.BlockHash=Hf,Hf.prototype.update=function(r,e){if(r=bg.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var t=r.length%this._delta8;this.pending=r.slice(r.length-t,r.length),this.pending.length===0&&(this.pending=null),r=bg.join32(r,0,r.length-t,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},Hf.prototype.digest=function(r){return this.update(this._pad()),pS(this.pending===null),this._digest(r)},Hf.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,t=e-(r+this.padLength)%e,i=new Array(t+this.padLength);i[0]=128;for(var n=1;n<t;n++)i[n]=0;if(r<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=r>>>24&255,i[n++]=r>>>16&255,i[n++]=r>>>8&255,i[n++]=r&255}else for(i[n++]=r&255,i[n++]=r>>>8&255,i[n++]=r>>>16&255,i[n++]=r>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,a=8;a<this.padLength;a++)i[n++]=0;return i};var Ja={},Wn={},gS=Ot,Ln=gS.rotr32;function vS(r,e,t,i){if(r===0)return I2(e,t,i);if(r===1||r===3)return D2(e,t,i);if(r===2)return M2(e,t,i)}Wn.ft_1=vS;function I2(r,e,t){return r&e^~r&t}Wn.ch32=I2;function M2(r,e,t){return r&e^r&t^e&t}Wn.maj32=M2;function D2(r,e,t){return r^e^t}Wn.p32=D2;function bS(r){return Ln(r,2)^Ln(r,13)^Ln(r,22)}Wn.s0_256=bS;function mS(r){return Ln(r,6)^Ln(r,11)^Ln(r,25)}Wn.s1_256=mS;function yS(r){return Ln(r,7)^Ln(r,18)^r>>>3}Wn.g0_256=yS;function wS(r){return Ln(r,17)^Ln(r,19)^r>>>10}Wn.g1_256=wS;var oo=Ot,_S=wo,AS=Wn,Nl=oo.rotl32,Yo=oo.sum32,ES=oo.sum32_5,xS=AS.ft_1,P2=_S.BlockHash,SS=[1518500249,1859775393,2400959708,3395469782];function On(){if(!(this instanceof On))return new On;P2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}oo.inherits(On,P2);var IS=On;On.blockSize=512,On.outSize=160,On.hmacStrength=80,On.padLength=64,On.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=Nl(t[i-3]^t[i-8]^t[i-14]^t[i-16],1);var n=this.h[0],a=this.h[1],f=this.h[2],u=this.h[3],v=this.h[4];for(i=0;i<t.length;i++){var p=~~(i/20),y=ES(Nl(n,5),xS(p,a,f,u),v,t[i],SS[p]);v=u,u=f,f=Nl(a,30),a=n,n=y}this.h[0]=Yo(this.h[0],n),this.h[1]=Yo(this.h[1],a),this.h[2]=Yo(this.h[2],f),this.h[3]=Yo(this.h[3],u),this.h[4]=Yo(this.h[4],v)},On.prototype._digest=function(r){return r==="hex"?oo.toHex32(this.h,"big"):oo.split32(this.h,"big")};var co=Ot,MS=wo,_o=Wn,DS=Rc,an=co.sum32,PS=co.sum32_4,OS=co.sum32_5,CS=_o.ch32,RS=_o.maj32,NS=_o.s0_256,TS=_o.s1_256,FS=_o.g0_256,BS=_o.g1_256,O2=MS.BlockHash,LS=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Cn(){if(!(this instanceof Cn))return new Cn;O2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=LS,this.W=new Array(64)}co.inherits(Cn,O2);var C2=Cn;Cn.blockSize=512,Cn.outSize=256,Cn.hmacStrength=192,Cn.padLength=64,Cn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=PS(BS(t[i-2]),t[i-7],FS(t[i-15]),t[i-16]);var n=this.h[0],a=this.h[1],f=this.h[2],u=this.h[3],v=this.h[4],p=this.h[5],y=this.h[6],_=this.h[7];for(DS(this.k.length===t.length),i=0;i<t.length;i++){var O=OS(_,TS(v),CS(v,p,y),this.k[i],t[i]),D=an(NS(n),RS(n,a,f));_=y,y=p,p=v,v=an(u,O),u=f,f=a,a=n,n=an(O,D)}this.h[0]=an(this.h[0],n),this.h[1]=an(this.h[1],a),this.h[2]=an(this.h[2],f),this.h[3]=an(this.h[3],u),this.h[4]=an(this.h[4],v),this.h[5]=an(this.h[5],p),this.h[6]=an(this.h[6],y),this.h[7]=an(this.h[7],_)},Cn.prototype._digest=function(r){return r==="hex"?co.toHex32(this.h,"big"):co.split32(this.h,"big")};var b0=Ot,R2=C2;function ls(){if(!(this instanceof ls))return new ls;R2.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}b0.inherits(ls,R2);var qS=ls;ls.blockSize=512,ls.outSize=224,ls.hmacStrength=192,ls.padLength=64,ls.prototype._digest=function(r){return r==="hex"?b0.toHex32(this.h.slice(0,7),"big"):b0.split32(this.h.slice(0,7),"big")};var li=Ot,$S=wo,US=Rc,qn=li.rotr64_hi,$n=li.rotr64_lo,N2=li.shr64_hi,T2=li.shr64_lo,Cs=li.sum64,Tl=li.sum64_hi,Fl=li.sum64_lo,zS=li.sum64_4_hi,jS=li.sum64_4_lo,kS=li.sum64_5_hi,HS=li.sum64_5_lo,F2=$S.BlockHash,KS=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function hn(){if(!(this instanceof hn))return new hn;F2.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=KS,this.W=new Array(160)}li.inherits(hn,F2);var B2=hn;hn.blockSize=1024,hn.outSize=512,hn.hmacStrength=192,hn.padLength=128,hn.prototype._prepareBlock=function(r,e){for(var t=this.W,i=0;i<32;i++)t[i]=r[e+i];for(;i<t.length;i+=2){var n=rI(t[i-4],t[i-3]),a=iI(t[i-4],t[i-3]),f=t[i-14],u=t[i-13],v=eI(t[i-30],t[i-29]),p=tI(t[i-30],t[i-29]),y=t[i-32],_=t[i-31];t[i]=zS(n,a,f,u,v,p,y,_),t[i+1]=jS(n,a,f,u,v,p,y,_)}},hn.prototype._update=function(r,e){this._prepareBlock(r,e);var t=this.W,i=this.h[0],n=this.h[1],a=this.h[2],f=this.h[3],u=this.h[4],v=this.h[5],p=this.h[6],y=this.h[7],_=this.h[8],O=this.h[9],D=this.h[10],C=this.h[11],H=this.h[12],W=this.h[13],Q=this.h[14],z=this.h[15];US(this.k.length===t.length);for(var Y=0;Y<t.length;Y+=2){var q=Q,j=z,V=XS(_,O),A=ZS(_,O),F=VS(_,O,D,C,H),ae=GS(_,O,D,C,H,W),de=this.k[Y],$=this.k[Y+1],m=t[Y],c=t[Y+1],l=kS(q,j,V,A,F,ae,de,$,m,c),b=HS(q,j,V,A,F,ae,de,$,m,c);q=YS(i,n),j=QS(i,n),V=WS(i,n,a,f,u),A=JS(i,n,a,f,u,v);var x=Tl(q,j,V,A),I=Fl(q,j,V,A);Q=H,z=W,H=D,W=C,D=_,C=O,_=Tl(p,y,l,b),O=Fl(y,y,l,b),p=u,y=v,u=a,v=f,a=i,f=n,i=Tl(l,b,x,I),n=Fl(l,b,x,I)}Cs(this.h,0,i,n),Cs(this.h,2,a,f),Cs(this.h,4,u,v),Cs(this.h,6,p,y),Cs(this.h,8,_,O),Cs(this.h,10,D,C),Cs(this.h,12,H,W),Cs(this.h,14,Q,z)},hn.prototype._digest=function(r){return r==="hex"?li.toHex32(this.h,"big"):li.split32(this.h,"big")};function VS(r,e,t,i,n){var a=r&t^~r&n;return a<0&&(a+=4294967296),a}function GS(r,e,t,i,n,a){var f=e&i^~e&a;return f<0&&(f+=4294967296),f}function WS(r,e,t,i,n){var a=r&t^r&n^t&n;return a<0&&(a+=4294967296),a}function JS(r,e,t,i,n,a){var f=e&i^e&a^i&a;return f<0&&(f+=4294967296),f}function YS(r,e){var t=qn(r,e,28),i=qn(e,r,2),n=qn(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function QS(r,e){var t=$n(r,e,28),i=$n(e,r,2),n=$n(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function XS(r,e){var t=qn(r,e,14),i=qn(r,e,18),n=qn(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function ZS(r,e){var t=$n(r,e,14),i=$n(r,e,18),n=$n(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function eI(r,e){var t=qn(r,e,1),i=qn(r,e,8),n=N2(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function tI(r,e){var t=$n(r,e,1),i=$n(r,e,8),n=T2(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function rI(r,e){var t=qn(r,e,19),i=qn(e,r,29),n=N2(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}function iI(r,e){var t=$n(r,e,19),i=$n(e,r,29),n=T2(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}var m0=Ot,L2=B2;function ds(){if(!(this instanceof ds))return new ds;L2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}m0.inherits(ds,L2);var nI=ds;ds.blockSize=1024,ds.outSize=384,ds.hmacStrength=192,ds.padLength=128,ds.prototype._digest=function(r){return r==="hex"?m0.toHex32(this.h.slice(0,12),"big"):m0.split32(this.h.slice(0,12),"big")},Ja.sha1=IS,Ja.sha224=qS,Ja.sha256=C2,Ja.sha384=nI,Ja.sha512=B2;var q2={},pa=Ot,sI=wo,Kf=pa.rotl32,mg=pa.sum32,Qo=pa.sum32_3,yg=pa.sum32_4,$2=sI.BlockHash;function Mn(){if(!(this instanceof Mn))return new Mn;$2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}pa.inherits(Mn,$2),q2.ripemd160=Mn,Mn.blockSize=512,Mn.outSize=160,Mn.hmacStrength=192,Mn.padLength=64,Mn.prototype._update=function(r,e){for(var t=this.h[0],i=this.h[1],n=this.h[2],a=this.h[3],f=this.h[4],u=t,v=i,p=n,y=a,_=f,O=0;O<80;O++){var D=mg(Kf(yg(t,wg(O,i,n,a),r[cI[O]+e],aI(O)),uI[O]),f);t=f,f=a,a=Kf(n,10),n=i,i=D,D=mg(Kf(yg(u,wg(79-O,v,p,y),r[fI[O]+e],oI(O)),hI[O]),_),u=_,_=y,y=Kf(p,10),p=v,v=D}D=Qo(this.h[1],n,y),this.h[1]=Qo(this.h[2],a,_),this.h[2]=Qo(this.h[3],f,u),this.h[3]=Qo(this.h[4],t,v),this.h[4]=Qo(this.h[0],i,p),this.h[0]=D},Mn.prototype._digest=function(r){return r==="hex"?pa.toHex32(this.h,"little"):pa.split32(this.h,"little")};function wg(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function aI(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function oI(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var cI=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],fI=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],uI=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],hI=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],lI=Ot,dI=Rc;function ro(r,e,t){if(!(this instanceof ro))return new ro(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(lI.toArray(e,t))}var pI=ro;ro.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),dI(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},ro.prototype.update=function(r,e){return this.inner.update(r,e),this},ro.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var e=r;e.utils=Ot,e.common=wo,e.sha=Ja,e.ripemd=q2,e.hmac=pI,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(In);function Ao(r,e,t){return t={path:e,exports:{},require:function(i,n){return gI(i,n??t.path)}},r(t,t.exports),t.exports}function gI(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Z0=U2;function U2(r,e){if(!r)throw new Error(e||"Assertion failed")}U2.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var dn=Ao(function(r,e){var t=e;function i(f,u){if(Array.isArray(f))return f.slice();if(!f)return[];var v=[];if(typeof f!="string"){for(var p=0;p<f.length;p++)v[p]=f[p]|0;return v}if(u==="hex"){f=f.replace(/[^a-z0-9]+/ig,""),f.length%2!==0&&(f="0"+f);for(var p=0;p<f.length;p+=2)v.push(parseInt(f[p]+f[p+1],16))}else for(var p=0;p<f.length;p++){var y=f.charCodeAt(p),_=y>>8,O=y&255;_?v.push(_,O):v.push(O)}return v}t.toArray=i;function n(f){return f.length===1?"0"+f:f}t.zero2=n;function a(f){for(var u="",v=0;v<f.length;v++)u+=n(f[v].toString(16));return u}t.toHex=a,t.encode=function(f,u){return u==="hex"?a(f):f}}),Ai=Ao(function(r,e){var t=e;t.assert=Z0,t.toArray=dn.toArray,t.zero2=dn.zero2,t.toHex=dn.toHex,t.encode=dn.encode;function i(v,p,y){var _=new Array(Math.max(v.bitLength(),y)+1);_.fill(0);for(var O=1<<p+1,D=v.clone(),C=0;C<_.length;C++){var H,W=D.andln(O-1);D.isOdd()?(W>(O>>1)-1?H=(O>>1)-W:H=W,D.isubn(H)):H=0,_[C]=H,D.iushrn(1)}return _}t.getNAF=i;function n(v,p){var y=[[],[]];v=v.clone(),p=p.clone();for(var _=0,O=0,D;v.cmpn(-_)>0||p.cmpn(-O)>0;){var C=v.andln(3)+_&3,H=p.andln(3)+O&3;C===3&&(C=-1),H===3&&(H=-1);var W;C&1?(D=v.andln(7)+_&7,(D===3||D===5)&&H===2?W=-C:W=C):W=0,y[0].push(W);var Q;H&1?(D=p.andln(7)+O&7,(D===3||D===5)&&C===2?Q=-H:Q=H):Q=0,y[1].push(Q),2*_===W+1&&(_=1-_),2*O===Q+1&&(O=1-O),v.iushrn(1),p.iushrn(1)}return y}t.getJSF=n;function a(v,p,y){var _="_"+p;v.prototype[p]=function(){return this[_]!==void 0?this[_]:this[_]=y.call(this)}}t.cachedProperty=a;function f(v){return typeof v=="string"?t.toArray(v,"hex"):v}t.parseBytes=f;function u(v){return new vt(v,"hex","le")}t.intFromLE=u}),Vf=Ai.getNAF,vI=Ai.getJSF,Au=Ai.assert;function Ts(r,e){this.type=r,this.p=new vt(e.p,16),this.red=e.prime?vt.red(e.prime):vt.mont(this.p),this.zero=new vt(0).toRed(this.red),this.one=new vt(1).toRed(this.red),this.two=new vt(2).toRed(this.red),this.n=e.n&&new vt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Aa=Ts;Ts.prototype.point=function(){throw new Error("Not implemented")},Ts.prototype.validate=function(){throw new Error("Not implemented")},Ts.prototype._fixedNafMul=function(r,e){Au(r.precomputed);var t=r._getDoubles(),i=Vf(e,1,this._bitLength),n=(1<<t.step+1)-(t.step%2===0?2:1);n/=3;var a=[],f,u;for(f=0;f<i.length;f+=t.step){u=0;for(var v=f+t.step-1;v>=f;v--)u=(u<<1)+i[v];a.push(u)}for(var p=this.jpoint(null,null,null),y=this.jpoint(null,null,null),_=n;_>0;_--){for(f=0;f<a.length;f++)u=a[f],u===_?y=y.mixedAdd(t.points[f]):u===-_&&(y=y.mixedAdd(t.points[f].neg()));p=p.add(y)}return p.toP()},Ts.prototype._wnafMul=function(r,e){var t=4,i=r._getNAFPoints(t);t=i.wnd;for(var n=i.points,a=Vf(e,t,this._bitLength),f=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var v=0;u>=0&&a[u]===0;u--)v++;if(u>=0&&v++,f=f.dblp(v),u<0)break;var p=a[u];Au(p!==0),r.type==="affine"?p>0?f=f.mixedAdd(n[p-1>>1]):f=f.mixedAdd(n[-p-1>>1].neg()):p>0?f=f.add(n[p-1>>1]):f=f.add(n[-p-1>>1].neg())}return r.type==="affine"?f.toP():f},Ts.prototype._wnafMulAdd=function(r,e,t,i,n){var a=this._wnafT1,f=this._wnafT2,u=this._wnafT3,v=0,p,y,_;for(p=0;p<i;p++){_=e[p];var O=_._getNAFPoints(r);a[p]=O.wnd,f[p]=O.points}for(p=i-1;p>=1;p-=2){var D=p-1,C=p;if(a[D]!==1||a[C]!==1){u[D]=Vf(t[D],a[D],this._bitLength),u[C]=Vf(t[C],a[C],this._bitLength),v=Math.max(u[D].length,v),v=Math.max(u[C].length,v);continue}var H=[e[D],null,null,e[C]];e[D].y.cmp(e[C].y)===0?(H[1]=e[D].add(e[C]),H[2]=e[D].toJ().mixedAdd(e[C].neg())):e[D].y.cmp(e[C].y.redNeg())===0?(H[1]=e[D].toJ().mixedAdd(e[C]),H[2]=e[D].add(e[C].neg())):(H[1]=e[D].toJ().mixedAdd(e[C]),H[2]=e[D].toJ().mixedAdd(e[C].neg()));var W=[-3,-1,-5,-7,0,7,5,1,3],Q=vI(t[D],t[C]);for(v=Math.max(Q[0].length,v),u[D]=new Array(v),u[C]=new Array(v),y=0;y<v;y++){var z=Q[0][y]|0,Y=Q[1][y]|0;u[D][y]=W[(z+1)*3+(Y+1)],u[C][y]=0,f[D]=H}}var q=this.jpoint(null,null,null),j=this._wnafT4;for(p=v;p>=0;p--){for(var V=0;p>=0;){var A=!0;for(y=0;y<i;y++)j[y]=u[y][p]|0,j[y]!==0&&(A=!1);if(!A)break;V++,p--}if(p>=0&&V++,q=q.dblp(V),p<0)break;for(y=0;y<i;y++){var F=j[y];F!==0&&(F>0?_=f[y][F-1>>1]:F<0&&(_=f[y][-F-1>>1].neg()),_.type==="affine"?q=q.mixedAdd(_):q=q.add(_))}}for(p=0;p<i;p++)f[p]=null;return n?q:q.toP()};function Bi(r,e){this.curve=r,this.type=e,this.precomputed=null}Ts.BasePoint=Bi,Bi.prototype.eq=function(){throw new Error("Not implemented")},Bi.prototype.validate=function(){return this.curve.validate(this)},Ts.prototype.decodePoint=function(r,e){r=Ai.toArray(r,e);var t=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*t){r[0]===6?Au(r[r.length-1]%2===0):r[0]===7&&Au(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+t),r.slice(1+t,1+2*t));return i}else if((r[0]===2||r[0]===3)&&r.length-1===t)return this.pointFromX(r.slice(1,1+t),r[0]===3);throw new Error("Unknown point format")},Bi.prototype.encodeCompressed=function(r){return this.encode(r,!0)},Bi.prototype._encode=function(r){var e=this.curve.p.byteLength(),t=this.getX().toArray("be",e);return r?[this.getY().isEven()?2:3].concat(t):[4].concat(t,this.getY().toArray("be",e))},Bi.prototype.encode=function(r,e){return Ai.encode(this._encode(e),r)},Bi.prototype.precompute=function(r){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,r),e.beta=this._getBeta(),this.precomputed=e,this},Bi.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((r.bitLength()+1)/e.step):!1},Bi.prototype._getDoubles=function(r,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var t=[this],i=this,n=0;n<e;n+=r){for(var a=0;a<r;a++)i=i.dbl();t.push(i)}return{step:r,points:t}},Bi.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],t=(1<<r)-1,i=t===1?null:this.dbl(),n=1;n<t;n++)e[n]=e[n-1].add(i);return{wnd:r,points:e}},Bi.prototype._getBeta=function(){return null},Bi.prototype.dblp=function(r){for(var e=this,t=0;t<r;t++)e=e.dbl();return e};var ed=Ao(function(r){typeof Object.create=="function"?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}}),bI=Ai.assert;function zi(r){Aa.call(this,"short",r),this.a=new vt(r.a,16).toRed(this.red),this.b=new vt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ed(zi,Aa);var mI=zi;zi.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,t;if(r.beta)e=new vt(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=i[0].cmp(i[1])<0?i[0]:i[1],e=e.toRed(this.red)}if(r.lambda)t=new vt(r.lambda,16);else{var n=this._getEndoRoots(this.n);this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))===0?t=n[0]:(t=n[1],bI(this.g.mul(t).x.cmp(this.g.x.redMul(e))===0))}var a;return r.basis?a=r.basis.map(function(f){return{a:new vt(f.a,16),b:new vt(f.b,16)}}):a=this._getEndoBasis(t),{beta:e,lambda:t,basis:a}}},zi.prototype._getEndoRoots=function(r){var e=r===this.p?this.red:vt.mont(r),t=new vt(2).toRed(e).redInvm(),i=t.redNeg(),n=new vt(3).toRed(e).redNeg().redSqrt().redMul(t),a=i.redAdd(n).fromRed(),f=i.redSub(n).fromRed();return[a,f]},zi.prototype._getEndoBasis=function(r){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),t=r,i=this.n.clone(),n=new vt(1),a=new vt(0),f=new vt(0),u=new vt(1),v,p,y,_,O,D,C,H=0,W,Q;t.cmpn(0)!==0;){var z=i.div(t);W=i.sub(z.mul(t)),Q=f.sub(z.mul(n));var Y=u.sub(z.mul(a));if(!y&&W.cmp(e)<0)v=C.neg(),p=n,y=W.neg(),_=Q;else if(y&&++H===2)break;C=W,i=t,t=W,f=n,n=Q,u=a,a=Y}O=W.neg(),D=Q;var q=y.sqr().add(_.sqr()),j=O.sqr().add(D.sqr());return j.cmp(q)>=0&&(O=v,D=p),y.negative&&(y=y.neg(),_=_.neg()),O.negative&&(O=O.neg(),D=D.neg()),[{a:y,b:_},{a:O,b:D}]},zi.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],i=e[1],n=i.b.mul(r).divRound(this.n),a=t.b.neg().mul(r).divRound(this.n),f=n.mul(t.a),u=a.mul(i.a),v=n.mul(t.b),p=a.mul(i.b),y=r.sub(f).sub(u),_=v.add(p).neg();return{k1:y,k2:_}},zi.prototype.pointFromX=function(r,e){r=new vt(r,16),r.red||(r=r.toRed(this.red));var t=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=t.redSqrt();if(i.redSqr().redSub(t).cmp(this.zero)!==0)throw new Error("invalid point");var n=i.fromRed().isOdd();return(e&&!n||!e&&n)&&(i=i.redNeg()),this.point(r,i)},zi.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,i=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return t.redSqr().redISub(n).cmpn(0)===0},zi.prototype._endoWnafMulAdd=function(r,e,t){for(var i=this._endoWnafT1,n=this._endoWnafT2,a=0;a<r.length;a++){var f=this._endoSplit(e[a]),u=r[a],v=u._getBeta();f.k1.negative&&(f.k1.ineg(),u=u.neg(!0)),f.k2.negative&&(f.k2.ineg(),v=v.neg(!0)),i[a*2]=u,i[a*2+1]=v,n[a*2]=f.k1,n[a*2+1]=f.k2}for(var p=this._wnafMulAdd(1,i,n,a*2,t),y=0;y<a*2;y++)i[y]=null,n[y]=null;return p};function yr(r,e,t,i){Aa.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(e,16),this.y=new vt(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ed(yr,Aa.BasePoint),zi.prototype.point=function(r,e,t){return new yr(this,r,e,t)},zi.prototype.pointFromJSON=function(r,e){return yr.fromJSON(this,r,e)},yr.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,i=function(n){return t.point(n.x.redMul(t.endo.beta),n.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e}},yr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},yr.fromJSON=function(r,e,t){typeof e=="string"&&(e=JSON.parse(e));var i=r.point(e[0],e[1],t);if(!e[2])return i;function n(f){return r.point(f[0],f[1],t)}var a=e[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(n))}},i},yr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},yr.prototype.isInfinity=function(){return this.inf},yr.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var e=this.y.redSub(r.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),i=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,i)},yr.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),i=r.redInvm(),n=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(i),a=n.redSqr().redISub(this.x.redAdd(this.x)),f=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,f)},yr.prototype.getX=function(){return this.x.fromRed()},yr.prototype.getY=function(){return this.y.fromRed()},yr.prototype.mul=function(r){return r=new vt(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},yr.prototype.mulAdd=function(r,e,t){var i=[this,e],n=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},yr.prototype.jmulAdd=function(r,e,t){var i=[this,e],n=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},yr.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},yr.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,i=function(n){return n.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e},yr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function Ir(r,e,t,i){Aa.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(e,16),this.y=new vt(t,16),this.z=new vt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ed(Ir,Aa.BasePoint),zi.prototype.jpoint=function(r,e,t){return new Ir(this,r,e,t)},Ir.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),i=this.y.redMul(e).redMul(r);return this.curve.point(t,i)},Ir.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Ir.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),i=this.x.redMul(e),n=r.x.redMul(t),a=this.y.redMul(e.redMul(r.z)),f=r.y.redMul(t.redMul(this.z)),u=i.redSub(n),v=a.redSub(f);if(u.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=u.redSqr(),y=p.redMul(u),_=i.redMul(p),O=v.redSqr().redIAdd(y).redISub(_).redISub(_),D=v.redMul(_.redISub(O)).redISub(a.redMul(y)),C=this.z.redMul(r.z).redMul(u);return this.curve.jpoint(O,D,C)},Ir.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,i=r.x.redMul(e),n=this.y,a=r.y.redMul(e).redMul(this.z),f=t.redSub(i),u=n.redSub(a);if(f.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=f.redSqr(),p=v.redMul(f),y=t.redMul(v),_=u.redSqr().redIAdd(p).redISub(y).redISub(y),O=u.redMul(y.redISub(_)).redISub(n.redMul(p)),D=this.z.redMul(f);return this.curve.jpoint(_,O,D)},Ir.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<r;e++)t=t.dbl();return t}var i=this.curve.a,n=this.curve.tinv,a=this.x,f=this.y,u=this.z,v=u.redSqr().redSqr(),p=f.redAdd(f);for(e=0;e<r;e++){var y=a.redSqr(),_=p.redSqr(),O=_.redSqr(),D=y.redAdd(y).redIAdd(y).redIAdd(i.redMul(v)),C=a.redMul(_),H=D.redSqr().redISub(C.redAdd(C)),W=C.redISub(H),Q=D.redMul(W);Q=Q.redIAdd(Q).redISub(O);var z=p.redMul(u);e+1<r&&(v=v.redMul(O)),a=H,u=z,p=Q}return this.curve.jpoint(a,p.redMul(n),u)},Ir.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Ir.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(i).redISub(a);f=f.redIAdd(f);var u=i.redAdd(i).redIAdd(i),v=u.redSqr().redISub(f).redISub(f),p=a.redIAdd(a);p=p.redIAdd(p),p=p.redIAdd(p),r=v,e=u.redMul(f.redISub(v)).redISub(p),t=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),_=this.y.redSqr(),O=_.redSqr(),D=this.x.redAdd(_).redSqr().redISub(y).redISub(O);D=D.redIAdd(D);var C=y.redAdd(y).redIAdd(y),H=C.redSqr(),W=O.redIAdd(O);W=W.redIAdd(W),W=W.redIAdd(W),r=H.redISub(D).redISub(D),e=C.redMul(D.redISub(r)).redISub(W),t=this.y.redMul(this.z),t=t.redIAdd(t)}return this.curve.jpoint(r,e,t)},Ir.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(i).redISub(a);f=f.redIAdd(f);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),v=u.redSqr().redISub(f).redISub(f);r=v;var p=a.redIAdd(a);p=p.redIAdd(p),p=p.redIAdd(p),e=u.redMul(f.redISub(v)).redISub(p),t=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),_=this.y.redSqr(),O=this.x.redMul(_),D=this.x.redSub(y).redMul(this.x.redAdd(y));D=D.redAdd(D).redIAdd(D);var C=O.redIAdd(O);C=C.redIAdd(C);var H=C.redAdd(C);r=D.redSqr().redISub(H),t=this.y.redAdd(this.z).redSqr().redISub(_).redISub(y);var W=_.redSqr();W=W.redIAdd(W),W=W.redIAdd(W),W=W.redIAdd(W),e=D.redMul(C.redISub(r)).redISub(W)}return this.curve.jpoint(r,e,t)},Ir.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,i=this.z,n=i.redSqr().redSqr(),a=e.redSqr(),f=t.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(r.redMul(n)),v=e.redAdd(e);v=v.redIAdd(v);var p=v.redMul(f),y=u.redSqr().redISub(p.redAdd(p)),_=p.redISub(y),O=f.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var D=u.redMul(_).redISub(O),C=t.redAdd(t).redMul(i);return this.curve.jpoint(y,D,C)},Ir.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),i=e.redSqr(),n=r.redAdd(r).redIAdd(r),a=n.redSqr(),f=this.x.redAdd(e).redSqr().redISub(r).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(a);var u=f.redSqr(),v=i.redIAdd(i);v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var p=n.redIAdd(f).redSqr().redISub(a).redISub(u).redISub(v),y=e.redMul(p);y=y.redIAdd(y),y=y.redIAdd(y);var _=this.x.redMul(u).redISub(y);_=_.redIAdd(_),_=_.redIAdd(_);var O=this.y.redMul(p.redMul(v.redISub(p)).redISub(f.redMul(u)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var D=this.z.redAdd(f).redSqr().redISub(t).redISub(u);return this.curve.jpoint(_,O,D)},Ir.prototype.mul=function(r,e){return r=new vt(r,e),this.curve._wnafMul(this,r)},Ir.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0)!==0)return!1;var i=e.redMul(this.z),n=t.redMul(r.z);return this.y.redMul(n).redISub(r.y.redMul(i)).cmpn(0)===0},Ir.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(this.x.cmp(t)===0)return!0;for(var i=r.clone(),n=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),this.x.cmp(t)===0)return!0}},Ir.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var iu=Ao(function(r,e){var t=e;t.base=Aa,t.short=mI,t.mont=null,t.edwards=null}),nu=Ao(function(r,e){var t=e,i=Ai.assert;function n(u){u.type==="short"?this.curve=new iu.short(u):u.type==="edwards"?this.curve=new iu.edwards(u):this.curve=new iu.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=n;function a(u,v){Object.defineProperty(t,u,{configurable:!0,enumerable:!0,get:function(){var p=new n(v);return Object.defineProperty(t,u,{configurable:!0,enumerable:!0,value:p}),p}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:In.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:In.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:In.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:In.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:In.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:In.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:In.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=null.crash()}catch{f=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:In.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})});function Fs(r){if(!(this instanceof Fs))return new Fs(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=dn.toArray(r.entropy,r.entropyEnc||"hex"),t=dn.toArray(r.nonce,r.nonceEnc||"hex"),i=dn.toArray(r.pers,r.persEnc||"hex");Z0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var _g=Fs;Fs.prototype._init=function(r,e,t){var i=r.concat(e).concat(t);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},Fs.prototype._hmac=function(){return new In.hmac(this.hash,this.K)},Fs.prototype._update=function(r){var e=this._hmac().update(this.V).update([0]);r&&(e=e.update(r)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},Fs.prototype.reseed=function(r,e,t,i){typeof e!="string"&&(i=t,t=e,e=null),r=dn.toArray(r,e),t=dn.toArray(t,i),Z0(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(t||[])),this._reseed=1},Fs.prototype.generate=function(r,e,t,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(i=t,t=e,e=null),t&&(t=dn.toArray(t,i||"hex"),this._update(t));for(var n=[];n.length<r;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var a=n.slice(0,r);return this._update(t),this._reseed++,dn.encode(a,e)};var Bl=Ai.assert;function $r(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Ll=$r;$r.fromPublic=function(r,e,t){return e instanceof $r?e:new $r(r,{pub:e,pubEnc:t})},$r.fromPrivate=function(r,e,t){return e instanceof $r?e:new $r(r,{priv:e,privEnc:t})},$r.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},$r.prototype.getPublic=function(r,e){return typeof r=="string"&&(e=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,r):this.pub},$r.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},$r.prototype._importPrivate=function(r,e){this.priv=new vt(r,e||16),this.priv=this.priv.umod(this.ec.curve.n)},$r.prototype._importPublic=function(r,e){if(r.x||r.y){this.ec.curve.type==="mont"?Bl(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Bl(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,e)},$r.prototype.derive=function(r){return r.validate()||Bl(r.validate(),"public point not validated"),r.mul(this.priv).getX()},$r.prototype.sign=function(r,e,t){return this.ec.sign(r,this,e,t)},$r.prototype.verify=function(r,e){return this.ec.verify(r,e,this)},$r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var yI=Ai.assert;function Ju(r,e){if(r instanceof Ju)return r;this._importDER(r,e)||(yI(r.r&&r.s,"Signature without r or s"),this.r=new vt(r.r,16),this.s=new vt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Gf=Ju;function wI(){this.place=0}function ql(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var n=0,a=0,f=e.place;a<i;a++,f++)n<<=8,n|=r[f],n>>>=0;return n<=127?!1:(e.place=f,n)}function Ag(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Ju.prototype._importDER=function(r,e){r=Ai.toArray(r,e);var t=new wI;if(r[t.place++]!==48)return!1;var i=ql(r,t);if(i===!1||i+t.place!==r.length||r[t.place++]!==2)return!1;var n=ql(r,t);if(n===!1)return!1;var a=r.slice(t.place,n+t.place);if(t.place+=n,r[t.place++]!==2)return!1;var f=ql(r,t);if(f===!1||r.length!==f+t.place)return!1;var u=r.slice(t.place,f+t.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new vt(a),this.s=new vt(u),this.recoveryParam=null,!0};function $l(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Ju.prototype.toDER=function(r){var e=this.r.toArray(),t=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),t[0]&128&&(t=[0].concat(t)),e=Ag(e),t=Ag(t);!t[0]&&!(t[1]&128);)t=t.slice(1);var i=[2];$l(i,e.length),i=i.concat(e),i.push(2),$l(i,t.length);var n=i.concat(t),a=[48];return $l(a,n.length),a=a.concat(n),Ai.encode(a,r)};var _I=function(){throw new Error("unsupported")},z2=Ai.assert;function $i(r){if(!(this instanceof $i))return new $i(r);typeof r=="string"&&(z2(Object.prototype.hasOwnProperty.call(nu,r),"Unknown curve "+r),r=nu[r]),r instanceof nu.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var AI=$i;$i.prototype.keyPair=function(r){return new Ll(this,r)},$i.prototype.keyFromPrivate=function(r,e){return Ll.fromPrivate(this,r,e)},$i.prototype.keyFromPublic=function(r,e){return Ll.fromPublic(this,r,e)},$i.prototype.genKeyPair=function(r){r||(r={});for(var e=new _g({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||_I(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),t=this.n.byteLength(),i=this.n.sub(new vt(2));;){var n=new vt(e.generate(t));if(!(n.cmp(i)>0))return n.iaddn(1),this.keyFromPrivate(n)}},$i.prototype._truncateToN=function(r,e){var t=r.byteLength()*8-this.n.bitLength();return t>0&&(r=r.ushrn(t)),!e&&r.cmp(this.n)>=0?r.sub(this.n):r},$i.prototype.sign=function(r,e,t,i){typeof t=="object"&&(i=t,t=null),i||(i={}),e=this.keyFromPrivate(e,t),r=this._truncateToN(new vt(r,16));for(var n=this.n.byteLength(),a=e.getPrivate().toArray("be",n),f=r.toArray("be",n),u=new _g({hash:this.hash,entropy:a,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),v=this.n.sub(new vt(1)),p=0;;p++){var y=i.k?i.k(p):new vt(u.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(v)>=0)){var _=this.g.mul(y);if(!_.isInfinity()){var O=_.getX(),D=O.umod(this.n);if(D.cmpn(0)!==0){var C=y.invm(this.n).mul(D.mul(e.getPrivate()).iadd(r));if(C=C.umod(this.n),C.cmpn(0)!==0){var H=(_.getY().isOdd()?1:0)|(O.cmp(D)!==0?2:0);return i.canonical&&C.cmp(this.nh)>0&&(C=this.n.sub(C),H^=1),new Gf({r:D,s:C,recoveryParam:H})}}}}}},$i.prototype.verify=function(r,e,t,i){r=this._truncateToN(new vt(r,16)),t=this.keyFromPublic(t,i),e=new Gf(e,"hex");var n=e.r,a=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var f=a.invm(this.n),u=f.mul(r).umod(this.n),v=f.mul(n).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(u,t.getPublic(),v),p.isInfinity()?!1:p.eqXToP(n)):(p=this.g.mulAdd(u,t.getPublic(),v),p.isInfinity()?!1:p.getX().umod(this.n).cmp(n)===0)},$i.prototype.recoverPubKey=function(r,e,t,i){z2((3&t)===t,"The recovery param is more than two bits"),e=new Gf(e,i);var n=this.n,a=new vt(r),f=e.r,u=e.s,v=t&1,p=t>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&p)throw new Error("Unable to find sencond key candinate");p?f=this.curve.pointFromX(f.add(this.curve.n),v):f=this.curve.pointFromX(f,v);var y=e.r.invm(n),_=n.sub(a).mul(y).umod(n),O=u.mul(y).umod(n);return this.g.mulAdd(_,f,O)},$i.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Gf(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var a;try{a=this.recoverPubKey(r,e,n)}catch{continue}if(a.eq(t))return n}throw new Error("Unable to find valid recovery factor")};var EI=Ao(function(r,e){var t=e;t.version="6.5.4",t.utils=Ai,t.rand=function(){throw new Error("unsupported")},t.curve=iu,t.curves=nu,t.ec=AI,t.eddsa=null}),xI=EI.ec;const SI="signing-key/5.7.0",y0=new Mr(SI);let Ul=null;function Rn(){return Ul||(Ul=new xI("secp256k1")),Ul}class II{constructor(e){Jo(this,"curve","secp256k1"),Jo(this,"privateKey",Vr(e)),fx(this.privateKey)!==32&&y0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Rn().keyFromPrivate(ir(this.privateKey));Jo(this,"publicKey","0x"+t.getPublic(!1,"hex")),Jo(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Jo(this,"_isSigningKey",!0)}_addPoint(e){const t=Rn().keyFromPublic(ir(this.publicKey)),i=Rn().keyFromPublic(ir(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const t=Rn().keyFromPrivate(ir(this.privateKey)),i=ir(e);i.length!==32&&y0.throwArgumentError("bad digest length","digest",e);const n=t.sign(i,{canonical:!0});return l2({recoveryParam:n.recoveryParam,r:Bn("0x"+n.r.toString(16),32),s:Bn("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Rn().keyFromPrivate(ir(this.privateKey)),i=Rn().keyFromPublic(ir(j2(e)));return Bn("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function MI(r,e){const t=l2(e),i={r:ir(t.r),s:ir(t.s)};return"0x"+Rn().recoverPubKey(ir(r),i,t.recoveryParam).encode("hex",!1)}function j2(r,e){const t=ir(r);if(t.length===32){const i=new II(t);return e?"0x"+Rn().keyFromPrivate(t).getPublic(!0,"hex"):i.publicKey}else{if(t.length===33)return e?Vr(t):"0x"+Rn().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+Rn().keyFromPublic(t).getPublic(!0,"hex"):Vr(t)}return y0.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Eg;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(Eg||(Eg={}));function DI(r){const e=j2(r);return $x(cg(Y0(cg(e,1)),12))}function PI(r,e){return DI(MI(ir(r),e))}const OI="https://rpc.walletconnect.org/v1";async function CI(r,e,t,i,n,a){switch(t.t){case"eip191":return RI(r,e,t.s);case"eip1271":return await NI(r,e,t.s,i,n,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function RI(r,e,t){return PI(_2(e),t).toLowerCase()===r.toLowerCase()}async function NI(r,e,t,i,n,a){try{const f="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",v="0000000000000000000000000000000000000000000000000000000000000041",p=t.substring(2),y=_2(e).substring(2),_=f+y+u+v+p,O=await fetch(`${a||OI}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:TI(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:_},"latest"]})}),{result:D}=await O.json();return D?D.slice(0,f.length).toLowerCase()===f.toLowerCase():!1}catch(f){return console.error("isValidEip1271Signature: ",f),!1}}function TI(){return Date.now()+Math.floor(Math.random()*1e3)}var FI=Object.defineProperty,BI=Object.defineProperties,LI=Object.getOwnPropertyDescriptors,xg=Object.getOwnPropertySymbols,qI=Object.prototype.hasOwnProperty,$I=Object.prototype.propertyIsEnumerable,Sg=(r,e,t)=>e in r?FI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,UI=(r,e)=>{for(var t in e||(e={}))qI.call(e,t)&&Sg(r,t,e[t]);if(xg)for(var t of xg(e))$I.call(e,t)&&Sg(r,t,e[t]);return r},zI=(r,e)=>BI(r,LI(e));const jI="did:pkh:",td=r=>r?.split(":"),k2=r=>{const e=r&&td(r);if(e)return r.includes(jI)?e[3]:e[1]},Ig=r=>{const e=r&&td(r);if(e)return e[2]+":"+e[3]},Eu=r=>{const e=r&&td(r);if(e)return e.pop()};async function Mg(r){const{cacao:e,projectId:t}=r,{s:i,p:n}=e,a=H2(n,n.iss),f=Eu(n.iss);return await CI(f,a,i,k2(n.iss),t)}const H2=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,i=Eu(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=r.statement||void 0;const a=`URI: ${r.aud||r.uri}`,f=`Version: ${r.version}`,u=`Chain ID: ${k2(e)}`,v=`Nonce: ${r.nonce}`,p=`Issued At: ${r.iat}`,y=r.exp?`Expiration Time: ${r.exp}`:void 0,_=r.nbf?`Not Before: ${r.nbf}`:void 0,O=r.requestId?`Request ID: ${r.requestId}`:void 0,D=r.resources?`Resources:${r.resources.map(H=>`
- ${H}`).join("")}`:void 0,C=su(r.resources);if(C){const H=yc(C);n=QI(n,H)}return[t,i,"",n,"",a,f,u,v,p,y,_,O,D].filter(H=>H!=null).join(`
`)};function kI(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function HI(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function ba(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(n=>{const a=i[n];if(!Array.isArray(a))throw new Error(`Ability limits ${n} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);a.forEach(f=>{if(typeof f!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${f}`)})})})}function KI(r,e,t,i={}){return t?.sort((n,a)=>n.localeCompare(a)),{att:{[r]:VI(e,t,i)}}}function VI(r,e,t={}){e=e?.sort((n,a)=>n.localeCompare(a));const i=e.map(n=>({[`${r}/${n}`]:[t]}));return Object.assign({},...i)}function K2(r){return ba(r),`urn:recap:${kI(r).replace(/=/g,"")}`}function yc(r){const e=HI(r.replace("urn:recap:",""));return ba(e),e}function GI(r,e,t){const i=KI(r,e,t);return K2(i)}function WI(r){return r&&r.includes("urn:recap:")}function JI(r,e){const t=yc(r),i=yc(e),n=YI(t,i);return K2(n)}function YI(r,e){ba(r),ba(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((n,a)=>n.localeCompare(a)),i={att:{}};return t.forEach(n=>{var a,f;Object.keys(((a=r.att)==null?void 0:a[n])||{}).concat(Object.keys(((f=e.att)==null?void 0:f[n])||{})).sort((u,v)=>u.localeCompare(v)).forEach(u=>{var v,p;i.att[n]=zI(UI({},i.att[n]),{[u]:((v=r.att[n])==null?void 0:v[u])||((p=e.att[n])==null?void 0:p[u])})})}),i}function QI(r="",e){ba(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const i=[];let n=0;Object.keys(e.att).forEach(u=>{const v=Object.keys(e.att[u]).map(_=>({ability:_.split("/")[0],action:_.split("/")[1]}));v.sort((_,O)=>_.action.localeCompare(O.action));const p={};v.forEach(_=>{p[_.ability]||(p[_.ability]=[]),p[_.ability].push(_.action)});const y=Object.keys(p).map(_=>(n++,`(${n}) '${_}': '${p[_].join("', '")}' for '${u}'.`));i.push(y.join(", ").replace(".,","."))});const a=i.join(" "),f=`${t}${a}`;return`${r?r+" ":""}${f}`}function Dg(r){var e;const t=yc(r);ba(t);const i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function Pg(r){const e=yc(r);ba(e);const t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(n=>{var a;(a=n?.[0])!=null&&a.chains&&t.push(n[0].chains)})}),[...new Set(t.flat())]}function su(r){if(!r)return;const e=r?.[r.length-1];return WI(e)?e:void 0}const V2="base10",Yr="base16",Ls="base64pad",Xo="base64url",Nc="utf8",G2=0,gs=1,Tc=2,XI=0,Og=1,hc=12,rd=32;function ZI(){const r=$0.generateKeyPair();return{privateKey:fi(r.secretKey,Yr),publicKey:fi(r.publicKey,Yr)}}function w0(){const r=zs.randomBytes(rd);return fi(r,Yr)}function eM(r,e){const t=$0.sharedKey(ji(r,Yr),ji(e,Yr),!0),i=new Z_(Ic.SHA256,t).expand(rd);return fi(i,Yr)}function au(r){const e=Ic.hash(ji(r,Yr));return fi(e,Yr)}function hs(r){const e=Ic.hash(ji(r,Nc));return fi(e,Yr)}function W2(r){return ji(`${r}`,V2)}function ma(r){return Number(fi(r,V2))}function tM(r){const e=W2(typeof r.type<"u"?r.type:G2);if(ma(e)===gs&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?ji(r.senderPublicKey,Yr):void 0,i=typeof r.iv<"u"?ji(r.iv,Yr):zs.randomBytes(hc),n=new L0.ChaCha20Poly1305(ji(r.symKey,Yr)).seal(i,ji(r.message,Nc));return J2({type:e,sealed:n,iv:i,senderPublicKey:t,encoding:r.encoding})}function rM(r,e){const t=W2(Tc),i=zs.randomBytes(hc),n=ji(r,Nc);return J2({type:t,sealed:n,iv:i,encoding:e})}function iM(r){const e=new L0.ChaCha20Poly1305(ji(r.symKey,Yr)),{sealed:t,iv:i}=wc({encoded:r.encoded,encoding:r?.encoding}),n=e.open(i,t);if(n===null)throw new Error("Failed to decrypt");return fi(n,Nc)}function nM(r,e){const{sealed:t}=wc({encoded:r,encoding:e});return fi(t,Nc)}function J2(r){const{encoding:e=Ls}=r;if(ma(r.type)===Tc)return fi(gl([r.type,r.sealed]),e);if(ma(r.type)===gs){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fi(gl([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return fi(gl([r.type,r.iv,r.sealed]),e)}function wc(r){const{encoded:e,encoding:t=Ls}=r,i=ji(e,t),n=i.slice(XI,Og),a=Og;if(ma(n)===gs){const p=a+rd,y=p+hc,_=i.slice(a,p),O=i.slice(p,y),D=i.slice(y);return{type:n,sealed:D,iv:O,senderPublicKey:_}}if(ma(n)===Tc){const p=i.slice(a),y=zs.randomBytes(hc);return{type:n,sealed:p,iv:y}}const f=a+hc,u=i.slice(a,f),v=i.slice(f);return{type:n,sealed:v,iv:u}}function sM(r,e){const t=wc({encoded:r,encoding:e?.encoding});return Y2({type:ma(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?fi(t.senderPublicKey,Yr):void 0,receiverPublicKey:e?.receiverPublicKey})}function Y2(r){const e=r?.type||G2;if(e===gs){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Cg(r){return r.type===gs&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function Rg(r){return r.type===Tc}function aM(r){return new wb.ec("p256").keyFromPublic({x:Buffer.from(r.x,"base64").toString("hex"),y:Buffer.from(r.y,"base64").toString("hex")},"hex")}function oM(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");const t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function cM(r){return Buffer.from(oM(r),"base64")}function fM(r,e){const[t,i,n]=r.split("."),a=cM(n);if(a.length!==64)throw new Error("Invalid signature length");const f=a.slice(0,32).toString("hex"),u=a.slice(32,64).toString("hex"),v=`${t}.${i}`,p=new Ic.SHA256().update(Buffer.from(v)).digest(),y=aM(e),_=Buffer.from(p).toString("hex");if(!y.verify(_,{r:f,s:u}))throw new Error("Invalid signature");return d0(r).payload}const uM="irn";function _0(r){return r?.relay||{protocol:uM}}function ac(r){const e=FE[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var hM=Object.defineProperty,lM=Object.defineProperties,dM=Object.getOwnPropertyDescriptors,Ng=Object.getOwnPropertySymbols,pM=Object.prototype.hasOwnProperty,gM=Object.prototype.propertyIsEnumerable,Tg=(r,e,t)=>e in r?hM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fg=(r,e)=>{for(var t in e||(e={}))pM.call(e,t)&&Tg(r,t,e[t]);if(Ng)for(var t of Ng(e))gM.call(e,t)&&Tg(r,t,e[t]);return r},vM=(r,e)=>lM(r,dM(e));function bM(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(n=>{if(n.startsWith(i)){const a=n.replace(i,""),f=r[n];t[a]=f}}),t}function Bg(r){if(!r.includes("wc:")){const v=c2(r);v!=null&&v.includes("wc:")&&(r=v)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),n=r.substring(e+1,t).split("@"),a=typeof t<"u"?r.substring(t):"",f=bc.parse(a),u=typeof f.methods=="string"?f.methods.split(","):void 0;return{protocol:i,topic:mM(n[0]),version:parseInt(n[1],10),symKey:f.symKey,relay:bM(f),methods:u,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function mM(r){return r.startsWith("//")?r.substring(2):r}function yM(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(n=>{const a=t+e+n;r[n]&&(i[a]=r[n])}),i}function Lg(r){return`${r.protocol}:${r.topic}@${r.version}?`+bc.stringify(Fg(vM(Fg({symKey:r.symKey},yM(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function Wf(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function Eo(r){const e=[];return r.forEach(t=>{const[i,n]=t.split(":");e.push(`${i}:${n}`)}),e}function wM(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Eo(t.accounts))}),e}function _M(r,e){const t=[];return Object.values(r).forEach(i=>{Eo(i.accounts).includes(e)&&t.push(...i.methods)}),t}function AM(r,e){const t=[];return Object.values(r).forEach(i=>{Eo(i.accounts).includes(e)&&t.push(...i.events)}),t}function id(r){return r.includes(":")}function oc(r){return id(r)?r.split(":")[0]:r}function EM(r){const e={};return r?.forEach(t=>{const[i,n]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(t),e[i].chains.push(`${i}:${n}`)}),e}function qg(r,e){e=e.map(i=>i.replace("did:pkh:",""));const t=EM(e);for(const[i,n]of Object.entries(t))n.methods?n.methods=tu(n.methods,r):n.methods=r,n.events=["chainChanged","accountsChanged"];return t}const xM={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},SM={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ae(r,e){const{message:t,code:i}=SM[r];return{message:e?`${t} ${e}`:t,code:i}}function $t(r,e){const{message:t,code:i}=xM[r];return{message:e?`${t} ${e}`:t,code:i}}function Hn(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function _c(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Jr(r){return typeof r>"u"}function fr(r,e){return e&&Jr(r)?!0:typeof r=="string"&&!!r.trim().length}function nd(r,e){return e&&Jr(r)?!0:typeof r=="number"&&!isNaN(r)}function IM(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),n=Object.keys(t);let a=!0;return ua(n,i)?(i.forEach(f=>{const{accounts:u,methods:v,events:p}=r.namespaces[f],y=Eo(u),_=t[f];(!ua(t2(f,_),y)||!ua(_.methods,v)||!ua(_.events,p))&&(a=!1)}),a):!1}function xu(r){return fr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function MM(r){if(fr(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&xu(t)}}return!1}function DM(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(fr(r,!1)){if(e(r))return!0;const t=c2(r);return e(t)}}catch{}return!1}function PM(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function OM(r){return r?.topic}function CM(r,e){let t=null;return fr(r?.publicKey,!1)||(t=Ae("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function $g(r){let e=!0;return Hn(r)?r.length&&(e=r.every(t=>fr(t,!1))):e=!1,e}function RM(r,e,t){let i=null;return Hn(e)&&e.length?e.forEach(n=>{i||xu(n)||(i=$t("UNSUPPORTED_CHAINS",`${t}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):xu(r)||(i=$t("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function NM(r,e,t){let i=null;return Object.entries(r).forEach(([n,a])=>{if(i)return;const f=RM(n,t2(n,a),`${e} ${t}`);f&&(i=f)}),i}function TM(r,e){let t=null;return Hn(r)?r.forEach(i=>{t||MM(i)||(t=$t("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=$t("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function FM(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const n=TM(i?.accounts,`${e} namespace`);n&&(t=n)}),t}function BM(r,e){let t=null;return $g(r?.methods)?$g(r?.events)||(t=$t("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=$t("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Q2(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const n=BM(i,`${e}, namespace`);n&&(t=n)}),t}function LM(r,e,t){let i=null;if(r&&_c(r)){const n=Q2(r,e);n&&(i=n);const a=NM(r,e,t);a&&(i=a)}else i=Ae("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function zl(r,e){let t=null;if(r&&_c(r)){const i=Q2(r,e);i&&(t=i);const n=FM(r,e);n&&(t=n)}else t=Ae("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function X2(r){return fr(r.protocol,!0)}function qM(r,e){let t=!1;return e&&!r?t=!0:r&&Hn(r)&&r.length&&r.forEach(i=>{t=X2(i)}),t}function $M(r){return typeof r=="number"}function ci(r){return typeof r<"u"&&typeof r!==null}function UM(r){return!(!r||typeof r!="object"||!r.code||!nd(r.code,!1)||!r.message||!fr(r.message,!1))}function zM(r){return!(Jr(r)||!fr(r.method,!1))}function jM(r){return!(Jr(r)||Jr(r.result)&&Jr(r.error)||!nd(r.id,!1)||!fr(r.jsonrpc,!1))}function kM(r){return!(Jr(r)||!fr(r.name,!1))}function Ug(r,e){return!(!xu(e)||!wM(r).includes(e))}function HM(r,e,t){return fr(t,!1)?_M(r,e).includes(t):!1}function KM(r,e,t){return fr(t,!1)?AM(r,e).includes(t):!1}function zg(r,e,t){let i=null;const n=VM(r),a=GM(e),f=Object.keys(n),u=Object.keys(a),v=jg(Object.keys(r)),p=jg(Object.keys(e)),y=v.filter(_=>!p.includes(_));return y.length&&(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${y.toString()}
      Received: ${Object.keys(e).toString()}`)),ua(f,u)||(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${u.toString()}`)),Object.keys(e).forEach(_=>{if(!_.includes(":")||i)return;const O=Eo(e[_].accounts);O.includes(_)||(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${_}
        Required: ${_}
        Approved: ${O.toString()}`))}),f.forEach(_=>{i||(ua(n[_].methods,a[_].methods)?ua(n[_].events,a[_].events)||(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${_}`)):i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${_}`))}),i}function VM(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(n=>{e[n]={methods:r[t].methods,events:r[t].events}})}),e}function jg(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function GM(r){const e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:Eo(r[t].accounts)?.forEach(n=>{e[n]={accounts:r[t].accounts.filter(a=>a.includes(`${n}:`)),methods:r[t].methods,events:r[t].events}})}),e}function WM(r,e){return nd(r,!1)&&r<=e.max&&r>=e.min}function kg(){const r=Cc();return new Promise(e=>{switch(r){case wi.browser:e(JM());break;case wi.reactNative:e(YM());break;case wi.node:e(QM());break;default:e(!0)}})}function JM(){return Oc()&&navigator?.onLine}async function YM(){return mo()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function QM(){return!0}function XM(r){switch(Cc()){case wi.browser:ZM(r);break;case wi.reactNative:eD(r);break}}function ZM(r){!mo()&&Oc()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function eD(r){mo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>r(e?.isConnected))}const jl={};class Zo{static get(e){return jl[e]}static set(e,t){jl[e]=t}static delete(e){delete jl[e]}}let Ea=class{},tD=class extends Ea{constructor(e){super()}};const Hg=xe.FIVE_SECONDS,xo={pulse:"heartbeat_pulse"};let rD=class Z2 extends tD{constructor(e){super(e),this.events=new Hi.EventEmitter,this.interval=Hg,this.interval=e?.interval||Hg}static async init(e){const t=new Z2(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),xe.toMiliseconds(this.interval))}pulse(){this.events.emit(xo.pulse)}};const iD=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,nD=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,sD=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function aD(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){oD(r);return}return e}function oD(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function Jf(r,e={}){if(typeof r!="string")return r;const t=r.trim();if(r[0]==='"'&&r.at(-1)==='"'&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){const i=t.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!sD.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(iD.test(r)||nD.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,aD)}return JSON.parse(r)}catch(i){if(e.strict)throw i;return r}}function cD(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function _r(r,...e){try{return cD(r(...e))}catch(t){return Promise.reject(t)}}function fD(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function uD(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function ou(r){if(fD(r))return String(r);if(uD(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return ou(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function em(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const A0="base64:";function hD(r){if(typeof r=="string")return r;em();const e=Buffer.from(r).toString("base64");return A0+e}function lD(r){return typeof r!="string"||!r.startsWith(A0)?r:(em(),Buffer.from(r.slice(A0.length),"base64"))}function oi(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function dD(...r){return oi(r.join(":"))}function Yf(r){return r=oi(r),r?r+":":""}const pD="memory",gD=()=>{const r=new Map;return{name:pD,options:{},hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return Array.from(r.keys())},clear(){r.clear()},dispose(){r.clear()}}};function vD(r={}){const e={mounts:{"":r.driver||gD()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const y of e.mountpoints)if(p.startsWith(y))return{base:y,relativeKey:p.slice(y.length),driver:e.mounts[y]};return{base:"",relativeKey:p,driver:e.mounts[""]}},i=(p,y)=>e.mountpoints.filter(_=>_.startsWith(p)||y&&p.startsWith(_)).map(_=>({relativeBase:p.length>_.length?p.slice(_.length):void 0,mountpoint:_,driver:e.mounts[_]})),n=(p,y)=>{if(e.watching){y=oi(y);for(const _ of e.watchListeners)_(p,y)}},a=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await Kg(e.mounts[p],n,p)}},f=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},u=(p,y,_)=>{const O=new Map,D=C=>{let H=O.get(C.base);return H||(H={driver:C.driver,base:C.base,items:[]},O.set(C.base,H)),H};for(const C of p){const H=typeof C=="string",W=oi(H?C:C.key),Q=H?void 0:C.value,z=H||!C.options?y:{...y,...C.options},Y=t(W);D(Y).items.push({key:W,value:Q,relativeKey:Y.relativeKey,options:z})}return Promise.all([...O.values()].map(C=>_(C))).then(C=>C.flat())},v={hasItem(p,y={}){p=oi(p);const{relativeKey:_,driver:O}=t(p);return _r(O.hasItem,_,y)},getItem(p,y={}){p=oi(p);const{relativeKey:_,driver:O}=t(p);return _r(O.getItem,_,y).then(D=>Jf(D))},getItems(p,y){return u(p,y,_=>_.driver.getItems?_r(_.driver.getItems,_.items.map(O=>({key:O.relativeKey,options:O.options})),y).then(O=>O.map(D=>({key:dD(_.base,D.key),value:Jf(D.value)}))):Promise.all(_.items.map(O=>_r(_.driver.getItem,O.relativeKey,O.options).then(D=>({key:O.key,value:Jf(D)})))))},getItemRaw(p,y={}){p=oi(p);const{relativeKey:_,driver:O}=t(p);return O.getItemRaw?_r(O.getItemRaw,_,y):_r(O.getItem,_,y).then(D=>lD(D))},async setItem(p,y,_={}){if(y===void 0)return v.removeItem(p);p=oi(p);const{relativeKey:O,driver:D}=t(p);D.setItem&&(await _r(D.setItem,O,ou(y),_),D.watch||n("update",p))},async setItems(p,y){await u(p,y,async _=>{_.driver.setItems&&await _r(_.driver.setItems,_.items.map(O=>({key:O.relativeKey,value:ou(O.value),options:O.options})),y),_.driver.setItem&&await Promise.all(_.items.map(O=>_r(_.driver.setItem,O.relativeKey,ou(O.value),O.options)))})},async setItemRaw(p,y,_={}){if(y===void 0)return v.removeItem(p,_);p=oi(p);const{relativeKey:O,driver:D}=t(p);if(D.setItemRaw)await _r(D.setItemRaw,O,y,_);else if(D.setItem)await _r(D.setItem,O,hD(y),_);else return;D.watch||n("update",p)},async removeItem(p,y={}){typeof y=="boolean"&&(y={removeMeta:y}),p=oi(p);const{relativeKey:_,driver:O}=t(p);O.removeItem&&(await _r(O.removeItem,_,y),(y.removeMeta||y.removeMata)&&await _r(O.removeItem,_+"$",y),O.watch||n("remove",p))},async getMeta(p,y={}){typeof y=="boolean"&&(y={nativeOnly:y}),p=oi(p);const{relativeKey:_,driver:O}=t(p),D=Object.create(null);if(O.getMeta&&Object.assign(D,await _r(O.getMeta,_,y)),!y.nativeOnly){const C=await _r(O.getItem,_+"$",y).then(H=>Jf(H));C&&typeof C=="object"&&(typeof C.atime=="string"&&(C.atime=new Date(C.atime)),typeof C.mtime=="string"&&(C.mtime=new Date(C.mtime)),Object.assign(D,C))}return D},setMeta(p,y,_={}){return this.setItem(p+"$",y,_)},removeMeta(p,y={}){return this.removeItem(p+"$",y)},async getKeys(p,y={}){p=Yf(p);const _=i(p,!0);let O=[];const D=[];for(const C of _){const W=(await _r(C.driver.getKeys,C.relativeBase,y)).map(Q=>C.mountpoint+oi(Q)).filter(Q=>!O.some(z=>Q.startsWith(z)));D.push(...W),O=[C.mountpoint,...O.filter(Q=>!Q.startsWith(C.mountpoint))]}return p?D.filter(C=>C.startsWith(p)&&!C.endsWith("$")):D.filter(C=>!C.endsWith("$"))},async clear(p,y={}){p=Yf(p),await Promise.all(i(p,!1).map(async _=>{if(_.driver.clear)return _r(_.driver.clear,_.relativeBase,y);if(_.driver.removeItem){const O=await _.driver.getKeys(_.relativeBase||"",y);return Promise.all(O.map(D=>_.driver.removeItem(D,y)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>Vg(p)))},async watch(p){return await a(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(y=>y!==p),e.watchListeners.length===0&&await f()}},async unwatch(){e.watchListeners=[],await f()},mount(p,y){if(p=Yf(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((_,O)=>O.length-_.length)),e.mounts[p]=y,e.watching&&Promise.resolve(Kg(y,n,p)).then(_=>{e.unwatch[p]=_}).catch(console.error),v},async unmount(p,y=!0){p=Yf(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),y&&await Vg(e.mounts[p]),e.mountpoints=e.mountpoints.filter(_=>_!==p),delete e.mounts[p])},getMount(p=""){p=oi(p)+":";const y=t(p);return{driver:y.driver,base:y.base}},getMounts(p="",y={}){return p=oi(p),i(p,y.parents).map(O=>({driver:O.driver,base:O.mountpoint}))}};return v}function Kg(r,e,t){return r.watch?r.watch((i,n)=>e(i,t+n)):()=>{}}async function Vg(r){typeof r.dispose=="function"&&await _r(r.dispose)}function xa(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function tm(r,e){const t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=xa(t);return(n,a)=>i.then(f=>a(f.transaction(e,n).objectStore(e)))}let kl;function Fc(){return kl||(kl=tm("keyval-store","keyval")),kl}function Gg(r,e=Fc()){return e("readonly",t=>xa(t.get(r)))}function bD(r,e,t=Fc()){return t("readwrite",i=>(i.put(e,r),xa(i.transaction)))}function mD(r,e=Fc()){return e("readwrite",t=>(t.delete(r),xa(t.transaction)))}function yD(r=Fc()){return r("readwrite",e=>(e.clear(),xa(e.transaction)))}function wD(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},xa(r.transaction)}function _D(r=Fc()){return r("readonly",e=>{if(e.getAllKeys)return xa(e.getAllKeys());const t=[];return wD(e,i=>t.push(i.key)).then(()=>t)})}const AD="idb-keyval";var ED=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=n=>e+n;let i;return r.dbName&&r.storeName&&(i=tm(r.dbName,r.storeName)),{name:AD,options:r,async hasItem(n){return!(typeof await Gg(t(n),i)>"u")},async getItem(n){return await Gg(t(n),i)??null},setItem(n,a){return bD(t(n),a,i)},removeItem(n){return mD(t(n),i)},getKeys(){return _D(i)},clear(){return yD(i)}}};const xD="WALLET_CONNECT_V2_INDEXED_DB",SD="keyvaluestorage";let ID=class{constructor(){this.indexedDb=vD({driver:ED({dbName:xD,storeName:SD})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,ms(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cu={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Hl<"u"&&Hl.localStorage?cu.exports=Hl.localStorage:typeof window<"u"&&window.localStorage?cu.exports=window.localStorage:cu.exports=new e})();function MD(r){var e;return[r[0],va((e=r[1])!=null?e:"")]}class DD{constructor(){this.localStorage=cu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(MD)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return va(t)}async setItem(e,t){this.localStorage.setItem(e,ms(t))}async removeItem(e){this.localStorage.removeItem(e)}}const PD="wc_storage_version",Wg=1,OD=async(r,e,t)=>{const i=PD,n=await e.getItem(i);if(n&&n>=Wg){t(e);return}const a=await r.getKeys();if(!a.length){t(e);return}const f=[];for(;a.length;){const u=a.shift();if(!u)continue;const v=u.toLowerCase();if(v.includes("wc@")||v.includes("walletconnect")||v.includes("wc_")||v.includes("wallet_connect")){const p=await r.getItem(u);await e.setItem(u,p),f.push(u)}}await e.setItem(i,Wg),t(e),CD(r,f)},CD=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let RD=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new DD;this.storage=e;try{const t=new ID;OD(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};function ND(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}var TD=FD;function FD(r,e,t){var i=t&&t.stringify||ND,n=1;if(typeof r=="object"&&r!==null){var a=e.length+n;if(a===1)return r;var f=new Array(a);f[0]=i(r);for(var u=1;u<a;u++)f[u]=i(e[u]);return f.join(" ")}if(typeof r!="string")return r;var v=e.length;if(v===0)return r;for(var p="",y=1-n,_=-1,O=r&&r.length||0,D=0;D<O;){if(r.charCodeAt(D)===37&&D+1<O){switch(_=_>-1?_:0,r.charCodeAt(D+1)){case 100:case 102:if(y>=v||e[y]==null)break;_<D&&(p+=r.slice(_,D)),p+=Number(e[y]),_=D+2,D++;break;case 105:if(y>=v||e[y]==null)break;_<D&&(p+=r.slice(_,D)),p+=Math.floor(Number(e[y])),_=D+2,D++;break;case 79:case 111:case 106:if(y>=v||e[y]===void 0)break;_<D&&(p+=r.slice(_,D));var C=typeof e[y];if(C==="string"){p+="'"+e[y]+"'",_=D+2,D++;break}if(C==="function"){p+=e[y].name||"<anonymous>",_=D+2,D++;break}p+=i(e[y]),_=D+2,D++;break;case 115:if(y>=v)break;_<D&&(p+=r.slice(_,D)),p+=String(e[y]),_=D+2,D++;break;case 37:_<D&&(p+=r.slice(_,D)),p+="%",_=D+2,D++,y--;break}++y}++D}return _===-1?r:(_<O&&(p+=r.slice(_)),p)}const Jg=TD;var Ya=Un;const Ac=KD().console||{},BD={mapHttpRequest:Qf,mapHttpResponse:Qf,wrapRequestSerializer:Kl,wrapResponseSerializer:Kl,wrapErrorSerializer:Kl,req:Qf,res:Qf,err:zD};function LD(r,e){return Array.isArray(r)?r.filter(function(i){return i!=="!stdSerializers.err"}):r===!0?Object.keys(e):!1}function Un(r){r=r||{},r.browser=r.browser||{};const e=r.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const t=r.browser.write||Ac;r.browser.write&&(r.browser.asObject=!0);const i=r.serializers||{},n=LD(r.browser.serialize,i);let a=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);const f=["error","fatal","warn","info","debug","trace"];typeof t=="function"&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),r.enabled===!1&&(r.level="silent");const u=r.level||"info",v=Object.create(t);v.log||(v.log=Ec),Object.defineProperty(v,"levelVal",{get:y}),Object.defineProperty(v,"level",{get:_,set:O});const p={transmit:e,serialize:n,asObject:r.browser.asObject,levels:f,timestamp:jD(r)};v.levels=Un.levels,v.level=u,v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=Ec,v.serializers=i,v._serialize=n,v._stdErrSerialize=a,v.child=D,e&&(v._logEvent=E0());function y(){return this.level==="silent"?1/0:this.levels.values[this.level]}function _(){return this._level}function O(C){if(C!=="silent"&&!this.levels.values[C])throw Error("unknown level "+C);this._level=C,Va(p,v,"error","log"),Va(p,v,"fatal","error"),Va(p,v,"warn","error"),Va(p,v,"info","log"),Va(p,v,"debug","log"),Va(p,v,"trace","log")}function D(C,H){if(!C)throw new Error("missing bindings for child Pino");H=H||{},n&&C.serializers&&(H.serializers=C.serializers);const W=H.serializers;if(n&&W){var Q=Object.assign({},i,W),z=r.browser.serialize===!0?Object.keys(Q):n;delete C.serializers,Yu([C],z,Q,this._stdErrSerialize)}function Y(q){this._childLevel=(q._childLevel|0)+1,this.error=Ga(q,C,"error"),this.fatal=Ga(q,C,"fatal"),this.warn=Ga(q,C,"warn"),this.info=Ga(q,C,"info"),this.debug=Ga(q,C,"debug"),this.trace=Ga(q,C,"trace"),Q&&(this.serializers=Q,this._serialize=z),e&&(this._logEvent=E0([].concat(q._logEvent.bindings,C)))}return Y.prototype=this,new Y(this)}return v}Un.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Un.stdSerializers=BD;Un.stdTimeFunctions=Object.assign({},{nullTime:rm,epochTime:im,unixTime:kD,isoTime:HD});function Va(r,e,t,i){const n=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?Ec:n[t]?n[t]:Ac[t]||Ac[i]||Ec,qD(r,e,t)}function qD(r,e,t){!r.transmit&&e[t]===Ec||(e[t]=function(i){return function(){const a=r.timestamp(),f=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ac?Ac:this;for(var v=0;v<f.length;v++)f[v]=arguments[v];if(r.serialize&&!r.asObject&&Yu(f,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?i.call(u,$D(this,t,f,a)):i.apply(u,f),r.transmit){const p=r.transmit.level||e.level,y=Un.levels.values[p],_=Un.levels.values[t];if(_<y)return;UD(this,{ts:a,methodLevel:t,methodValue:_,transmitLevel:p,transmitValue:Un.levels.values[r.transmit.level||e.level],send:r.transmit.send,val:e.levelVal},f)}}}(e[t]))}function $D(r,e,t,i){r._serialize&&Yu(t,r._serialize,r.serializers,r._stdErrSerialize);const n=t.slice();let a=n[0];const f={};i&&(f.time=i),f.level=Un.levels.values[e];let u=(r._childLevel|0)+1;if(u<1&&(u=1),a!==null&&typeof a=="object"){for(;u--&&typeof n[0]=="object";)Object.assign(f,n.shift());a=n.length?Jg(n.shift(),n):void 0}else typeof a=="string"&&(a=Jg(n.shift(),n));return a!==void 0&&(f.msg=a),f}function Yu(r,e,t,i){for(const n in r)if(i&&r[n]instanceof Error)r[n]=Un.stdSerializers.err(r[n]);else if(typeof r[n]=="object"&&!Array.isArray(r[n]))for(const a in r[n])e&&e.indexOf(a)>-1&&a in t&&(r[n][a]=t[a](r[n][a]))}function Ga(r,e,t){return function(){const i=new Array(1+arguments.length);i[0]=e;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return r[t].apply(this,i)}}function UD(r,e,t){const i=e.send,n=e.ts,a=e.methodLevel,f=e.methodValue,u=e.val,v=r._logEvent.bindings;Yu(t,r._serialize||Object.keys(r.serializers),r.serializers,r._stdErrSerialize===void 0?!0:r._stdErrSerialize),r._logEvent.ts=n,r._logEvent.messages=t.filter(function(p){return v.indexOf(p)===-1}),r._logEvent.level.label=a,r._logEvent.level.value=f,i(a,r._logEvent,u),r._logEvent=E0(v)}function E0(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function zD(r){const e={type:r.constructor.name,msg:r.message,stack:r.stack};for(const t in r)e[t]===void 0&&(e[t]=r[t]);return e}function jD(r){return typeof r.timestamp=="function"?r.timestamp:r.timestamp===!1?rm:im}function Qf(){return{}}function Kl(r){return r}function Ec(){}function rm(){return!1}function im(){return Date.now()}function kD(){return Math.round(Date.now()/1e3)}function HD(){return new Date(Date.now()).toISOString()}function KD(){function r(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return r(self)||r(window)||r(this)||{}}}const Bc=Xv(Ya),VD={level:"info"},Lc="custom_context",sd=1e3*1024;let GD=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Yg=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new GD(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},nm=class{constructor(e,t=sd){this.level=e??"error",this.levelValue=Ya.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new Yg(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Ya.levels.values.error?console.error(e):t===Ya.levels.values.warn?console.warn(e):t===Ya.levels.values.debug?console.debug(e):t===Ya.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ms({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new Yg(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(ms({extraMetadata:e})),new Blob(t,{type:"application/json"})}},WD=class{constructor(e,t=sd){this.baseChunkLogger=new nm(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=t,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}};class JD{constructor(e,t=sd){this.baseChunkLogger=new nm(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var YD=Object.defineProperty,QD=Object.defineProperties,XD=Object.getOwnPropertyDescriptors,Qg=Object.getOwnPropertySymbols,ZD=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,Xg=(r,e,t)=>e in r?YD(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Su=(r,e)=>{for(var t in e||(e={}))ZD.call(e,t)&&Xg(r,t,e[t]);if(Qg)for(var t of Qg(e))eP.call(e,t)&&Xg(r,t,e[t]);return r},Iu=(r,e)=>QD(r,XD(e));function Qu(r){return Iu(Su({},r),{level:r?.level||VD.level})}function tP(r,e=Lc){return r[e]||""}function rP(r,e,t=Lc){return r[t]=e,r}function di(r,e=Lc){let t="";return typeof r.bindings>"u"?t=tP(r,e):t=r.bindings().context||"",t}function iP(r,e,t=Lc){const i=di(r,t);return i.trim()?`${i}/${e}`:e}function Qr(r,e,t=Lc){const i=iP(r,e,t),n=r.child({context:i});return rP(n,i,t)}function nP(r){var e,t;const i=new WD((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:Bc(Iu(Su({},r.opts),{level:"trace",browser:Iu(Su({},(t=r.opts)==null?void 0:t.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function sP(r){var e;const t=new JD((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:Bc(Iu(Su({},r.opts),{level:"trace"}),t),chunkLoggerController:t}}function aP(r){return typeof r.loggerOverride<"u"&&typeof r.loggerOverride!="string"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<"u"?nP(r):sP(r)}class oP extends Ea{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let cP=class extends Ea{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},fP=class{constructor(e,t){this.logger=e,this.core=t}},uP=class extends Ea{constructor(e,t){super(),this.relayer=e,this.logger=t}},hP=class extends Ea{constructor(e){super()}},lP=class{constructor(e,t,i,n){this.core=e,this.logger=t,this.name=i}},dP=class extends Ea{constructor(e,t){super(),this.relayer=e,this.logger=t}},pP=class extends Ea{constructor(e,t){super(),this.core=e,this.logger=t}},gP=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},vP=class{constructor(e,t){this.projectId=e,this.logger=t}},bP=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}},mP=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},yP=class{constructor(e){this.client=e}};const wP="PARSE_ERROR",_P="INVALID_REQUEST",AP="METHOD_NOT_FOUND",EP="INVALID_PARAMS",sm="INTERNAL_ERROR",ad="SERVER_ERROR",xP=[-32700,-32600,-32601,-32602,-32603],lc={[wP]:{code:-32700,message:"Parse error"},[_P]:{code:-32600,message:"Invalid Request"},[AP]:{code:-32601,message:"Method not found"},[EP]:{code:-32602,message:"Invalid params"},[sm]:{code:-32603,message:"Internal error"},[ad]:{code:-32e3,message:"Server error"}},am=ad;function SP(r){return xP.includes(r)}function Zg(r){return Object.keys(lc).includes(r)?lc[r]:lc[am]}function IP(r){const e=Object.values(lc).find(t=>t.code===r);return e||lc[am]}var om={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var x0=function(r,e){return x0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},x0(r,e)};function MP(r,e){x0(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var S0=function(){return S0=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},S0.apply(this,arguments)};function DP(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function PP(r,e,t,i){var n=arguments.length,a=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var u=r.length-1;u>=0;u--)(f=r[u])&&(a=(n<3?f(a):n>3?f(e,t,a):f(e,t))||a);return n>3&&a&&Object.defineProperty(e,t,a),a}function OP(r,e){return function(t,i){e(t,i,r)}}function CP(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function RP(r,e,t,i){function n(a){return a instanceof t?a:new t(function(f){f(a)})}return new(t||(t=Promise))(function(a,f){function u(y){try{p(i.next(y))}catch(_){f(_)}}function v(y){try{p(i.throw(y))}catch(_){f(_)}}function p(y){y.done?a(y.value):n(y.value).then(u,v)}p((i=i.apply(r,e||[])).next())})}function NP(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,f;return f={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(p){return function(y){return v([p,y])}}function v(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(a=p[0]&2?n.return:p[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,p[1])).done)return a;switch(n=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){t.label=p[1];break}if(p[0]===6&&t.label<a[1]){t.label=a[1],a=p;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(p);break}a[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(y){p=[6,y],n=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function TP(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function FP(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function I0(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cm(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,a=[],f;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){f={error:u}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(f)throw f.error}}return a}function BP(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(cm(arguments[e]));return r}function LP(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),n=0,e=0;e<t;e++)for(var a=arguments[e],f=0,u=a.length;f<u;f++,n++)i[n]=a[f];return i}function xc(r){return this instanceof xc?(this.v=r,this):new xc(r)}function qP(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,a=[];return n={},f("next"),f("throw"),f("return"),n[Symbol.asyncIterator]=function(){return this},n;function f(O){i[O]&&(n[O]=function(D){return new Promise(function(C,H){a.push([O,D,C,H])>1||u(O,D)})})}function u(O,D){try{v(i[O](D))}catch(C){_(a[0][3],C)}}function v(O){O.value instanceof xc?Promise.resolve(O.value.v).then(p,y):_(a[0][2],O)}function p(O){u("next",O)}function y(O){u("throw",O)}function _(O,D){O(D),a.shift(),a.length&&u(a[0][0],a[0][1])}}function $P(r){var e,t;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,a){e[n]=r[n]?function(f){return(t=!t)?{value:xc(r[n](f)),done:n==="return"}:a?a(f):f}:a}}function UP(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof I0=="function"?I0(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(f){return new Promise(function(u,v){f=r[a](f),n(u,v,f.done,f.value)})}}function n(a,f,u,v){Promise.resolve(v).then(function(p){a({value:p,done:u})},f)}}function zP(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function jP(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function kP(r){return r&&r.__esModule?r:{default:r}}function HP(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function KP(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const VP=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return S0},__asyncDelegator:$P,__asyncGenerator:qP,__asyncValues:UP,__await:xc,__awaiter:RP,__classPrivateFieldGet:HP,__classPrivateFieldSet:KP,__createBinding:TP,__decorate:PP,__exportStar:FP,__extends:MP,__generator:NP,__importDefault:kP,__importStar:jP,__makeTemplateObject:zP,__metadata:CP,__param:OP,__read:cm,__rest:DP,__spread:BP,__spreadArrays:LP,__values:I0},Symbol.toStringTag,{value:"Module"})),GP=Qv(VP);var os={},ev;function WP(){if(ev)return os;ev=1,Object.defineProperty(os,"__esModule",{value:!0}),os.isBrowserCryptoAvailable=os.getSubtleCrypto=os.getBrowerCrypto=void 0;function r(){return(ln===null||ln===void 0?void 0:ln.crypto)||(ln===null||ln===void 0?void 0:ln.msCrypto)||{}}os.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}os.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return os.isBrowserCryptoAvailable=t,os}var cs={},tv;function JP(){if(tv)return cs;tv=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.isBrowser=cs.isNode=cs.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}cs.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}cs.isNode=e;function t(){return!r()&&!e()}return cs.isBrowser=t,cs}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=GP;e.__exportStar(WP(),r),e.__exportStar(JP(),r)})(om);function Ns(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function ha(r=6){return BigInt(Ns(r))}function qs(r,e,t){return{id:t||Ns(),jsonrpc:"2.0",method:r,params:e}}function Xu(r,e){return{id:r,jsonrpc:"2.0",result:e}}function fm(r,e,t){return{id:r,jsonrpc:"2.0",error:YP(e,t)}}function YP(r,e){return typeof r>"u"?Zg(sm):(typeof r=="string"&&(r=Object.assign(Object.assign({},Zg(ad)),{message:r})),typeof e<"u"&&(r.data=e),SP(r.code)&&(r=IP(r.code)),r)}class QP{}class XP extends QP{constructor(){super()}}class ZP extends XP{constructor(e){super()}}function um(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function od(r){return um(r)&&"method"in r}function Zu(r){return um(r)&&(Dn(r)||Ui(r))}function Dn(r){return"result"in r}function Ui(r){return"error"in r}class vn extends ZP{constructor(e){super(e),this.events=new Hi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(qs(e.method,e.params||[],e.id||ha().toString()),t)}async requestStrict(e,t){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(a){n(a)}this.events.on(`${e.id}`,a=>{Ui(a)?n(a.error):i(a.result)});try{await this.connection.send(e,t)}catch(a){n(a)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Zu(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const eO="PARSE_ERROR",tO="INVALID_REQUEST",rO="METHOD_NOT_FOUND",iO="INVALID_PARAMS",hm="INTERNAL_ERROR",cd="SERVER_ERROR",nO=[-32700,-32600,-32601,-32602,-32603],dc={[eO]:{code:-32700,message:"Parse error"},[tO]:{code:-32600,message:"Invalid Request"},[rO]:{code:-32601,message:"Method not found"},[iO]:{code:-32602,message:"Invalid params"},[hm]:{code:-32603,message:"Internal error"},[cd]:{code:-32e3,message:"Server error"}},lm=cd;function sO(r){return nO.includes(r)}function rv(r){return Object.keys(dc).includes(r)?dc[r]:dc[lm]}function aO(r){const e=Object.values(dc).find(t=>t.code===r);return e||dc[lm]}function oO(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}function cO(r,e,t){return{id:r,jsonrpc:"2.0",error:fO(e,t)}}function fO(r,e){return typeof r>"u"?rv(hm):(typeof r=="string"&&(r=Object.assign(Object.assign({},rv(cd)),{message:r})),typeof e<"u"&&(r.data=e),sO(r.code)&&(r=aO(r.code)),r)}const uO="^wss?:";function hO(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function lO(r,e){const t=hO(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function iv(r){return lO(r,uO)}function dO(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}const pO=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),gO=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",nv=r=>r.split("?")[0],sv=10,vO=pO();let bO=class{constructor(e){if(this.url=e,this.events=new Hi.EventEmitter,this.registering=!1,!iv(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ms(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!iv(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,n)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),n(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const n=new URLSearchParams(e).get("origin"),a=om.isReactNative()?{headers:{origin:n}}:{rejectUnauthorized:!dO(e)},f=new vO(e,[],a);gO()?f.onerror=u=>{const v=u;i(this.emitError(v.error))}:f.on("error",u=>{i(this.emitError(u))}),f.onopen=()=>{this.onOpen(f),t(f)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?va(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),n=i.message||i.toString(),a=cO(e,n);this.events.emit("payload",a)}parseError(e,t=this.url){return oO(e,nv(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>sv&&this.events.setMaxListeners(sv)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${nv(this.url)}`));return this.events.emit("register_error",t),t}};var Mu={exports:{}};Mu.exports;(function(r,e){var t=200,i="__lodash_hash_undefined__",n=1,a=2,f=9007199254740991,u="[object Arguments]",v="[object Array]",p="[object AsyncFunction]",y="[object Boolean]",_="[object Date]",O="[object Error]",D="[object Function]",C="[object GeneratorFunction]",H="[object Map]",W="[object Number]",Q="[object Null]",z="[object Object]",Y="[object Promise]",q="[object Proxy]",j="[object RegExp]",V="[object Set]",A="[object String]",F="[object Symbol]",ae="[object Undefined]",de="[object WeakMap]",$="[object ArrayBuffer]",m="[object DataView]",c="[object Float32Array]",l="[object Float64Array]",b="[object Int8Array]",x="[object Int16Array]",I="[object Int32Array]",P="[object Uint8Array]",S="[object Uint8ClampedArray]",d="[object Uint16Array]",g="[object Uint32Array]",N=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,M={};M[c]=M[l]=M[b]=M[x]=M[I]=M[P]=M[S]=M[d]=M[g]=!0,M[u]=M[v]=M[$]=M[y]=M[m]=M[_]=M[O]=M[D]=M[H]=M[W]=M[z]=M[j]=M[V]=M[A]=M[de]=!1;var ee=typeof ln=="object"&&ln&&ln.Object===Object&&ln,B=typeof self=="object"&&self&&self.Object===Object&&self,k=ee||B||Function("return this")(),K=e&&!e.nodeType&&e,w=K&&!0&&r&&!r.nodeType&&r,U=w&&w.exports===K,ne=U&&ee.process,ce=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),ue=ce&&ce.isTypedArray;function ye(G,te){for(var pe=-1,$e=G==null?0:G.length,jt=0,pt=[];++pe<$e;){var Jt=G[pe];te(Jt,pe,G)&&(pt[jt++]=Jt)}return pt}function we(G,te){for(var pe=-1,$e=te.length,jt=G.length;++pe<$e;)G[jt+pe]=te[pe];return G}function Re(G,te){for(var pe=-1,$e=G==null?0:G.length;++pe<$e;)if(te(G[pe],pe,G))return!0;return!1}function Qe(G,te){for(var pe=-1,$e=Array(G);++pe<G;)$e[pe]=te(pe);return $e}function Pe(G){return function(te){return G(te)}}function Ne(G,te){return G.has(te)}function Ie(G,te){return G?.[te]}function me(G){var te=-1,pe=Array(G.size);return G.forEach(function($e,jt){pe[++te]=[jt,$e]}),pe}function Oe(G,te){return function(pe){return G(te(pe))}}function Te(G){var te=-1,pe=Array(G.size);return G.forEach(function($e){pe[++te]=$e}),pe}var ve=Array.prototype,Ce=Function.prototype,Se=Object.prototype,be=k["__core-js_shared__"],qe=Ce.toString,Me=Se.hasOwnProperty,_e=function(){var G=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),He=Se.toString,Ve=RegExp("^"+qe.call(Me).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=U?k.Buffer:void 0,Ke=k.Symbol,ht=k.Uint8Array,Ge=Se.propertyIsEnumerable,_t=ve.splice,lt=Ke?Ke.toStringTag:void 0,Je=Object.getOwnPropertySymbols,Et=Ee?Ee.isBuffer:void 0,It=Oe(Object.keys,Object),Fe=pi(k,"DataView"),Xe=pi(k,"Map"),tt=pi(k,"Promise"),Be=pi(k,"Set"),et=pi(k,"WeakMap"),Ze=pi(Object,"create"),Ue=Yn(Fe),ft=Yn(Xe),rt=Yn(tt),ze=Yn(Be),it=Yn(et),st=Ke?Ke.prototype:void 0,Le=st?st.valueOf:void 0;function Ye(G){var te=-1,pe=G==null?0:G.length;for(this.clear();++te<pe;){var $e=G[te];this.set($e[0],$e[1])}}function ut(){this.__data__=Ze?Ze(null):{},this.size=0}function je(G){var te=this.has(G)&&delete this.__data__[G];return this.size-=te?1:0,te}function Nt(G){var te=this.__data__;if(Ze){var pe=te[G];return pe===i?void 0:pe}return Me.call(te,G)?te[G]:void 0}function Tt(G){var te=this.__data__;return Ze?te[G]!==void 0:Me.call(te,G)}function at(G,te){var pe=this.__data__;return this.size+=this.has(G)?0:1,pe[G]=Ze&&te===void 0?i:te,this}Ye.prototype.clear=ut,Ye.prototype.delete=je,Ye.prototype.get=Nt,Ye.prototype.has=Tt,Ye.prototype.set=at;function bt(G){var te=-1,pe=G==null?0:G.length;for(this.clear();++te<pe;){var $e=G[te];this.set($e[0],$e[1])}}function Cr(){this.__data__=[],this.size=0}function Rr(G){var te=this.__data__,pe=Hs(te,G);if(pe<0)return!1;var $e=te.length-1;return pe==$e?te.pop():_t.call(te,pe,1),--this.size,!0}function Nr(G){var te=this.__data__,pe=Hs(te,G);return pe<0?void 0:te[pe][1]}function Tr(G){return Hs(this.__data__,G)>-1}function Fr(G,te){var pe=this.__data__,$e=Hs(pe,G);return $e<0?(++this.size,pe.push([G,te])):pe[$e][1]=te,this}bt.prototype.clear=Cr,bt.prototype.delete=Rr,bt.prototype.get=Nr,bt.prototype.has=Tr,bt.prototype.set=Fr;function er(G){var te=-1,pe=G==null?0:G.length;for(this.clear();++te<pe;){var $e=G[te];this.set($e[0],$e[1])}}function Xr(){this.size=0,this.__data__={hash:new Ye,map:new(Xe||bt),string:new Ye}}function Gi(G){var te=ws(this,G).delete(G);return this.size-=te?1:0,te}function Zr(G){return ws(this,G).get(G)}function Wi(G){return ws(this,G).has(G)}function Ji(G,te){var pe=ws(this,G),$e=pe.size;return pe.set(G,te),this.size+=pe.size==$e?0:1,this}er.prototype.clear=Xr,er.prototype.delete=Gi,er.prototype.get=Zr,er.prototype.has=Wi,er.prototype.set=Ji;function ei(G){var te=-1,pe=G==null?0:G.length;for(this.__data__=new er;++te<pe;)this.add(G[te])}function Si(G){return this.__data__.set(G,i),this}function Ii(G){return this.__data__.has(G)}ei.prototype.add=ei.prototype.push=Si,ei.prototype.has=Ii;function lr(G){var te=this.__data__=new bt(G);this.size=te.size}function Yi(){this.__data__=new bt,this.size=0}function Qi(G){var te=this.__data__,pe=te.delete(G);return this.size=te.size,pe}function Xi(G){return this.__data__.get(G)}function ks(G){return this.__data__.has(G)}function $c(G,te){var pe=this.__data__;if(pe instanceof bt){var $e=pe.__data__;if(!Xe||$e.length<t-1)return $e.push([G,te]),this.size=++pe.size,this;pe=this.__data__=new er($e)}return pe.set(G,te),this.size=pe.size,this}lr.prototype.clear=Yi,lr.prototype.delete=Qi,lr.prototype.get=Xi,lr.prototype.has=ks,lr.prototype.set=$c;function Uc(G,te){var pe=Oa(G),$e=!pe&&Xc(G),jt=!pe&&!$e&&Do(G),pt=!pe&&!$e&&!jt&&tf(G),Jt=pe||$e||jt||pt,ur=Jt?Qe(G.length,String):[],Ct=ur.length;for(var kt in G)(te||Me.call(G,kt))&&!(Jt&&(kt=="length"||jt&&(kt=="offset"||kt=="parent")||pt&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||Gc(kt,Ct)))&&ur.push(kt);return ur}function Hs(G,te){for(var pe=G.length;pe--;)if(Qc(G[pe][0],te))return pe;return-1}function Io(G,te,pe){var $e=te(G);return Oa(G)?$e:we($e,pe(G))}function Ks(G){return G==null?G===void 0?ae:Q:lt&&lt in Object(G)?Kc(G):nh(G)}function Mo(G){return Gs(G)&&Ks(G)==u}function Vs(G,te,pe,$e,jt){return G===te?!0:G==null||te==null||!Gs(G)&&!Gs(te)?G!==G&&te!==te:zc(G,te,pe,$e,Vs,jt)}function zc(G,te,pe,$e,jt,pt){var Jt=Oa(G),ur=Oa(te),Ct=Jt?v:mn(G),kt=ur?v:mn(te);Ct=Ct==u?z:Ct,kt=kt==u?z:kt;var sr=Ct==z,ti=kt==z,hr=Ct==kt;if(hr&&Do(G)){if(!Do(te))return!1;Jt=!0,sr=!1}if(hr&&!sr)return pt||(pt=new lr),Jt||tf(G)?Da(G,te,pe,$e,jt,pt):ih(G,te,Ct,pe,$e,jt,pt);if(!(pe&n)){var Yt=sr&&Me.call(G,"__wrapped__"),zr=ti&&Me.call(te,"__wrapped__");if(Yt||zr){var Zi=Yt?G.value():G,Mi=zr?te.value():te;return pt||(pt=new lr),jt(Zi,Mi,pe,$e,pt)}}return hr?(pt||(pt=new lr),Hc(G,te,pe,$e,jt,pt)):!1}function rh(G){if(!ef(G)||Jc(G))return!1;var te=Ca(G)?Ve:Z;return te.test(Yn(G))}function jc(G){return Gs(G)&&Zc(G.length)&&!!M[Ks(G)]}function kc(G){if(!Yc(G))return It(G);var te=[];for(var pe in Object(G))Me.call(G,pe)&&pe!="constructor"&&te.push(pe);return te}function Da(G,te,pe,$e,jt,pt){var Jt=pe&n,ur=G.length,Ct=te.length;if(ur!=Ct&&!(Jt&&Ct>ur))return!1;var kt=pt.get(G);if(kt&&pt.get(te))return kt==te;var sr=-1,ti=!0,hr=pe&a?new ei:void 0;for(pt.set(G,te),pt.set(te,G);++sr<ur;){var Yt=G[sr],zr=te[sr];if($e)var Zi=Jt?$e(zr,Yt,sr,te,G,pt):$e(Yt,zr,sr,G,te,pt);if(Zi!==void 0){if(Zi)continue;ti=!1;break}if(hr){if(!Re(te,function(Mi,yn){if(!Ne(hr,yn)&&(Yt===Mi||jt(Yt,Mi,pe,$e,pt)))return hr.push(yn)})){ti=!1;break}}else if(!(Yt===zr||jt(Yt,zr,pe,$e,pt))){ti=!1;break}}return pt.delete(G),pt.delete(te),ti}function ih(G,te,pe,$e,jt,pt,Jt){switch(pe){case m:if(G.byteLength!=te.byteLength||G.byteOffset!=te.byteOffset)return!1;G=G.buffer,te=te.buffer;case $:return!(G.byteLength!=te.byteLength||!pt(new ht(G),new ht(te)));case y:case _:case W:return Qc(+G,+te);case O:return G.name==te.name&&G.message==te.message;case j:case A:return G==te+"";case H:var ur=me;case V:var Ct=$e&n;if(ur||(ur=Te),G.size!=te.size&&!Ct)return!1;var kt=Jt.get(G);if(kt)return kt==te;$e|=a,Jt.set(G,te);var sr=Da(ur(G),ur(te),$e,jt,pt,Jt);return Jt.delete(G),sr;case F:if(Le)return Le.call(G)==Le.call(te)}return!1}function Hc(G,te,pe,$e,jt,pt){var Jt=pe&n,ur=Pa(G),Ct=ur.length,kt=Pa(te),sr=kt.length;if(Ct!=sr&&!Jt)return!1;for(var ti=Ct;ti--;){var hr=ur[ti];if(!(Jt?hr in te:Me.call(te,hr)))return!1}var Yt=pt.get(G);if(Yt&&pt.get(te))return Yt==te;var zr=!0;pt.set(G,te),pt.set(te,G);for(var Zi=Jt;++ti<Ct;){hr=ur[ti];var Mi=G[hr],yn=te[hr];if($e)var Po=Jt?$e(yn,Mi,hr,te,G,pt):$e(Mi,yn,hr,G,te,pt);if(!(Po===void 0?Mi===yn||jt(Mi,yn,pe,$e,pt):Po)){zr=!1;break}Zi||(Zi=hr=="constructor")}if(zr&&!Zi){var Ws=G.constructor,br=te.constructor;Ws!=br&&"constructor"in G&&"constructor"in te&&!(typeof Ws=="function"&&Ws instanceof Ws&&typeof br=="function"&&br instanceof br)&&(zr=!1)}return pt.delete(G),pt.delete(te),zr}function Pa(G){return Io(G,oh,Vc)}function ws(G,te){var pe=G.__data__;return Wc(te)?pe[typeof te=="string"?"string":"hash"]:pe.map}function pi(G,te){var pe=Ie(G,te);return rh(pe)?pe:void 0}function Kc(G){var te=Me.call(G,lt),pe=G[lt];try{G[lt]=void 0;var $e=!0}catch{}var jt=He.call(G);return $e&&(te?G[lt]=pe:delete G[lt]),jt}var Vc=Je?function(G){return G==null?[]:(G=Object(G),ye(Je(G),function(te){return Ge.call(G,te)}))}:zt,mn=Ks;(Fe&&mn(new Fe(new ArrayBuffer(1)))!=m||Xe&&mn(new Xe)!=H||tt&&mn(tt.resolve())!=Y||Be&&mn(new Be)!=V||et&&mn(new et)!=de)&&(mn=function(G){var te=Ks(G),pe=te==z?G.constructor:void 0,$e=pe?Yn(pe):"";if($e)switch($e){case Ue:return m;case ft:return H;case rt:return Y;case ze:return V;case it:return de}return te});function Gc(G,te){return te=te??f,!!te&&(typeof G=="number"||se.test(G))&&G>-1&&G%1==0&&G<te}function Wc(G){var te=typeof G;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?G!=="__proto__":G===null}function Jc(G){return!!_e&&_e in G}function Yc(G){var te=G&&G.constructor,pe=typeof te=="function"&&te.prototype||Se;return G===pe}function nh(G){return He.call(G)}function Yn(G){if(G!=null){try{return qe.call(G)}catch{}try{return G+""}catch{}}return""}function Qc(G,te){return G===te||G!==G&&te!==te}var Xc=Mo(function(){return arguments}())?Mo:function(G){return Gs(G)&&Me.call(G,"callee")&&!Ge.call(G,"callee")},Oa=Array.isArray;function sh(G){return G!=null&&Zc(G.length)&&!Ca(G)}var Do=Et||Ut;function ah(G,te){return Vs(G,te)}function Ca(G){if(!ef(G))return!1;var te=Ks(G);return te==D||te==C||te==p||te==q}function Zc(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=f}function ef(G){var te=typeof G;return G!=null&&(te=="object"||te=="function")}function Gs(G){return G!=null&&typeof G=="object"}var tf=ue?Pe(ue):jc;function oh(G){return sh(G)?Uc(G):kc(G)}function zt(){return[]}function Ut(){return!1}r.exports=ah})(Mu,Mu.exports);var mO=Mu.exports;const yO=Xv(mO),dm="wc",pm=2,fd="core",Kn=`${dm}@2:${fd}:`,wO={name:fd,logger:"error"},_O={database:":memory:"},AO="crypto",av="client_ed25519_seed",EO=xe.ONE_DAY,xO="keychain",SO="0.3",IO="messages",MO="0.3",DO=xe.SIX_HOURS,PO="publisher",gm="irn",OO="error",vm="wss://relay.walletconnect.org",CO="relayer",Gr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},RO="_subscription",Li={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},NO=.1,M0="2.17.0",Kt={link_mode:"link_mode",relay:"relay"},TO="0.3",FO="WALLETCONNECT_CLIENT_ID",ov="WALLETCONNECT_LINK_MODE_APPS",Pn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},BO="subscription",LO="0.3",qO=xe.FIVE_SECONDS*1e3,$O="pairing",UO="0.3",ec={wc_pairingDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:0},res:{ttl:xe.ONE_DAY,prompt:!1,tag:0}}},fa={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},on={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},zO="history",jO="0.3",kO="expirer",qi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},HO="0.3",KO="verify-api",VO="https://verify.walletconnect.com",bm="https://verify.walletconnect.org",pc=bm,GO=`${pc}/v3`,WO=[VO,bm],JO="echo",YO="https://echo.walletconnect.com",Sn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fs={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},cn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},aa={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},oa={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},tc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},QO=.1,XO="event-client",ZO=86400,eC="https://pulse.walletconnect.org/batch";function tC(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var n=0;n<r.length;n++){var a=r.charAt(n),f=a.charCodeAt(0);if(t[f]!==255)throw new TypeError(a+" is ambiguous");t[f]=n}var u=r.length,v=r.charAt(0),p=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function _(C){if(C instanceof Uint8Array||(ArrayBuffer.isView(C)?C=new Uint8Array(C.buffer,C.byteOffset,C.byteLength):Array.isArray(C)&&(C=Uint8Array.from(C))),!(C instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(C.length===0)return"";for(var H=0,W=0,Q=0,z=C.length;Q!==z&&C[Q]===0;)Q++,H++;for(var Y=(z-Q)*y+1>>>0,q=new Uint8Array(Y);Q!==z;){for(var j=C[Q],V=0,A=Y-1;(j!==0||V<W)&&A!==-1;A--,V++)j+=256*q[A]>>>0,q[A]=j%u>>>0,j=j/u>>>0;if(j!==0)throw new Error("Non-zero carry");W=V,Q++}for(var F=Y-W;F!==Y&&q[F]===0;)F++;for(var ae=v.repeat(H);F<Y;++F)ae+=r.charAt(q[F]);return ae}function O(C){if(typeof C!="string")throw new TypeError("Expected String");if(C.length===0)return new Uint8Array;var H=0;if(C[H]!==" "){for(var W=0,Q=0;C[H]===v;)W++,H++;for(var z=(C.length-H)*p+1>>>0,Y=new Uint8Array(z);C[H];){var q=t[C.charCodeAt(H)];if(q===255)return;for(var j=0,V=z-1;(q!==0||j<Q)&&V!==-1;V--,j++)q+=u*Y[V]>>>0,Y[V]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");Q=j,H++}if(C[H]!==" "){for(var A=z-Q;A!==z&&Y[A]===0;)A++;for(var F=new Uint8Array(W+(z-A)),ae=W;A!==z;)F[ae++]=Y[A++];return F}}}function D(C){var H=O(C);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:O,decode:D}}var rC=tC,iC=rC;const mm=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},nC=r=>new TextEncoder().encode(r),sC=r=>new TextDecoder().decode(r);class aC{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class oC{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ym(this,e)}}class cC{constructor(e){this.decoders=e}or(e){return ym(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ym=(r,e)=>new cC({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class fC{constructor(e,t,i,n){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=n,this.encoder=new aC(e,t,i),this.decoder=new oC(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const eh=({name:r,prefix:e,encode:t,decode:i})=>new fC(r,e,t,i),qc=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:n}=iC(t,e);return eh({prefix:r,name:e,encode:i,decode:a=>mm(n(a))})},uC=(r,e,t,i)=>{const n={};for(let y=0;y<e.length;++y)n[e[y]]=y;let a=r.length;for(;r[a-1]==="=";)--a;const f=new Uint8Array(a*t/8|0);let u=0,v=0,p=0;for(let y=0;y<a;++y){const _=n[r[y]];if(_===void 0)throw new SyntaxError(`Non-${i} character`);v=v<<t|_,u+=t,u>=8&&(u-=8,f[p++]=255&v>>u)}if(u>=t||255&v<<8-u)throw new SyntaxError("Unexpected end of data");return f},hC=(r,e,t)=>{const i=e[e.length-1]==="=",n=(1<<t)-1;let a="",f=0,u=0;for(let v=0;v<r.length;++v)for(u=u<<8|r[v],f+=8;f>t;)f-=t,a+=e[n&u>>f];if(f&&(a+=e[n&u<<t-f]),i)for(;a.length*t&7;)a+="=";return a},Or=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>eh({prefix:e,name:r,encode(n){return hC(n,i,t)},decode(n){return uC(n,i,t,r)}}),lC=eh({prefix:"\0",name:"identity",encode:r=>sC(r),decode:r=>nC(r)});var dC=Object.freeze({__proto__:null,identity:lC});const pC=Or({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var gC=Object.freeze({__proto__:null,base2:pC});const vC=Or({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var bC=Object.freeze({__proto__:null,base8:vC});const mC=qc({prefix:"9",name:"base10",alphabet:"0123456789"});var yC=Object.freeze({__proto__:null,base10:mC});const wC=Or({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_C=Or({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var AC=Object.freeze({__proto__:null,base16:wC,base16upper:_C});const EC=Or({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xC=Or({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),SC=Or({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),IC=Or({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),MC=Or({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),DC=Or({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),PC=Or({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),OC=Or({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),CC=Or({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var RC=Object.freeze({__proto__:null,base32:EC,base32upper:xC,base32pad:SC,base32padupper:IC,base32hex:MC,base32hexupper:DC,base32hexpad:PC,base32hexpadupper:OC,base32z:CC});const NC=qc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),TC=qc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var FC=Object.freeze({__proto__:null,base36:NC,base36upper:TC});const BC=qc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),LC=qc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qC=Object.freeze({__proto__:null,base58btc:BC,base58flickr:LC});const $C=Or({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),UC=Or({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zC=Or({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jC=Or({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var kC=Object.freeze({__proto__:null,base64:$C,base64pad:UC,base64url:zC,base64urlpad:jC});const wm=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),HC=wm.reduce((r,e,t)=>(r[t]=e,r),[]),KC=wm.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function VC(r){return r.reduce((e,t)=>(e+=HC[t],e),"")}function GC(r){const e=[];for(const t of r){const i=KC[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const WC=eh({prefix:"🚀",name:"base256emoji",encode:VC,decode:GC});var JC=Object.freeze({__proto__:null,base256emoji:WC}),YC=_m,cv=128,QC=127,XC=~QC,ZC=Math.pow(2,31);function _m(r,e,t){e=e||[],t=t||0;for(var i=t;r>=ZC;)e[t++]=r&255|cv,r/=128;for(;r&XC;)e[t++]=r&255|cv,r>>>=7;return e[t]=r|0,_m.bytes=t-i+1,e}var eR=D0,tR=128,fv=127;function D0(r,i){var t=0,i=i||0,n=0,a=i,f,u=r.length;do{if(a>=u)throw D0.bytes=0,new RangeError("Could not decode varint");f=r[a++],t+=n<28?(f&fv)<<n:(f&fv)*Math.pow(2,n),n+=7}while(f>=tR);return D0.bytes=a-i,t}var rR=Math.pow(2,7),iR=Math.pow(2,14),nR=Math.pow(2,21),sR=Math.pow(2,28),aR=Math.pow(2,35),oR=Math.pow(2,42),cR=Math.pow(2,49),fR=Math.pow(2,56),uR=Math.pow(2,63),hR=function(r){return r<rR?1:r<iR?2:r<nR?3:r<sR?4:r<aR?5:r<oR?6:r<cR?7:r<fR?8:r<uR?9:10},lR={encode:YC,decode:eR,encodingLength:hR},Am=lR;const uv=(r,e,t=0)=>(Am.encode(r,e,t),e),hv=r=>Am.encodingLength(r),P0=(r,e)=>{const t=e.byteLength,i=hv(r),n=i+hv(t),a=new Uint8Array(n+t);return uv(r,a,0),uv(t,a,i),a.set(e,n),new dR(r,t,e,a)};class dR{constructor(e,t,i,n){this.code=e,this.size=t,this.digest=i,this.bytes=n}}const Em=({name:r,code:e,encode:t})=>new pR(r,e,t);class pR{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?P0(this.code,t):t.then(i=>P0(this.code,i))}else throw Error("Unknown type, must be binary type")}}const xm=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),gR=Em({name:"sha2-256",code:18,encode:xm("SHA-256")}),vR=Em({name:"sha2-512",code:19,encode:xm("SHA-512")});var bR=Object.freeze({__proto__:null,sha256:gR,sha512:vR});const Sm=0,mR="identity",Im=mm,yR=r=>P0(Sm,Im(r)),wR={code:Sm,name:mR,encode:Im,digest:yR};var _R=Object.freeze({__proto__:null,identity:wR});new TextEncoder,new TextDecoder;const lv={...dC,...gC,...bC,...yC,...AC,...RC,...FC,...qC,...kC,...JC};({...bR,..._R});function AR(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Mm(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const dv=Mm("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Vl=Mm("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=AR(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),ER={utf8:dv,"utf-8":dv,hex:lv.base16,latin1:Vl,ascii:Vl,binary:Vl,...lv};function xR(r,e="utf8"){const t=ER[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}class SR{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=xO,this.version=SO,this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:a}=Ae("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(a)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=Qr(t,this.name)}get context(){return di(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,n2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?s2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class IR{constructor(e,t,i){this.core=e,this.logger=t,this.name=AO,this.randomSessionIdentifier=w0(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),a=J1(n);return e2(a.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=ZI();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const a=await this.getClientSeed(),f=J1(a),u=this.randomSessionIdentifier;return await TE(u,n,EO,f)},this.generateSharedKey=(n,a,f)=>{this.isInitialized();const u=this.getPrivateKey(n),v=eM(u,a);return this.setSymKey(v,f)},this.setSymKey=async(n,a)=>{this.isInitialized();const f=a||au(n);return await this.keychain.set(f,n),f},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,a,f)=>{this.isInitialized();const u=Y2(f),v=ms(a);if(Rg(u))return rM(v,f?.encoding);if(Cg(u)){const O=u.senderPublicKey,D=u.receiverPublicKey;n=await this.generateSharedKey(O,D)}const p=this.getSymKey(n),{type:y,senderPublicKey:_}=u;return tM({type:y,symKey:p,message:v,senderPublicKey:_,encoding:f?.encoding})},this.decode=async(n,a,f)=>{this.isInitialized();const u=sM(a,f);if(Rg(u)){const v=nM(a,f?.encoding);return va(v)}if(Cg(u)){const v=u.receiverPublicKey,p=u.senderPublicKey;n=await this.generateSharedKey(v,p)}try{const v=this.getSymKey(n),p=iM({symKey:v,encoded:a,encoding:f?.encoding});return va(p)}catch(v){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(v)}},this.getPayloadType=(n,a=Ls)=>{const f=wc({encoded:n,encoding:a});return ma(f.type)},this.getPayloadSenderPublicKey=(n,a=Ls)=>{const f=wc({encoded:n,encoding:a});return f.senderPublicKey?fi(f.senderPublicKey,Yr):void 0},this.core=e,this.logger=Qr(t,this.name),this.keychain=i||new SR(this.core,this.logger)}get context(){return di(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(av)}catch{e=w0(),await this.keychain.set(av,e)}return xR(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class MR extends fP{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=IO,this.version=MO,this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const a=hs(n);let f=this.messages.get(i);return typeof f>"u"&&(f={}),typeof f[a]<"u"||(f[a]=n,this.messages.set(i,f),await this.persist()),a},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const a=this.get(i),f=hs(n);return typeof a[f]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Qr(e,this.name),this.core=t}get context(){return di(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,n2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?s2(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class DR extends uP{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Hi.EventEmitter,this.name=PO,this.queue=new Map,this.publishTimeout=xe.toMiliseconds(xe.ONE_MINUTE),this.failedPublishTimeout=xe.toMiliseconds(xe.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,n,a)=>{var f;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:a}});const u=a?.ttl||DO,v=_0(a),p=a?.prompt||!1,y=a?.tag||0,_=a?.id||ha().toString(),O={topic:i,message:n,opts:{ttl:u,relay:v,prompt:p,tag:y,id:_,attestation:a?.attestation}},D=`Failed to publish payload, please try again. id:${_} tag:${y}`,C=Date.now();let H,W=1;try{for(;H===void 0;){if(Date.now()-C>this.publishTimeout)throw new Error(D);this.logger.trace({id:_,attempts:W},`publisher.publish - attempt ${W}`),H=await await eo(this.rpcPublish(i,n,u,v,p,y,_,a?.attestation).catch(Q=>this.logger.warn(Q)),this.publishTimeout,D),W++,H||await new Promise(Q=>setTimeout(Q,this.failedPublishTimeout))}this.relayer.events.emit(Gr.publish,O),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:_,topic:i,message:n,opts:a}})}catch(Q){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(Q),(f=a?.internal)!=null&&f.throwOnFailedPublish)throw Q;this.queue.set(_,O)}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=Qr(t,this.name),this.registerEventListeners()}get context(){return di(this.logger)}rpcPublish(e,t,i,n,a,f,u,v){var p,y,_,O;const D={method:ac(n.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:a,tag:f,attestation:v},id:u};return Jr((p=D.params)==null?void 0:p.prompt)&&((y=D.params)==null||delete y.prompt),Jr((_=D.params)==null?void 0:_.tag)&&((O=D.params)==null||delete O.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:n}=e;await this.publish(t,i,n)})}registerEventListeners(){this.relayer.core.heartbeat.on(xo.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Gr.connection_stalled);return}this.checkQueue()}),this.relayer.on(Gr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class PR{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const n=i.filter(a=>a!==t);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var OR=Object.defineProperty,CR=Object.defineProperties,RR=Object.getOwnPropertyDescriptors,pv=Object.getOwnPropertySymbols,NR=Object.prototype.hasOwnProperty,TR=Object.prototype.propertyIsEnumerable,gv=(r,e,t)=>e in r?OR(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,rc=(r,e)=>{for(var t in e||(e={}))NR.call(e,t)&&gv(r,t,e[t]);if(pv)for(var t of pv(e))TR.call(e,t)&&gv(r,t,e[t]);return r},Gl=(r,e)=>CR(r,RR(e));class FR extends dP{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new PR,this.events=new Hi.EventEmitter,this.name=BO,this.version=LO,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Kn,this.subscribeTimeout=xe.toMiliseconds(xe.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,n)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const a=_0(n),f={topic:i,relay:a,transportType:n?.transportType};this.pending.set(i,f);const u=await this.rpcSubscribe(i,a,n?.transportType);return typeof u=="string"&&(this.onSubscribe(u,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof n?.id<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const n=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((a,f)=>{const u=new xe.Watch;u.start(n);const v=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(v),u.stop(n),a(!0)),u.elapsed(n)>=qO&&(clearInterval(v),u.stop(n),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Qr(t,this.name),this.clientId=""}get context(){return di(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const n=_0(i);await this.rpcUnsubscribe(e,t,n);const a=$t("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,t,i=Kt.relay){i===Kt.relay&&await this.restartToComplete();const n={method:ac(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{const a=hs(e+this.clientId);return i===Kt.link_mode?(setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(f=>this.logger.warn(f))},xe.toMiliseconds(xe.ONE_SECOND)),a):await await eo(this.relayer.request(n).catch(f=>this.logger.warn(f)),this.subscribeTimeout)?a:null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Gr.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:ac(t.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await eo(this.relayer.request(i).catch(n=>this.logger.warn(n)),this.subscribeTimeout)}catch{this.relayer.events.emit(Gr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:ac(t.protocol).batchFetchMessages,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await eo(this.relayer.request(i).catch(a=>this.logger.warn(a)),this.subscribeTimeout)}catch{this.relayer.events.emit(Gr.connection_stalled)}return n}rpcUnsubscribe(e,t,i){const n={method:ac(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,Gl(rc({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,rc({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,rc({},t)),this.topicMap.set(t.topic,e),this.events.emit(Pn.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(Pn.deleted,Gl(rc({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Pn.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(Pn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Hn(t)&&this.onBatchSubscribe(t.map((i,n)=>Gl(rc({},e[n]),{id:i})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(xo.pulse,async()=>{await this.checkPending()}),this.events.on(Pn.created,async e=>{const t=Pn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Pn.deleted,async e=>{const t=Pn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var BR=Object.defineProperty,vv=Object.getOwnPropertySymbols,LR=Object.prototype.hasOwnProperty,qR=Object.prototype.propertyIsEnumerable,bv=(r,e,t)=>e in r?BR(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$R=(r,e)=>{for(var t in e||(e={}))LR.call(e,t)&&bv(r,t,e[t]);if(vv)for(var t of vv(e))qR.call(e,t)&&bv(r,t,e[t]);return r};class UR extends hP{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Hi.EventEmitter,this.name=CO,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=xe.toMiliseconds(xe.THIRTY_SECONDS+xe.ONE_SECOND),this.request=async t=>{var i,n;this.logger.debug("Publishing Request Payload");const a=t.id||ha().toString();await this.toEstablishConnection();try{const f=this.provider.request(t);this.requestsInFlight.set(a,{promise:f,request:t}),this.logger.trace({id:a,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const u=await new Promise(async(v,p)=>{const y=()=>{p(new Error(`relayer.request - publish interrupted, id: ${a}`))};this.provider.on(Li.disconnect,y);const _=await f;this.provider.off(Li.disconnect,y),v(_)});return this.logger.trace({id:a,method:t.method,topic:(n=t.params)==null?void 0:n.topic},"relayer.request - published"),u}catch(f){throw this.logger.debug(`Failed to Publish Request: ${a}`),f}finally{this.requestsInFlight.delete(a)}},this.resetPingTimeout=()=>{if(mu())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,n;(n=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null||n.terminate()},this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(Gr.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Gr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Li.payload,this.onPayloadHandler),this.provider.on(Li.connect,this.onConnectHandler),this.provider.on(Li.disconnect,this.onDisconnectHandler),this.provider.on(Li.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qr(e.logger,this.name):Bc(Qu({level:e.logger||OO})),this.messages=new MR(this.logger,e.core),this.subscriber=new FR(this,this.logger),this.publisher=new DR(this,this.logger),this.relayUrl=e?.relayUrl||vm,this.projectId=e.projectId,this.bundleId=kE(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return di(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Kt.relay})}async subscribe(e,t){var i;this.isInitialized(),t?.transportType==="relay"&&await this.toEstablishConnection();let n=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",a;const f=u=>{u.topic===e&&(this.subscriber.off(Pn.created,f),a())};return await Promise.all([new Promise(u=>{a=u,this.subscriber.on(Pn.created,f)}),new Promise(async u=>{n=await this.subscriber.subscribe(e,t)||n,u()})]),n}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await eo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(t,i)=>{const n=()=>{this.provider.off(Li.disconnect,n),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Li.disconnect,n),await eo(this.provider.connect(),xe.toMiliseconds(xe.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{i(a)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(a=>{this.logger.error(a),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,t()})}catch(t){this.logger.error(t);const i=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await kg())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.trace(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:i}=e;if(!t.sessionExists){const n=vr(xe.FIVE_MINUTES),a={topic:i,expiry:n,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,a)}this.events.emit(Gr.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,t,i,n,a;if(mu())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((a=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||a.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(f){this.logger.warn(f)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new vn(new bO(GE({sdkVersion:M0,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const n=this.messages.has(t,i);return n&&this.logger.debug(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),od(e)){if(!e.method.endsWith(RO))return;const t=e.params,{topic:i,message:n,publishedAt:a,attestation:f}=t.data,u={topic:i,message:n,publishedAt:a,transportType:Kt.relay,attestation:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($R({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else Zu(e)&&this.events.emit(Gr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Gr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Xu(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Li.payload,this.onPayloadHandler),this.provider.off(Li.connect,this.onConnectHandler),this.provider.off(Li.disconnect,this.onDisconnectHandler),this.provider.off(Li.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await kg();XM(async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Gr.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},xe.toMiliseconds(NO))))}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var zR=Object.defineProperty,mv=Object.getOwnPropertySymbols,jR=Object.prototype.hasOwnProperty,kR=Object.prototype.propertyIsEnumerable,yv=(r,e,t)=>e in r?zR(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,wv=(r,e)=>{for(var t in e||(e={}))jR.call(e,t)&&yv(r,t,e[t]);if(mv)for(var t of mv(e))kR.call(e,t)&&yv(r,t,e[t]);return r};class Sa extends lP{constructor(e,t,i,n=Kn,a=void 0){super(e,t,i,n),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=TO,this.cached=[],this.initialized=!1,this.storagePrefix=Kn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!Jr(f)?this.map.set(this.getKey(f),f):PM(f)?this.map.set(f.id,f):OM(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,u)=>{this.isInitialized(),this.map.has(f)?await this.update(f,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:u}),this.map.set(f,u),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(u=>Object.keys(f).every(v=>yO(u[v],f[v]))):this.values),this.update=async(f,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:u});const v=wv(wv({},this.getData(f)),u);this.map.set(f,v),await this.persist()},this.delete=async(f,u)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:u}),this.map.delete(f),this.addToRecentlyDeleted(f),await this.persist())},this.logger=Qr(t,this.name),this.storagePrefix=n,this.getKey=a}get context(){return di(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:n}=Ae("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class HR{constructor(e,t){this.core=e,this.logger=t,this.name=$O,this.version=UO,this.events=new N0,this.initialized=!1,this.storagePrefix=Kn,this.ignoredPayloadTypes=[gs],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const n=w0(),a=await this.core.crypto.setSymKey(n),f=vr(xe.FIVE_MINUTES),u={protocol:gm},v={topic:a,expiry:f,relay:u,active:!1,methods:i?.methods},p=Lg({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:n,relay:u,expiryTimestamp:f,methods:i?.methods});return this.events.emit(fa.create,v),this.core.expirer.set(a,f),await this.pairings.set(a,v),await this.core.relayer.subscribe(a,{transportType:i?.transportType}),{topic:a,uri:p}},this.pair=async i=>{this.isInitialized();const n=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[Sn.pairing_started]}});this.isValidPair(i,n);const{topic:a,symKey:f,relay:u,expiryTimestamp:v,methods:p}=Bg(i.uri);n.props.properties.topic=a,n.addTrace(Sn.pairing_uri_validation_success),n.addTrace(Sn.pairing_uri_not_expired);let y;if(this.pairings.keys.includes(a)){if(y=this.pairings.get(a),n.addTrace(Sn.existing_pairing),y.active)throw n.setError(fs.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);n.addTrace(Sn.pairing_not_expired)}const _=v||vr(xe.FIVE_MINUTES),O={topic:a,relay:u,expiry:_,active:!1,methods:p};this.core.expirer.set(a,_),await this.pairings.set(a,O),n.addTrace(Sn.store_new_pairing),i.activatePairing&&await this.activate({topic:a}),this.events.emit(fa.create,O),n.addTrace(Sn.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(f,a),n.addTrace(Sn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{n.setError(fs.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(D){throw n.setError(fs.subscribe_pairing_topic_failure),D}return n.addTrace(Sn.subscribe_pairing_topic_success),O},this.activate=async({topic:i})=>{this.isInitialized();const n=vr(xe.THIRTY_DAYS);this.core.expirer.set(i,n),await this.pairings.update(i,{active:!0,expiry:n})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:n}=i;if(this.pairings.keys.includes(n)){const a=await this.sendRequest(n,"wc_pairingPing",{}),{done:f,resolve:u,reject:v}=ca();this.events.once(St("pairing_ping",a),({error:p})=>{p?v(p):u()}),await f()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",$t("USER_DISCONNECTED")),await this.deletePairing(n))},this.formatUriFromPairing=i=>{this.isInitialized();const{topic:n,relay:a,expiry:f,methods:u}=i,v=this.core.crypto.keychain.get(n);return Lg({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:v,relay:a,expiryTimestamp:f,methods:u})},this.sendRequest=async(i,n,a)=>{const f=qs(n,a),u=await this.core.crypto.encode(i,f),v=ec[n].req;return this.core.history.set(i,f),this.core.relayer.publish(i,u,v),f.id},this.sendResult=async(i,n,a)=>{const f=Xu(i,a),u=await this.core.crypto.encode(n,f),v=await this.core.history.get(n,i),p=ec[v.request.method].res;await this.core.relayer.publish(n,u,p),await this.core.history.resolve(f)},this.sendError=async(i,n,a)=>{const f=fm(i,a),u=await this.core.crypto.encode(n,f),v=await this.core.history.get(n,i),p=ec[v.request.method]?ec[v.request.method].res:ec.unregistered_method.res;await this.core.relayer.publish(n,u,p),await this.core.history.resolve(f)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,$t("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>Rs(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:a}=i;switch(a.method){case"wc_pairingPing":return this.onPairingPingRequest(n,a);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,a);default:return this.onUnknownRpcMethodRequest(n,a)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:a}=i,f=(await this.core.history.get(n,a.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(n,a);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(i,n)=>{const{id:a}=n;try{this.isValidPing({topic:i}),await this.sendResult(a,i,!0),this.events.emit(fa.ping,{id:a,topic:i})}catch(f){await this.sendError(a,i,f),this.logger.error(f)}},this.onPairingPingResponse=(i,n)=>{const{id:a}=n;setTimeout(()=>{Dn(n)?this.events.emit(St("pairing_ping",a),{}):Ui(n)&&this.events.emit(St("pairing_ping",a),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:a}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(fa.delete,{id:a,topic:i})}catch(f){await this.sendError(a,i,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:a,method:f}=n;try{if(this.registeredMethods.includes(f))return;const u=$t("WC_METHOD_UNSUPPORTED",f);await this.sendError(a,i,u),this.logger.error(u)}catch(u){await this.sendError(a,i,u),this.logger.error(u)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error($t("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,n)=>{var a;if(!ci(i)){const{message:u}=Ae("MISSING_OR_INVALID",`pair() params: ${i}`);throw n.setError(fs.malformed_pairing_uri),new Error(u)}if(!DM(i.uri)){const{message:u}=Ae("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw n.setError(fs.malformed_pairing_uri),new Error(u)}const f=Bg(i?.uri);if(!((a=f?.relay)!=null&&a.protocol)){const{message:u}=Ae("MISSING_OR_INVALID","pair() uri#relay-protocol");throw n.setError(fs.malformed_pairing_uri),new Error(u)}if(!(f!=null&&f.symKey)){const{message:u}=Ae("MISSING_OR_INVALID","pair() uri#symKey");throw n.setError(fs.malformed_pairing_uri),new Error(u)}if(f!=null&&f.expiryTimestamp&&xe.toMiliseconds(f?.expiryTimestamp)<Date.now()){n.setError(fs.pairing_expired);const{message:u}=Ae("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}},this.isValidPing=async i=>{if(!ci(i)){const{message:a}=Ae("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(a)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!ci(i)){const{message:a}=Ae("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(a)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!fr(i,!1)){const{message:n}=Ae("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=Ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(Rs(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=Ae("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=e,this.logger=Qr(t,this.name),this.pairings=new Sa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return di(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Gr.message,async e=>{const{topic:t,message:i,transportType:n}=e;if(!this.pairings.keys.includes(t)||n===Kt.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const a=await this.core.crypto.decode(t,i);try{od(a)?(this.core.history.set(t,a),this.onRelayEventRequest({topic:t,payload:a})):Zu(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a}),this.core.history.delete(t,a.id))}catch(f){this.logger.error(f)}})}registerExpirerEvents(){this.core.expirer.on(qi.expired,async e=>{const{topic:t}=o2(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(fa.expire,{topic:t}))})}}class KR extends cP{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Hi.EventEmitter,this.name=zO,this.version=jO,this.cached=[],this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:a}),this.records.has(n.id))return;const f={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:a,expiry:vr(xe.THIRTY_DAYS)};this.records.set(f.id,f),this.persist(),this.events.emit(on.created,f)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=Ui(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(on.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(a=>{if(a.topic===i){if(typeof n<"u"&&a.id!==n)return;this.records.delete(a.id),this.events.emit(on.deleted,a)}}),this.persist()},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Qr(t,this.name)}get context(){return di(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:qs(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(on.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(on.created,e=>{const t=on.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(on.updated,e=>{const t=on.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(on.deleted,e=>{const t=on.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(xo.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{xe.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(on.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class VR extends pP{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Hi.EventEmitter,this.name=kO,this.version=HO,this.cached=[],this.initialized=!1,this.storagePrefix=Kn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const a=this.formatTarget(i),f={target:a,expiry:n};this.expirations.set(a,f),this.checkExpiry(a,f),this.events.emit(qi.created,{target:a,expiration:f})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),a=this.getExpiration(n);this.expirations.delete(n),this.events.emit(qi.deleted,{target:n,expiration:a})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Qr(t,this.name)}get context(){return di(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return WE(e);if(typeof e=="number")return JE(e);const{message:t}=Ae("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(qi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;xe.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(qi.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(xo.pulse,()=>this.checkExpirations()),this.events.on(qi.created,e=>{const t=qi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(qi.expired,e=>{const t=qi.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(qi.deleted,e=>{const t=qi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.getLocalStorage=Qt.getLocalStorageOrThrow=Qt.getCrypto=Qt.getCryptoOrThrow=Qt.getLocation=Qt.getLocationOrThrow=Qt.getNavigator=Qt.getNavigatorOrThrow=Dm=Qt.getDocument=Qt.getDocumentOrThrow=Qt.getFromWindowOrThrow=Qt.getFromWindow=void 0;function Ia(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Qt.getFromWindow=Ia;function So(r){const e=Ia(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Qt.getFromWindowOrThrow=So;function GR(){return So("document")}Qt.getDocumentOrThrow=GR;function WR(){return Ia("document")}var Dm=Qt.getDocument=WR;function JR(){return So("navigator")}Qt.getNavigatorOrThrow=JR;function YR(){return Ia("navigator")}Qt.getNavigator=YR;function QR(){return So("location")}Qt.getLocationOrThrow=QR;function XR(){return Ia("location")}Qt.getLocation=XR;function ZR(){return So("crypto")}Qt.getCryptoOrThrow=ZR;function eN(){return Ia("crypto")}Qt.getCrypto=eN;function tN(){return So("localStorage")}Qt.getLocalStorageOrThrow=tN;function rN(){return Ia("localStorage")}Qt.getLocalStorage=rN;class iN extends gP{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,this.name=KO,this.verifyUrlV3=GO,this.storagePrefix=Kn,this.version=pm,this.init=async()=>{var n;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&xe.toMiliseconds((n=this.publicKey)==null?void 0:n.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async n=>{if(!Oc()||this.isDevEnv)return;const a=window.location.origin,{id:f,decryptedId:u}=n,v=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${f}&decryptedId=${u}`;try{const p=Dm(),y=this.startAbortTimer(xe.ONE_SECOND*5),_=await new Promise((O,D)=>{const C=()=>{window.removeEventListener("message",W),p.body.removeChild(H),D("attestation aborted")};this.abortController.signal.addEventListener("abort",C);const H=p.createElement("iframe");H.src=v,H.style.display="none",H.addEventListener("error",C,{signal:this.abortController.signal});const W=Q=>{if(Q.data&&typeof Q.data=="string")try{const z=JSON.parse(Q.data);if(z.type==="verify_attestation"){if(d0(z.attestation).payload.id!==f)return;clearInterval(y),p.body.removeChild(H),this.abortController.signal.removeEventListener("abort",C),window.removeEventListener("message",W),O(z.attestation===null?"":z.attestation)}}catch(z){this.logger.warn(z)}};p.body.appendChild(H),window.addEventListener("message",W,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",_),_}catch(p){this.logger.warn(p)}return""},this.resolve=async n=>{if(this.isDevEnv)return"";const{attestationId:a,hash:f,encryptedId:u}=n;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(d0(a).payload.id!==u)return;const p=await this.isValidJwtAttestation(a);if(p){if(!p.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return p}}if(!f)return;const v=this.getVerifyUrl(n?.verifyUrl);return this.fetchAttestation(f,v)},this.fetchAttestation=async(n,a)=>{this.logger.debug(`resolving attestation: ${n} from url: ${a}`);const f=this.startAbortTimer(xe.ONE_SECOND*5),u=await fetch(`${a}/attestation/${n}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(f),u.status===200?await u.json():void 0},this.getVerifyUrl=n=>{let a=n||pc;return WO.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${pc}`),a=pc),a},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const n=this.startAbortTimer(xe.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(n),await a.json()}catch(n){this.logger.warn(n)}},this.persistPublicKey=async n=>{this.logger.debug("persisting public key to local storage",n),await this.store.setItem(this.storeKey,n),this.publicKey=n},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async n=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(n,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const f=await this.fetchAndPersistPublicKey();try{if(f)return this.validateAttestation(n,f)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const f=await this.fetchPublicKey();f&&(await this.persistPublicKey(f),a(f))});const n=await this.fetchPromise;return this.fetchPromise=void 0,n},this.validateAttestation=(n,a)=>{const f=fM(n,a.publicKey),u={hasExpired:xe.toMiliseconds(f.exp)<Date.now(),payload:f};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}},this.logger=Qr(t,this.name),this.abortController=new AbortController,this.isDevEnv=J0(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return di(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),xe.toMiliseconds(e))}}class nN extends vP{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=JO,this.registerDeviceToken=async i=>{const{clientId:n,token:a,notificationType:f,enableEncrypted:u=!1}=i,v=`${YO}/${this.projectId}/clients`;await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:f,token:a,always_raw:u})})},this.logger=Qr(t,this.context)}}var sN=Object.defineProperty,_v=Object.getOwnPropertySymbols,aN=Object.prototype.hasOwnProperty,oN=Object.prototype.propertyIsEnumerable,Av=(r,e,t)=>e in r?sN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ic=(r,e)=>{for(var t in e||(e={}))aN.call(e,t)&&Av(r,t,e[t]);if(_v)for(var t of _v(e))oN.call(e,t)&&Av(r,t,e[t]);return r};class cN extends bP{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,this.context=XO,this.storagePrefix=Kn,this.storageVersion=QO,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!J0())try{const n={eventId:tg(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:i2(this.core.relayer.protocol,this.core.relayer.version,M0)}}};await this.sendEvent([n])}catch(n){this.logger.warn(n)}},this.createEvent=n=>{const{event:a="ERROR",type:f="",properties:{topic:u,trace:v}}=n,p=tg(),y=this.core.projectId||"",_=Date.now(),O=ic({eventId:p,timestamp:_,props:{event:a,type:f,properties:{topic:u,trace:v}},bundleId:y,domain:this.getAppDomain()},this.setMethods(p));return this.telemetryEnabled&&(this.events.set(p,O),this.shouldPersist=!0),O},this.getEvent=n=>{const{eventId:a,topic:f}=n;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(v=>v.props.properties.topic===f);if(u)return ic(ic({},u),this.setMethods(u.eventId))},this.deleteEvent=n=>{const{eventId:a}=n;this.events.delete(a),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(xo.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(n=>{xe.fromMiliseconds(Date.now())-xe.fromMiliseconds(n.timestamp)>ZO&&(this.events.delete(n.eventId),this.shouldPersist=!0)})})},this.setMethods=n=>({addTrace:a=>this.addTrace(n,a),setError:a=>this.setError(n,a)}),this.addTrace=(n,a)=>{const f=this.events.get(n);f&&(f.props.properties.trace.push(a),this.events.set(n,f),this.shouldPersist=!0)},this.setError=(n,a)=>{const f=this.events.get(n);f&&(f.props.type=a,f.timestamp=Date.now(),this.events.set(n,f),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const n=await this.core.storage.getItem(this.storageKey)||[];if(!n.length)return;n.forEach(a=>{this.events.set(a.eventId,ic(ic({},a),this.setMethods(a.eventId)))})}catch(n){this.logger.warn(n)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const n=[];for(const[a,f]of this.events)f.props.type&&n.push(f);if(n.length!==0)try{if((await this.sendEvent(n)).ok)for(const a of n)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}},this.sendEvent=async n=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${eC}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${M0}${a}`,{method:"POST",body:JSON.stringify(n)})},this.getAppDomain=()=>r2().url,this.logger=Qr(t,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var fN=Object.defineProperty,Ev=Object.getOwnPropertySymbols,uN=Object.prototype.hasOwnProperty,hN=Object.prototype.propertyIsEnumerable,xv=(r,e,t)=>e in r?fN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Sv=(r,e)=>{for(var t in e||(e={}))uN.call(e,t)&&xv(r,t,e[t]);if(Ev)for(var t of Ev(e))hN.call(e,t)&&xv(r,t,e[t]);return r};class ud extends oP{constructor(e){var t;super(e),this.protocol=dm,this.version=pm,this.name=fd,this.events=new Hi.EventEmitter,this.initialized=!1,this.on=(f,u)=>this.events.on(f,u),this.once=(f,u)=>this.events.once(f,u),this.off=(f,u)=>this.events.off(f,u),this.removeListener=(f,u)=>this.events.removeListener(f,u),this.dispatchEnvelope=({topic:f,message:u,sessionExists:v})=>{if(!f||!u)return;const p={topic:f,message:u,publishedAt:Date.now(),transportType:Kt.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:v})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||vm,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=Qu({level:typeof e?.logger=="string"&&e.logger?e.logger:wO.logger}),{logger:n,chunkLoggerController:a}=aP({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=a,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var f,u;(f=this.logChunkController)!=null&&f.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Qr(n,this.name),this.heartbeat=new rD,this.crypto=new IR(this,this.logger,e?.keychain),this.history=new KR(this,this.logger),this.expirer=new VR(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new RD(Sv(Sv({},_O),e?.storageOptions)),this.relayer=new UR({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new HR(this,this.logger),this.verify=new iN(this,this.logger,this.storage),this.echoClient=new nN(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new cN(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new ud(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(FO,i),t}get context(){return di(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(ov,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(ov)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const lN=ud,Pm="wc",Om=2,Cm="client",hd=`${Pm}@${Om}:${Cm}:`,Wl={name:Cm,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},Iv="WALLETCONNECT_DEEPLINK_CHOICE",dN="proposal",Rm="Proposal expired",pN="session",Wa=xe.SEVEN_DAYS,gN="engine",wr={wc_sessionPropose:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:xe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:xe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1119}}},Jl={min:xe.FIVE_MINUTES,max:xe.SEVEN_DAYS},xn={idle:"IDLE",active:"ACTIVE"},vN="request",bN=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],mN="wc",yN="auth",wN="authKeys",_N="pairingTopics",AN="requests",th=`${mN}@${1.5}:${yN}:`,fu=`${th}:PUB_KEY`;var EN=Object.defineProperty,xN=Object.defineProperties,SN=Object.getOwnPropertyDescriptors,Mv=Object.getOwnPropertySymbols,IN=Object.prototype.hasOwnProperty,MN=Object.prototype.propertyIsEnumerable,Dv=(r,e,t)=>e in r?EN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,rr=(r,e)=>{for(var t in e||(e={}))IN.call(e,t)&&Dv(r,t,e[t]);if(Mv)for(var t of Mv(e))MN.call(e,t)&&Dv(r,t,e[t]);return r},fn=(r,e)=>xN(r,SN(e));class DN extends yP{constructor(e){super(e),this.name=gN,this.events=new N0,this.initialized=!1,this.requestQueue={state:xn.idle,queue:[]},this.sessionRequestQueue={state:xn.idle,queue:[]},this.requestQueueDelay=xe.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(wr)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=fn(rr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:a,optionalNamespaces:f,sessionProperties:u,relays:v}=i;let p=n,y,_=!1;try{p&&(_=this.client.core.pairing.pairings.get(p).active)}catch(q){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),q}if(!p||!_){const{topic:q,uri:j}=await this.client.core.pairing.create();p=q,y=j}if(!p){const{message:q}=Ae("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(q)}const O=await this.client.core.crypto.generateKeyPair(),D=wr.wc_sessionPropose.req.ttl||xe.FIVE_MINUTES,C=vr(D),H=rr({requiredNamespaces:a,optionalNamespaces:f,relays:v??[{protocol:gm}],proposer:{publicKey:O,metadata:this.client.metadata},expiryTimestamp:C,pairingTopic:p},u&&{sessionProperties:u}),{reject:W,resolve:Q,done:z}=ca(D,Rm);this.events.once(St("session_connect"),async({error:q,session:j})=>{if(q)W(q);else if(j){j.self.publicKey=O;const V=fn(rr({},j),{pairingTopic:H.pairingTopic,requiredNamespaces:H.requiredNamespaces,optionalNamespaces:H.optionalNamespaces,transportType:Kt.relay});await this.client.session.set(j.topic,V),await this.setExpiry(j.topic,j.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:j.peer.metadata}),this.cleanupDuplicatePairings(V),Q(V)}});const Y=await this.sendRequest({topic:p,method:"wc_sessionPropose",params:H,throwOnFailedPublish:!0});return await this.setProposal(Y,rr({id:Y},H)),{uri:y,approval:z}},this.pair=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async t=>{var i,n,a;const f=this.client.core.eventClient.createEvent({properties:{topic:(i=t?.id)==null?void 0:i.toString(),trace:[cn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(F){throw f.setError(aa.no_internet_connection),F}try{await this.isValidProposalId(t?.id)}catch(F){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),f.setError(aa.proposal_not_found),F}try{await this.isValidApprove(t)}catch(F){throw this.client.logger.error("approve() -> isValidApprove() failed"),f.setError(aa.session_approve_namespace_validation_failure),F}const{id:u,relayProtocol:v,namespaces:p,sessionProperties:y,sessionConfig:_}=t,O=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:f.eventId});const{pairingTopic:D,proposer:C,requiredNamespaces:H,optionalNamespaces:W}=O;let Q=(n=this.client.core.eventClient)==null?void 0:n.getEvent({topic:D});Q||(Q=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:cn.session_approve_started,properties:{topic:D,trace:[cn.session_approve_started,cn.session_namespaces_validation_success]}}));const z=await this.client.core.crypto.generateKeyPair(),Y=C.publicKey,q=await this.client.core.crypto.generateSharedKey(z,Y),j=rr(rr({relay:{protocol:v??"irn"},namespaces:p,controller:{publicKey:z,metadata:this.client.metadata},expiry:vr(Wa)},y&&{sessionProperties:y}),_&&{sessionConfig:_}),V=Kt.relay;Q.addTrace(cn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(q,{transportType:V})}catch(F){throw Q.setError(aa.subscribe_session_topic_failure),F}Q.addTrace(cn.subscribe_session_topic_success);const A=fn(rr({},j),{topic:q,requiredNamespaces:H,optionalNamespaces:W,pairingTopic:D,acknowledged:!1,self:j.controller,peer:{publicKey:C.publicKey,metadata:C.metadata},controller:z,transportType:Kt.relay});await this.client.session.set(q,A),Q.addTrace(cn.store_session);try{Q.addTrace(cn.publishing_session_settle),await this.sendRequest({topic:q,method:"wc_sessionSettle",params:j,throwOnFailedPublish:!0}).catch(F=>{throw Q?.setError(aa.session_settle_publish_failure),F}),Q.addTrace(cn.session_settle_publish_success),Q.addTrace(cn.publishing_session_approve),await this.sendResult({id:u,topic:D,result:{relay:{protocol:v??"irn"},responderPublicKey:z},throwOnFailedPublish:!0}).catch(F=>{throw Q?.setError(aa.session_approve_publish_failure),F}),Q.addTrace(cn.session_approve_publish_success)}catch(F){throw this.client.logger.error(F),this.client.session.delete(q,$t("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(q),F}return this.client.core.eventClient.deleteEvent({eventId:Q.eventId}),await this.client.core.pairing.updateMetadata({topic:D,metadata:C.metadata}),await this.client.proposal.delete(u,$t("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:D}),await this.setExpiry(q,vr(Wa)),{topic:q,acknowledged:()=>Promise.resolve(this.client.session.get(q))}},this.reject=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(f){throw this.client.logger.error("reject() -> isValidReject() failed"),f}const{id:i,reason:n}=t;let a;try{a=this.client.proposal.get(i).pairingTopic}catch(f){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),f}a&&(await this.sendError({id:i,topic:a,error:n,rpcOpts:wr.wc_sessionPropose.reject}),await this.client.proposal.delete(i,$t("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(_){throw this.client.logger.error("update() -> isValidUpdate() failed"),_}const{topic:i,namespaces:n}=t,{done:a,resolve:f,reject:u}=ca(),v=Ns(),p=ha().toString(),y=this.client.session.get(i).namespaces;return this.events.once(St("session_update",v),({error:_})=>{_?u(_):f()}),await this.client.session.update(i,{namespaces:n}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:v,relayRpcId:p}).catch(_=>{this.client.logger.error(_),this.client.session.update(i,{namespaces:y}),u(_)}),{acknowledged:a}},this.extend=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(v){throw this.client.logger.error("extend() -> isValidExtend() failed"),v}const{topic:i}=t,n=Ns(),{done:a,resolve:f,reject:u}=ca();return this.events.once(St("session_extend",n),({error:v})=>{v?u(v):f()}),await this.setExpiry(i,vr(Wa)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(v=>{u(v)}),{acknowledged:a}},this.request=async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(C){throw this.client.logger.error("request() -> isValidRequest() failed"),C}const{chainId:i,request:n,topic:a,expiry:f=wr.wc_sessionRequest.req.ttl}=t,u=this.client.session.get(a);u?.transportType===Kt.relay&&await this.confirmOnlineStateOrThrow();const v=Ns(),p=ha().toString(),{done:y,resolve:_,reject:O}=ca(f,"Request expired. Please try again.");this.events.once(St("session_request",v),({error:C,result:H})=>{C?O(C):_(H)});const D=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);return D?(await this.sendRequest({clientRpcId:v,relayRpcId:p,topic:a,method:"wc_sessionRequest",params:{request:fn(rr({},n),{expiryTimestamp:vr(f)}),chainId:i},expiry:f,throwOnFailedPublish:!0,appLink:D}).catch(C=>O(C)),this.client.events.emit("session_request_sent",{topic:a,request:n,chainId:i,id:v}),await y()):await Promise.all([new Promise(async C=>{await this.sendRequest({clientRpcId:v,relayRpcId:p,topic:a,method:"wc_sessionRequest",params:{request:fn(rr({},n),{expiryTimestamp:vr(f)}),chainId:i},expiry:f,throwOnFailedPublish:!0}).catch(H=>O(H)),this.client.events.emit("session_request_sent",{topic:a,request:n,chainId:i,id:v}),C()}),new Promise(async C=>{var H;if(!((H=u.sessionConfig)!=null&&H.disableDeepLink)){const W=await XE(this.client.core.storage,Iv);await YE({id:v,topic:a,wcDeepLink:W})}C()}),y()]).then(C=>C[2])},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:n}=t,{id:a}=n,f=this.client.session.get(i);f.transportType===Kt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(f.peer.metadata,f.transportType);Dn(n)?await this.sendResult({id:a,topic:i,result:n.result,throwOnFailedPublish:!0,appLink:u}):Ui(n)&&await this.sendError({id:a,topic:i,error:n.error,appLink:u}),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:i}=t;if(this.client.session.keys.includes(i)){const n=Ns(),a=ha().toString(),{done:f,resolve:u,reject:v}=ca();this.events.once(St("session_ping",n),({error:p})=>{p?v(p):u()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:a}),f()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:i,event:n,chainId:a}=t,f=ha().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:a},throwOnFailedPublish:!0,relayRpcId:f})},this.disconnect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:$t("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:n}=Ae("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>IM(i,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(t,i)=>{var n;this.isInitialized(),this.isValidAuthenticate(t);const a=i&&this.client.core.linkModeSupportedApps.includes(i)&&((n=this.client.metadata.redirect)==null?void 0:n.linkMode),f=a?Kt.link_mode:Kt.relay;f===Kt.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:v="",uri:p,domain:y,nonce:_,type:O,exp:D,nbf:C,methods:H=[],expiry:W}=t,Q=[...t.resources||[]],{topic:z,uri:Y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:f});this.client.logger.info({message:"Generated new pairing",pairing:{topic:z,uri:Y}});const q=await this.client.core.crypto.generateKeyPair(),j=au(q);if(await Promise.all([this.client.auth.authKeys.set(fu,{responseTopic:j,publicKey:q}),this.client.auth.pairingTopics.set(j,{topic:j,pairingTopic:z})]),await this.client.core.relayer.subscribe(j,{transportType:f}),this.client.logger.info(`sending request to new pairing topic: ${z}`),H.length>0){const{namespace:P}=cc(u[0]);let S=GI(P,"request",H);su(Q)&&(S=JI(S,Q.pop())),Q.push(S)}const V=W&&W>wr.wc_sessionAuthenticate.req.ttl?W:wr.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:O??"caip122",chains:u,statement:v,aud:p,domain:y,version:"1",nonce:_,iat:new Date().toISOString(),exp:D,nbf:C,resources:Q},requester:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:vr(V)},F={eip155:{chains:u,methods:[...new Set(["personal_sign",...H])],events:["chainChanged","accountsChanged"]}},ae={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:z,proposer:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:vr(wr.wc_sessionPropose.req.ttl)},{done:de,resolve:$,reject:m}=ca(V,"Request expired"),c=async({error:P,session:S})=>{if(this.events.off(St("session_request",b),l),P)m(P);else if(S){S.self.publicKey=q,await this.client.session.set(S.topic,S),await this.setExpiry(S.topic,S.expiry),z&&await this.client.core.pairing.updateMetadata({topic:z,metadata:S.peer.metadata});const d=this.client.session.get(S.topic);await this.deleteProposal(x),$({session:d})}},l=async P=>{var S,d,g;if(await this.deletePendingAuthRequest(b,{message:"fulfilled",code:0}),P.error){const k=$t("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return P.error.code===k.code?void 0:(this.events.off(St("session_connect"),c),m(P.error.message))}await this.deleteProposal(x),this.events.off(St("session_connect"),c);const{cacaos:N,responder:Z}=P.result,se=[],M=[];for(const k of N){await Mg({cacao:k,projectId:this.client.core.projectId})||(this.client.logger.error(k,"Signature verification failed"),m($t("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:K}=k,w=su(K.resources),U=[Ig(K.iss)],ne=Eu(K.iss);if(w){const ce=Dg(w),ue=Pg(w);se.push(...ce),U.push(...ue)}for(const ce of U)M.push(`${ce}:${ne}`)}const ee=await this.client.core.crypto.generateSharedKey(q,Z.publicKey);let B;se.length>0&&(B={topic:ee,acknowledged:!0,self:{publicKey:q,metadata:this.client.metadata},peer:Z,controller:Z.publicKey,expiry:vr(Wa),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:z,namespaces:qg([...new Set(se)],[...new Set(M)]),transportType:f},await this.client.core.relayer.subscribe(ee,{transportType:f}),await this.client.session.set(ee,B),z&&await this.client.core.pairing.updateMetadata({topic:z,metadata:Z.metadata}),B=this.client.session.get(ee)),(S=this.client.metadata.redirect)!=null&&S.linkMode&&(d=Z.metadata.redirect)!=null&&d.linkMode&&(g=Z.metadata.redirect)!=null&&g.universal&&i&&(this.client.core.addLinkModeSupportedApp(Z.metadata.redirect.universal),this.client.session.update(ee,{transportType:Kt.link_mode})),$({auths:N,session:B})},b=Ns(),x=Ns();this.events.once(St("session_connect"),c),this.events.once(St("session_request",b),l);let I;try{if(a){const P=qs("wc_sessionAuthenticate",A,b);this.client.core.history.set(z,P);const S=await this.client.core.crypto.encode("",P,{type:Tc,encoding:Xo});I=Wf(i,z,S)}else await Promise.all([this.sendRequest({topic:z,method:"wc_sessionAuthenticate",params:A,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:b}),this.sendRequest({topic:z,method:"wc_sessionPropose",params:ae,expiry:wr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:x})])}catch(P){throw this.events.off(St("session_connect"),c),this.events.off(St("session_request",b),l),P}return await this.setProposal(x,rr({id:x},ae)),await this.setAuthRequest(b,{request:fn(rr({},A),{verifyContext:{}}),pairingTopic:z,transportType:f}),{uri:I??Y,response:de}},this.approveSessionAuthenticate=async t=>{const{id:i,auths:n}=t,a=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[oa.authenticated_session_approve_started]}});try{this.isInitialized()}catch(W){throw a.setError(tc.no_internet_connection),W}const f=this.getPendingAuthRequest(i);if(!f)throw a.setError(tc.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const u=f.transportType||Kt.relay;u===Kt.relay&&await this.confirmOnlineStateOrThrow();const v=f.requester.publicKey,p=await this.client.core.crypto.generateKeyPair(),y=au(v),_={type:gs,receiverPublicKey:v,senderPublicKey:p},O=[],D=[];for(const W of n){if(!await Mg({cacao:W,projectId:this.client.core.projectId})){a.setError(tc.invalid_cacao);const j=$t("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:y,error:j,encodeOpts:_}),new Error(j.message)}a.addTrace(oa.cacaos_verified);const{p:Q}=W,z=su(Q.resources),Y=[Ig(Q.iss)],q=Eu(Q.iss);if(z){const j=Dg(z),V=Pg(z);O.push(...j),Y.push(...V)}for(const j of Y)D.push(`${j}:${q}`)}const C=await this.client.core.crypto.generateSharedKey(p,v);a.addTrace(oa.create_authenticated_session_topic);let H;if(O?.length>0){H={topic:C,acknowledged:!0,self:{publicKey:p,metadata:this.client.metadata},peer:{publicKey:v,metadata:f.requester.metadata},controller:v,expiry:vr(Wa),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:f.pairingTopic,namespaces:qg([...new Set(O)],[...new Set(D)]),transportType:u},a.addTrace(oa.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:u})}catch(W){throw a.setError(tc.subscribe_authenticated_session_topic_failure),W}a.addTrace(oa.subscribe_authenticated_session_topic_success),await this.client.session.set(C,H),a.addTrace(oa.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:f.requester.metadata})}a.addTrace(oa.publishing_authenticated_session_approve);try{await this.sendResult({topic:y,id:i,result:{cacaos:n,responder:{publicKey:p,metadata:this.client.metadata}},encodeOpts:_,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(f.requester.metadata,u)})}catch(W){throw a.setError(tc.authenticated_session_approve_publish_failure),W}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:f.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:H}},this.rejectSessionAuthenticate=async t=>{this.isInitialized();const{id:i,reason:n}=t,a=this.getPendingAuthRequest(i);if(!a)throw new Error(`Could not find pending auth request with id ${i}`);a.transportType===Kt.relay&&await this.confirmOnlineStateOrThrow();const f=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),v=au(f),p={type:gs,receiverPublicKey:f,senderPublicKey:u};await this.sendError({id:i,topic:v,error:n,encodeOpts:p,rpcOpts:wr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,$t("USER_DISCONNECTED"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:i,iss:n}=t;return H2(i,n)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(a=>{var f,u;return((f=a.peerMetadata)==null?void 0:f.url)&&((u=a.peerMetadata)==null?void 0:u.url)===t.peer.metadata.url&&a.topic&&a.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async t=>{var i;const{topic:n,expirerHasDeleted:a=!1,emitEvent:f=!0,id:u=0}=t,{self:v}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,$t("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(v.publicKey)&&await this.client.core.crypto.deleteKeyPair(v.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),a||this.client.core.expirer.del(n),this.client.core.storage.removeItem(Iv).catch(p=>this.client.logger.warn(p)),this.getPendingSessionRequests().forEach(p=>{p.topic===n&&this.deletePendingSessionRequest(p.id,$t("USER_DISCONNECTED"))}),n===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=xn.idle),f&&this.client.events.emit("session_delete",{id:u,topic:n})},this.deleteProposal=async(t,i)=>{if(i)try{const n=this.client.proposal.get(t);this.client.core.eventClient.getEvent({topic:n.pairingTopic})?.setError(aa.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,$t("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")},this.deletePendingSessionRequest=async(t,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),n?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==t),n&&(this.sessionRequestQueue.state=xn.idle,this.client.events.emit("session_request_expire",{id:t}))},this.deletePendingAuthRequest=async(t,i,n=!1)=>{await Promise.all([this.client.auth.requests.delete(t,i),n?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),await this.client.session.update(t,{expiry:i}))},this.setProposal=async(t,i)=>{this.client.core.expirer.set(t,vr(wr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,i)},this.setAuthRequest=async(t,i)=>{const{request:n,pairingTopic:a,transportType:f=Kt.relay}=i;this.client.core.expirer.set(t,n.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:t,pairingTopic:a,verifyContext:n.verifyContext,transportType:f})},this.setPendingSessionRequest=async t=>{const{id:i,topic:n,params:a,verifyContext:f}=t,u=a.request.expiryTimestamp||vr(wr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,u),await this.client.pendingRequest.set(i,{id:i,topic:n,params:a,verifyContext:f})},this.sendRequest=async t=>{const{topic:i,method:n,params:a,expiry:f,relayRpcId:u,clientRpcId:v,throwOnFailedPublish:p,appLink:y}=t,_=qs(n,a,v);let O;const D=!!y;try{const W=D?Xo:Ls;O=await this.client.core.crypto.encode(i,_,{encoding:W})}catch(W){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),W}let C;if(bN.includes(n)){const W=hs(JSON.stringify(_)),Q=hs(O);C=await this.client.core.verify.register({id:Q,decryptedId:W})}const H=wr[n].req;if(H.attestation=C,f&&(H.ttl=f),u&&(H.id=u),this.client.core.history.set(i,_),D){const W=Wf(y,i,O);await global.Linking.openURL(W,this.client.name)}else{const W=wr[n].req;f&&(W.ttl=f),u&&(W.id=u),p?(W.internal=fn(rr({},W.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,O,W)):this.client.core.relayer.publish(i,O,W).catch(Q=>this.client.logger.error(Q))}return _.id},this.sendResult=async t=>{const{id:i,topic:n,result:a,throwOnFailedPublish:f,encodeOpts:u,appLink:v}=t,p=Xu(i,a);let y;const _=v&&typeof(global==null?void 0:global.Linking)<"u";try{const D=_?Xo:Ls;y=await this.client.core.crypto.encode(n,p,fn(rr({},u||{}),{encoding:D}))}catch(D){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),D}let O;try{O=await this.client.core.history.get(n,i)}catch(D){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),D}if(_){const D=Wf(v,n,y);await global.Linking.openURL(D,this.client.name)}else{const D=wr[O.request.method].res;f?(D.internal=fn(rr({},D.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,y,D)):this.client.core.relayer.publish(n,y,D).catch(C=>this.client.logger.error(C))}await this.client.core.history.resolve(p)},this.sendError=async t=>{const{id:i,topic:n,error:a,encodeOpts:f,rpcOpts:u,appLink:v}=t,p=fm(i,a);let y;const _=v&&typeof(global==null?void 0:global.Linking)<"u";try{const D=_?Xo:Ls;y=await this.client.core.crypto.encode(n,p,fn(rr({},f||{}),{encoding:D}))}catch(D){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),D}let O;try{O=await this.client.core.history.get(n,i)}catch(D){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),D}if(_){const D=Wf(v,n,y);await global.Linking.openURL(D,this.client.name)}else{const D=u||wr[O.request.method].res;this.client.core.relayer.publish(n,y,D)}await this.client.core.history.resolve(p)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(n=>{let a=!1;Rs(n.expiry)&&(a=!0),this.client.core.crypto.keychain.has(n.topic)||(a=!0),a&&t.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{Rs(n.expiryTimestamp)&&i.push(n.id)}),await Promise.all([...t.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===xn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=xn.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=xn.idle},this.processRequest=async t=>{const{topic:i,payload:n,attestation:a,transportType:f,encryptedId:u}=t,v=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:v}))switch(v){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:n,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,n);case"wc_sessionPing":return await this.onSessionPingRequest(i,n);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:n,attestation:a,encryptedId:u,transportType:f});case"wc_sessionEvent":return await this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:n,attestation:a,encryptedId:u,transportType:f});default:return this.client.logger.info(`Unsupported request method ${v}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:n,transportType:a}=t,f=(await this.client.core.history.get(i,n.id)).request.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n,a);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${f}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:n}=Ae("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=t=>{const{topic:i,requestMethod:n}=t,a=this.expectedPairingMethodMap.get(i);return!a||a.includes(n)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async t=>{const{topic:i,payload:n,attestation:a,encryptedId:f}=t,{params:u,id:v}=n;try{const p=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(rr({},n.params));const y=u.expiryTimestamp||vr(wr.wc_sessionPropose.req.ttl),_=rr({id:v,pairingTopic:i,expiryTimestamp:y},u);await this.setProposal(v,_);const O=await this.getVerifyContext({attestationId:a,hash:hs(JSON.stringify(n)),encryptedId:f,metadata:_.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),p?.setError(fs.proposal_listener_not_found)),p?.addTrace(Sn.emit_session_proposal),this.client.events.emit("session_proposal",{id:v,params:_,verifyContext:O})}catch(p){await this.sendError({id:v,topic:i,error:p,rpcOpts:wr.wc_sessionPropose.autoReject}),this.client.logger.error(p)}},this.onSessionProposeResponse=async(t,i,n)=>{const{id:a}=i;if(Dn(i)){const{result:f}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:f});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const v=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:v});const p=f.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:p});const y=await this.client.core.crypto.generateSharedKey(v,p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:y});const _=await this.client.core.relayer.subscribe(y,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:_}),await this.client.core.pairing.activate({topic:t})}else if(Ui(i)){await this.client.proposal.delete(a,$t("USER_DISCONNECTED"));const f=St("session_connect");if(this.events.listenerCount(f)===0)throw new Error(`emitting ${f} without any listeners, 954`);this.events.emit(St("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(t,i)=>{const{id:n,params:a}=i;try{this.isValidSessionSettleRequest(a);const{relay:f,controller:u,expiry:v,namespaces:p,sessionProperties:y,sessionConfig:_}=i.params,O=fn(rr(rr({topic:t,relay:f,expiry:v,namespaces:p,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:u.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},y&&{sessionProperties:y}),_&&{sessionConfig:_}),{transportType:Kt.relay}),D=St("session_connect");if(this.events.listenerCount(D)===0)throw new Error(`emitting ${D} without any listeners 997`);this.events.emit(St("session_connect"),{session:O}),await this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(f){await this.sendError({id:n,topic:t,error:f}),this.client.logger.error(f)}},this.onSessionSettleResponse=async(t,i)=>{const{id:n}=i;Dn(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(St("session_approve",n),{})):Ui(i)&&(await this.client.session.delete(t,$t("USER_DISCONNECTED")),this.events.emit(St("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:n,id:a}=i;try{const f=`${t}_session_update`,u=Zo.get(f);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.info(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:t,error:$t("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(rr({topic:t},n));try{Zo.set(f,a),await this.client.session.update(t,{namespaces:n.namespaces}),await this.sendResult({id:a,topic:t,result:!0,throwOnFailedPublish:!0})}catch(v){throw Zo.delete(f),v}this.client.events.emit("session_update",{id:a,topic:t,params:n})}catch(f){await this.sendError({id:a,topic:t,error:f}),this.client.logger.error(f)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:n}=i,a=St("session_update",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Dn(i)?this.events.emit(St("session_update",n),{}):Ui(i)&&this.events.emit(St("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:n}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,vr(Wa)),await this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:t})}catch(a){await this.sendError({id:n,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionExtendResponse=(t,i)=>{const{id:n}=i,a=St("session_extend",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Dn(i)?this.events.emit(St("session_extend",n),{}):Ui(i)&&this.events.emit(St("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:n}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:t})}catch(a){await this.sendError({id:n,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionPingResponse=(t,i)=>{const{id:n}=i,a=St("session_ping",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);setTimeout(()=>{Dn(i)?this.events.emit(St("session_ping",n),{}):Ui(i)&&this.events.emit(St("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(Gr.publish,async()=>{a(await this.deleteSession({topic:t,id:n}))})}),this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:$t("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}},this.onSessionRequest=async t=>{var i,n,a;const{topic:f,payload:u,attestation:v,encryptedId:p,transportType:y}=t,{id:_,params:O}=u;try{await this.isValidRequest(rr({topic:f},O));const D=this.client.session.get(f),C=await this.getVerifyContext({attestationId:v,hash:hs(JSON.stringify(qs("wc_sessionRequest",O,_))),encryptedId:p,metadata:D.peer.metadata,transportType:y}),H={id:_,topic:f,params:O,verifyContext:C};await this.setPendingSessionRequest(H),y===Kt.link_mode&&(i=D.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((n=D.peer.metadata.redirect)==null?void 0:n.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(H):(this.addSessionRequestToSessionRequestQueue(H),this.processSessionRequestQueue())}catch(D){await this.sendError({id:_,topic:f,error:D}),this.client.logger.error(D)}},this.onSessionRequestResponse=(t,i)=>{const{id:n}=i,a=St("session_request",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Dn(i)?this.events.emit(St("session_request",n),{result:i.result}):Ui(i)&&this.events.emit(St("session_request",n),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:n,params:a}=i;try{const f=`${t}_session_event_${a.event.name}`,u=Zo.get(f);if(u&&this.isRequestOutOfSync(u,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(rr({topic:t},a)),this.client.events.emit("session_event",{id:n,topic:t,params:a}),Zo.set(f,n)}catch(f){await this.sendError({id:n,topic:t,error:f}),this.client.logger.error(f)}},this.onSessionAuthenticateResponse=(t,i)=>{const{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),Dn(i)?this.events.emit(St("session_request",n),{result:i.result}):Ui(i)&&this.events.emit(St("session_request",n),{error:i.error})},this.onSessionAuthenticateRequest=async t=>{var i;const{topic:n,payload:a,attestation:f,encryptedId:u,transportType:v}=t;try{const{requester:p,authPayload:y,expiryTimestamp:_}=a.params,O=await this.getVerifyContext({attestationId:f,hash:hs(JSON.stringify(a)),encryptedId:u,metadata:p.metadata,transportType:v}),D={requester:p,pairingTopic:n,id:a.id,authPayload:y,verifyContext:O,expiryTimestamp:_};await this.setAuthRequest(a.id,{request:D,pairingTopic:n,transportType:v}),v===Kt.link_mode&&(i=p.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(p.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:a.params,id:a.id,verifyContext:O})}catch(p){this.client.logger.error(p);const y=a.params.requester.publicKey,_=await this.client.core.crypto.generateKeyPair(),O=this.getAppLinkIfEnabled(a.params.requester.metadata,v),D={type:gs,receiverPublicKey:y,senderPublicKey:_};await this.sendError({id:a.id,topic:n,error:p,encodeOpts:D,rpcOpts:wr.wc_sessionAuthenticate.autoReject,appLink:O})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=xn.idle,this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:i})=>{const n=this.client.core.history.pending;n.length>0&&n.filter(a=>a.topic===t&&a.request.method==="wc_sessionRequest").forEach(a=>{const f=a.request.id,u=St("session_request",f);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(St("session_request",a.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===xn.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=xn.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const i=this.client.proposal.getAll().find(n=>n.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:qs("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async t=>{if(!ci(t)){const{message:v}=Ae("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(v)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:a,sessionProperties:f,relays:u}=t;if(Jr(i)||await this.isValidPairingTopic(i),!qM(u,!0)){const{message:v}=Ae("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(v)}!Jr(n)&&_c(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!Jr(a)&&_c(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),Jr(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(t,i)=>{const n=LM(t,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async t=>{if(!ci(t))throw new Error(Ae("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:n,relayProtocol:a,sessionProperties:f}=t;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const u=this.client.proposal.get(i),v=zl(n,"approve()");if(v)throw new Error(v.message);const p=zg(u.requiredNamespaces,n,"approve()");if(p)throw new Error(p.message);if(!fr(a,!0)){const{message:y}=Ae("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(y)}Jr(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async t=>{if(!ci(t)){const{message:a}=Ae("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(a)}const{id:i,reason:n}=t;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!UM(n)){const{message:a}=Ae("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(a)}},this.isValidSessionSettleRequest=t=>{if(!ci(t)){const{message:p}=Ae("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:i,controller:n,namespaces:a,expiry:f}=t;if(!X2(i)){const{message:p}=Ae("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const u=CM(n,"onSessionSettleRequest()");if(u)throw new Error(u.message);const v=zl(a,"onSessionSettleRequest()");if(v)throw new Error(v.message);if(Rs(f)){const{message:p}=Ae("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!ci(t)){const{message:v}=Ae("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(v)}const{topic:i,namespaces:n}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const a=this.client.session.get(i),f=zl(n,"update()");if(f)throw new Error(f.message);const u=zg(a.requiredNamespaces,n,"update()");if(u)throw new Error(u.message)},this.isValidExtend=async t=>{if(!ci(t)){const{message:n}=Ae("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(n)}const{topic:i}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!ci(t)){const{message:v}=Ae("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(v)}const{topic:i,request:n,chainId:a,expiry:f}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!Ug(u,a)){const{message:v}=Ae("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(v)}if(!zM(n)){const{message:v}=Ae("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(v)}if(!HM(u,a,n.method)){const{message:v}=Ae("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(v)}if(f&&!WM(f,Jl)){const{message:v}=Ae("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Jl.min} and ${Jl.max}`);throw new Error(v)}},this.isValidRespond=async t=>{var i;if(!ci(t)){const{message:f}=Ae("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(f)}const{topic:n,response:a}=t;try{await this.isValidSessionTopic(n)}catch(f){throw(i=t?.response)!=null&&i.id&&this.cleanupAfterResponse(t),f}if(!jM(a)){const{message:f}=Ae("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidPing=async t=>{if(!ci(t)){const{message:n}=Ae("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(n)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!ci(t)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(u)}const{topic:i,event:n,chainId:a}=t;await this.isValidSessionTopic(i);const{namespaces:f}=this.client.session.get(i);if(!Ug(f,a)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!kM(n)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(u)}if(!KM(f,a,n.name)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(u)}},this.isValidDisconnect=async t=>{if(!ci(t)){const{message:n}=Ae("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(n)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=t=>{const{chains:i,uri:n,domain:a,nonce:f}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!fr(n,!1))throw new Error("uri is required parameter");if(!fr(a,!1))throw new Error("domain is required parameter");if(!fr(f,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(v=>cc(v).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=cc(i[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async t=>{const{attestationId:i,hash:n,encryptedId:a,metadata:f,transportType:u}=t,v={verified:{verifyUrl:f.verifyUrl||pc,validation:"UNKNOWN",origin:f.url||""}};try{if(u===Kt.link_mode){const y=this.getAppLinkIfEnabled(f,u);return v.verified.validation=y&&new URL(y).origin===new URL(f.url).origin?"VALID":"INVALID",v}const p=await this.client.core.verify.resolve({attestationId:i,hash:n,encryptedId:a,verifyUrl:f.verifyUrl});p&&(v.verified.origin=p.origin,v.verified.isScam=p.isScam,v.verified.validation=p.origin===new URL(f.url).origin?"VALID":"INVALID")}catch(p){this.client.logger.warn(p)}return this.client.logger.debug(`Verify context: ${JSON.stringify(v)}`),v},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(n=>{if(!fr(n,!1)){const{message:a}=Ae("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(a)}})},this.getPendingAuthRequest=t=>{const i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0;const a=this.recentlyDeletedLimit/2;for(const f of this.recentlyDeletedMap.keys()){if(n++>=a)break;this.recentlyDeletedMap.delete(f)}}},this.checkRecentlyDeleted=t=>{const i=this.recentlyDeletedMap.get(t);if(i){const{message:n}=Ae("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(n)}},this.isLinkModeEnabled=(t,i)=>{var n,a,f,u,v,p,y,_,O;return!t||i!==Kt.link_mode?!1:((a=(n=this.client.metadata)==null?void 0:n.redirect)==null?void 0:a.linkMode)===!0&&((u=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:u.universal)!==void 0&&((p=(v=this.client.metadata)==null?void 0:v.redirect)==null?void 0:p.universal)!==""&&((y=t?.redirect)==null?void 0:y.universal)!==void 0&&((_=t?.redirect)==null?void 0:_.universal)!==""&&((O=t?.redirect)==null?void 0:O.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(t,i)=>{var n;return this.isLinkModeEnabled(t,i)?(n=t?.redirect)==null?void 0:n.universal:void 0},this.handleLinkModeMessage=({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const i=eg(t,"topic")||"",n=decodeURIComponent(eg(t,"wc_ev")||""),a=this.client.session.keys.includes(i);a&&this.client.session.update(i,{transportType:Kt.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:n,sessionExists:a})},this.registerLinkModeListeners=async()=>{var t;if(J0()||mo()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const n=await i.getInitialURL();n&&setTimeout(()=>{this.handleLinkModeMessage({url:n})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Gr.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:t,message:i,attestation:n,transportType:a}=e,{publicKey:f}=this.client.auth.authKeys.keys.includes(fu)?this.client.auth.authKeys.get(fu):{responseTopic:void 0,publicKey:void 0},u=await this.client.core.crypto.decode(t,i,{receiverPublicKey:f,encoding:a===Kt.link_mode?Xo:Ls});try{od(u)?(this.client.core.history.set(t,u),this.onRelayEventRequest({topic:t,payload:u,attestation:n,transportType:a,encryptedId:hs(i)})):Zu(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:t,payload:u,transportType:a}),this.client.core.history.delete(t,u.id)):this.onRelayEventUnknownPayload({topic:t,payload:u,transportType:a})}catch(v){this.client.logger.error(v)}}registerExpirerEvents(){this.client.core.expirer.on(qi.expired,async e=>{const{topic:t,id:i}=o2(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Ae("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,Ae("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(fa.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(fa.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!fr(e,!1)){const{message:t}=Ae("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Rs(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ae("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!fr(e,!1)){const{message:t}=Ae("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Rs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ae("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ae("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(fr(e,!1)){const{message:t}=Ae("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Ae("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!$M(e)){const{message:t}=Ae("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Rs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ae("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class PN extends Sa{constructor(e,t){super(e,t,dN,hd),this.core=e,this.logger=t}}class ON extends Sa{constructor(e,t){super(e,t,pN,hd),this.core=e,this.logger=t}}class CN extends Sa{constructor(e,t){super(e,t,vN,hd,i=>i.id),this.core=e,this.logger=t}}class RN extends Sa{constructor(e,t){super(e,t,wN,th,()=>fu),this.core=e,this.logger=t}}class NN extends Sa{constructor(e,t){super(e,t,_N,th),this.core=e,this.logger=t}}class TN extends Sa{constructor(e,t){super(e,t,AN,th,i=>i.id),this.core=e,this.logger=t}}class FN{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new RN(this.core,this.logger),this.pairingTopics=new NN(this.core,this.logger),this.requests=new TN(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class ld extends mP{constructor(e){super(e),this.protocol=Pm,this.version=Om,this.name=Wl.name,this.events=new Hi.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,n)=>{try{return await this.engine.authenticate(i,n)}catch(a){throw this.logger.error(a.message),a}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||Wl.name,this.metadata=e?.metadata||r2(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Bc(Qu({level:e?.logger||Wl.logger}));this.core=e?.core||new lN(e),this.logger=Qr(t,this.name),this.session=new ON(this.core,this.logger),this.proposal=new PN(this.core,this.logger),this.pendingRequest=new CN(this.core,this.logger),this.engine=new DN(this),this.auth=new FN(this.core,this.logger)}static async init(e){const t=new ld(e);return await t.initialize(),t}get context(){return di(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const BN="PARSE_ERROR",LN="INVALID_REQUEST",qN="METHOD_NOT_FOUND",$N="INVALID_PARAMS",Nm="INTERNAL_ERROR",dd="SERVER_ERROR",UN=[-32700,-32600,-32601,-32602,-32603],gc={[BN]:{code:-32700,message:"Parse error"},[LN]:{code:-32600,message:"Invalid Request"},[qN]:{code:-32601,message:"Method not found"},[$N]:{code:-32602,message:"Invalid params"},[Nm]:{code:-32603,message:"Internal error"},[dd]:{code:-32e3,message:"Server error"}},Tm=dd;function zN(r){return UN.includes(r)}function Pv(r){return Object.keys(gc).includes(r)?gc[r]:gc[Tm]}function jN(r){const e=Object.values(gc).find(t=>t.code===r);return e||gc[Tm]}function kN(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}function HN(r,e,t){return{id:r,jsonrpc:"2.0",error:KN(e,t)}}function KN(r,e){return typeof r>"u"?Pv(Nm):(typeof r=="string"&&(r=Object.assign(Object.assign({},Pv(dd)),{message:r})),typeof e<"u"&&(r.data=e),zN(r.code)&&(r=jN(r.code)),r)}const VN="^https?:";function GN(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function WN(r,e){const t=GN(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function Ov(r){return WN(r,VN)}var JN=Object.defineProperty,YN=Object.defineProperties,QN=Object.getOwnPropertyDescriptors,Cv=Object.getOwnPropertySymbols,XN=Object.prototype.hasOwnProperty,ZN=Object.prototype.propertyIsEnumerable,Rv=(r,e,t)=>e in r?JN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Nv=(r,e)=>{for(var t in e||(e={}))XN.call(e,t)&&Rv(r,t,e[t]);if(Cv)for(var t of Cv(e))ZN.call(e,t)&&Rv(r,t,e[t]);return r},Tv=(r,e)=>YN(r,QN(e));const eT={Accept:"application/json","Content-Type":"application/json"},tT="POST",Fv={headers:eT,method:tT},Bv=10;class Jn{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Hi.EventEmitter,this.isAvailable=!1,this.registering=!1,!Ov(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=ms(e),i=await(await g1(this.url,Tv(Nv({},Fv),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!Ov(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,n)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),n(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=ms({id:1,jsonrpc:"2.0",method:"test",params:[]});await g1(e,Tv(Nv({},Fv),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?va(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),n=i.message||i.toString(),a=HN(e,n);this.events.emit("payload",a)}parseError(e,t=this.url){return kN(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Bv&&this.events.setMaxListeners(Bv)}}const Lv="error",rT="wss://relay.walletconnect.org",iT="wc",nT="universal_provider",qv=`${iT}@2:${nT}:`,Fm="https://rpc.walletconnect.org/v1/",Qa="generic",sT=`${Fm}bundler`,bn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O0={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",n=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",u="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",p=500,y="__lodash_placeholder__",_=1,O=2,D=4,C=1,H=2,W=1,Q=2,z=4,Y=8,q=16,j=32,V=64,A=128,F=256,ae=512,de=30,$="...",m=800,c=16,l=1,b=2,x=3,I=1/0,P=9007199254740991,S=17976931348623157e292,d=NaN,g=4294967295,N=g-1,Z=g>>>1,se=[["ary",A],["bind",W],["bindKey",Q],["curry",Y],["curryRight",q],["flip",ae],["partial",j],["partialRight",V],["rearg",F]],M="[object Arguments]",ee="[object Array]",B="[object AsyncFunction]",k="[object Boolean]",K="[object Date]",w="[object DOMException]",U="[object Error]",ne="[object Function]",ce="[object GeneratorFunction]",ue="[object Map]",ye="[object Number]",we="[object Null]",Re="[object Object]",Qe="[object Promise]",Pe="[object Proxy]",Ne="[object RegExp]",Ie="[object Set]",me="[object String]",Oe="[object Symbol]",Te="[object Undefined]",ve="[object WeakMap]",Ce="[object WeakSet]",Se="[object ArrayBuffer]",be="[object DataView]",qe="[object Float32Array]",Me="[object Float64Array]",_e="[object Int8Array]",He="[object Int16Array]",Ve="[object Int32Array]",Ee="[object Uint8Array]",Ke="[object Uint8ClampedArray]",ht="[object Uint16Array]",Ge="[object Uint32Array]",_t=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,Je=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Et=/&(?:amp|lt|gt|quot|#39);/g,It=/[&<>"']/g,Fe=RegExp(Et.source),Xe=RegExp(It.source),tt=/<%-([\s\S]+?)%>/g,Be=/<%([\s\S]+?)%>/g,et=/<%=([\s\S]+?)%>/g,Ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ue=/^\w*$/,ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,ze=RegExp(rt.source),it=/^\s+/,st=/\s/,Le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nt=/[()=,{}\[\]\/\s]/,Tt=/\\(\\)?/g,at=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bt=/\w*$/,Cr=/^[-+]0x[0-9a-f]+$/i,Rr=/^0b[01]+$/i,Nr=/^\[object .+?Constructor\]$/,Tr=/^0o[0-7]+$/i,Fr=/^(?:0|[1-9]\d*)$/,er=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xr=/($^)/,Gi=/['\n\r\u2028\u2029\\]/g,Zr="\\ud800-\\udfff",Wi="\\u0300-\\u036f",Ji="\\ufe20-\\ufe2f",ei="\\u20d0-\\u20ff",Si=Wi+Ji+ei,Ii="\\u2700-\\u27bf",lr="a-z\\xdf-\\xf6\\xf8-\\xff",Yi="\\xac\\xb1\\xd7\\xf7",Qi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xi="\\u2000-\\u206f",ks=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$c="A-Z\\xc0-\\xd6\\xd8-\\xde",Uc="\\ufe0e\\ufe0f",Hs=Yi+Qi+Xi+ks,Io="['’]",Ks="["+Zr+"]",Mo="["+Hs+"]",Vs="["+Si+"]",zc="\\d+",rh="["+Ii+"]",jc="["+lr+"]",kc="[^"+Zr+Hs+zc+Ii+lr+$c+"]",Da="\\ud83c[\\udffb-\\udfff]",ih="(?:"+Vs+"|"+Da+")",Hc="[^"+Zr+"]",Pa="(?:\\ud83c[\\udde6-\\uddff]){2}",ws="[\\ud800-\\udbff][\\udc00-\\udfff]",pi="["+$c+"]",Kc="\\u200d",Vc="(?:"+jc+"|"+kc+")",mn="(?:"+pi+"|"+kc+")",Gc="(?:"+Io+"(?:d|ll|m|re|s|t|ve))?",Wc="(?:"+Io+"(?:D|LL|M|RE|S|T|VE))?",Jc=ih+"?",Yc="["+Uc+"]?",nh="(?:"+Kc+"(?:"+[Hc,Pa,ws].join("|")+")"+Yc+Jc+")*",Yn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xc=Yc+Jc+nh,Oa="(?:"+[rh,Pa,ws].join("|")+")"+Xc,sh="(?:"+[Hc+Vs+"?",Vs,Pa,ws,Ks].join("|")+")",Do=RegExp(Io,"g"),ah=RegExp(Vs,"g"),Ca=RegExp(Da+"(?="+Da+")|"+sh+Xc,"g"),Zc=RegExp([pi+"?"+jc+"+"+Gc+"(?="+[Mo,pi,"$"].join("|")+")",mn+"+"+Wc+"(?="+[Mo,pi+Vc,"$"].join("|")+")",pi+"?"+Vc+"+"+Gc,pi+"+"+Wc,Qc,Yn,zc,Oa].join("|"),"g"),ef=RegExp("["+Kc+Zr+Si+Uc+"]"),Gs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oh=-1,zt={};zt[qe]=zt[Me]=zt[_e]=zt[He]=zt[Ve]=zt[Ee]=zt[Ke]=zt[ht]=zt[Ge]=!0,zt[M]=zt[ee]=zt[Se]=zt[k]=zt[be]=zt[K]=zt[U]=zt[ne]=zt[ue]=zt[ye]=zt[Re]=zt[Ne]=zt[Ie]=zt[me]=zt[ve]=!1;var Ut={};Ut[M]=Ut[ee]=Ut[Se]=Ut[be]=Ut[k]=Ut[K]=Ut[qe]=Ut[Me]=Ut[_e]=Ut[He]=Ut[Ve]=Ut[ue]=Ut[ye]=Ut[Re]=Ut[Ne]=Ut[Ie]=Ut[me]=Ut[Oe]=Ut[Ee]=Ut[Ke]=Ut[ht]=Ut[Ge]=!0,Ut[U]=Ut[ne]=Ut[ve]=!1;var G={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jt=parseFloat,pt=parseInt,Jt=typeof nc=="object"&&nc&&nc.Object===Object&&nc,ur=typeof self=="object"&&self&&self.Object===Object&&self,Ct=Jt||ur||Function("return this")(),kt=e&&!e.nodeType&&e,sr=kt&&!0&&r&&!r.nodeType&&r,ti=sr&&sr.exports===kt,hr=ti&&Jt.process,Yt=function(){try{var re=sr&&sr.require&&sr.require("util").types;return re||hr&&hr.binding&&hr.binding("util")}catch{}}(),zr=Yt&&Yt.isArrayBuffer,Zi=Yt&&Yt.isDate,Mi=Yt&&Yt.isMap,yn=Yt&&Yt.isRegExp,Po=Yt&&Yt.isSet,Ws=Yt&&Yt.isTypedArray;function br(re,fe,oe){switch(oe.length){case 0:return re.call(fe);case 1:return re.call(fe,oe[0]);case 2:return re.call(fe,oe[0],oe[1]);case 3:return re.call(fe,oe[0],oe[1],oe[2])}return re.apply(fe,oe)}function qm(re,fe,oe,ke){for(var dt=-1,Ft=re==null?0:re.length;++dt<Ft;){var dr=re[dt];fe(ke,dr,oe(dr),re)}return ke}function Di(re,fe){for(var oe=-1,ke=re==null?0:re.length;++oe<ke&&fe(re[oe],oe,re)!==!1;);return re}function $m(re,fe){for(var oe=re==null?0:re.length;oe--&&fe(re[oe],oe,re)!==!1;);return re}function vd(re,fe){for(var oe=-1,ke=re==null?0:re.length;++oe<ke;)if(!fe(re[oe],oe,re))return!1;return!0}function _s(re,fe){for(var oe=-1,ke=re==null?0:re.length,dt=0,Ft=[];++oe<ke;){var dr=re[oe];fe(dr,oe,re)&&(Ft[dt++]=dr)}return Ft}function rf(re,fe){var oe=re==null?0:re.length;return!!oe&&Ra(re,fe,0)>-1}function ch(re,fe,oe){for(var ke=-1,dt=re==null?0:re.length;++ke<dt;)if(oe(fe,re[ke]))return!0;return!1}function Xt(re,fe){for(var oe=-1,ke=re==null?0:re.length,dt=Array(ke);++oe<ke;)dt[oe]=fe(re[oe],oe,re);return dt}function As(re,fe){for(var oe=-1,ke=fe.length,dt=re.length;++oe<ke;)re[dt+oe]=fe[oe];return re}function fh(re,fe,oe,ke){var dt=-1,Ft=re==null?0:re.length;for(ke&&Ft&&(oe=re[++dt]);++dt<Ft;)oe=fe(oe,re[dt],dt,re);return oe}function Um(re,fe,oe,ke){var dt=re==null?0:re.length;for(ke&&dt&&(oe=re[--dt]);dt--;)oe=fe(oe,re[dt],dt,re);return oe}function uh(re,fe){for(var oe=-1,ke=re==null?0:re.length;++oe<ke;)if(fe(re[oe],oe,re))return!0;return!1}var zm=hh("length");function jm(re){return re.split("")}function km(re){return re.match(je)||[]}function bd(re,fe,oe){var ke;return oe(re,function(dt,Ft,dr){if(fe(dt,Ft,dr))return ke=Ft,!1}),ke}function nf(re,fe,oe,ke){for(var dt=re.length,Ft=oe+(ke?1:-1);ke?Ft--:++Ft<dt;)if(fe(re[Ft],Ft,re))return Ft;return-1}function Ra(re,fe,oe){return fe===fe?t3(re,fe,oe):nf(re,md,oe)}function Hm(re,fe,oe,ke){for(var dt=oe-1,Ft=re.length;++dt<Ft;)if(ke(re[dt],fe))return dt;return-1}function md(re){return re!==re}function yd(re,fe){var oe=re==null?0:re.length;return oe?dh(re,fe)/oe:d}function hh(re){return function(fe){return fe==null?t:fe[re]}}function lh(re){return function(fe){return re==null?t:re[fe]}}function wd(re,fe,oe,ke,dt){return dt(re,function(Ft,dr,Ht){oe=ke?(ke=!1,Ft):fe(oe,Ft,dr,Ht)}),oe}function Km(re,fe){var oe=re.length;for(re.sort(fe);oe--;)re[oe]=re[oe].value;return re}function dh(re,fe){for(var oe,ke=-1,dt=re.length;++ke<dt;){var Ft=fe(re[ke]);Ft!==t&&(oe=oe===t?Ft:oe+Ft)}return oe}function ph(re,fe){for(var oe=-1,ke=Array(re);++oe<re;)ke[oe]=fe(oe);return ke}function Vm(re,fe){return Xt(fe,function(oe){return[oe,re[oe]]})}function _d(re){return re&&re.slice(0,Sd(re)+1).replace(it,"")}function gi(re){return function(fe){return re(fe)}}function gh(re,fe){return Xt(fe,function(oe){return re[oe]})}function Oo(re,fe){return re.has(fe)}function Ad(re,fe){for(var oe=-1,ke=re.length;++oe<ke&&Ra(fe,re[oe],0)>-1;);return oe}function Ed(re,fe){for(var oe=re.length;oe--&&Ra(fe,re[oe],0)>-1;);return oe}function Gm(re,fe){for(var oe=re.length,ke=0;oe--;)re[oe]===fe&&++ke;return ke}var Wm=lh(G),Jm=lh(te);function Ym(re){return"\\"+$e[re]}function Qm(re,fe){return re==null?t:re[fe]}function Na(re){return ef.test(re)}function Xm(re){return Gs.test(re)}function Zm(re){for(var fe,oe=[];!(fe=re.next()).done;)oe.push(fe.value);return oe}function vh(re){var fe=-1,oe=Array(re.size);return re.forEach(function(ke,dt){oe[++fe]=[dt,ke]}),oe}function xd(re,fe){return function(oe){return re(fe(oe))}}function Es(re,fe){for(var oe=-1,ke=re.length,dt=0,Ft=[];++oe<ke;){var dr=re[oe];(dr===fe||dr===y)&&(re[oe]=y,Ft[dt++]=oe)}return Ft}function sf(re){var fe=-1,oe=Array(re.size);return re.forEach(function(ke){oe[++fe]=ke}),oe}function e3(re){var fe=-1,oe=Array(re.size);return re.forEach(function(ke){oe[++fe]=[ke,ke]}),oe}function t3(re,fe,oe){for(var ke=oe-1,dt=re.length;++ke<dt;)if(re[ke]===fe)return ke;return-1}function r3(re,fe,oe){for(var ke=oe+1;ke--;)if(re[ke]===fe)return ke;return ke}function Ta(re){return Na(re)?n3(re):zm(re)}function en(re){return Na(re)?s3(re):jm(re)}function Sd(re){for(var fe=re.length;fe--&&st.test(re.charAt(fe)););return fe}var i3=lh(pe);function n3(re){for(var fe=Ca.lastIndex=0;Ca.test(re);)++fe;return fe}function s3(re){return re.match(Ca)||[]}function a3(re){return re.match(Zc)||[]}var o3=function re(fe){fe=fe==null?Ct:Fa.defaults(Ct.Object(),fe,Fa.pick(Ct,tf));var oe=fe.Array,ke=fe.Date,dt=fe.Error,Ft=fe.Function,dr=fe.Math,Ht=fe.Object,bh=fe.RegExp,c3=fe.String,Pi=fe.TypeError,af=oe.prototype,f3=Ft.prototype,Ba=Ht.prototype,of=fe["__core-js_shared__"],cf=f3.toString,qt=Ba.hasOwnProperty,u3=0,Id=function(){var s=/[^.]+$/.exec(of&&of.keys&&of.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),ff=Ba.toString,h3=cf.call(Ht),l3=Ct._,d3=bh("^"+cf.call(qt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uf=ti?fe.Buffer:t,xs=fe.Symbol,hf=fe.Uint8Array,Md=uf?uf.allocUnsafe:t,lf=xd(Ht.getPrototypeOf,Ht),Dd=Ht.create,Pd=Ba.propertyIsEnumerable,df=af.splice,Od=xs?xs.isConcatSpreadable:t,Co=xs?xs.iterator:t,Js=xs?xs.toStringTag:t,pf=function(){try{var s=ea(Ht,"defineProperty");return s({},"",{}),s}catch{}}(),p3=fe.clearTimeout!==Ct.clearTimeout&&fe.clearTimeout,g3=ke&&ke.now!==Ct.Date.now&&ke.now,v3=fe.setTimeout!==Ct.setTimeout&&fe.setTimeout,gf=dr.ceil,vf=dr.floor,mh=Ht.getOwnPropertySymbols,b3=uf?uf.isBuffer:t,Cd=fe.isFinite,m3=af.join,y3=xd(Ht.keys,Ht),pr=dr.max,Br=dr.min,w3=ke.now,_3=fe.parseInt,Rd=dr.random,A3=af.reverse,yh=ea(fe,"DataView"),Ro=ea(fe,"Map"),wh=ea(fe,"Promise"),La=ea(fe,"Set"),No=ea(fe,"WeakMap"),To=ea(Ht,"create"),bf=No&&new No,qa={},E3=ta(yh),x3=ta(Ro),S3=ta(wh),I3=ta(La),M3=ta(No),mf=xs?xs.prototype:t,Fo=mf?mf.valueOf:t,Nd=mf?mf.toString:t;function T(s){if(tr(s)&&!gt(s)&&!(s instanceof Mt)){if(s instanceof Oi)return s;if(qt.call(s,"__wrapped__"))return Tp(s)}return new Oi(s)}var $a=function(){function s(){}return function(o){if(!Zt(o))return{};if(Dd)return Dd(o);s.prototype=o;var h=new s;return s.prototype=t,h}}();function yf(){}function Oi(s,o){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}T.templateSettings={escape:tt,evaluate:Be,interpolate:et,variable:"",imports:{_:T}},T.prototype=yf.prototype,T.prototype.constructor=T,Oi.prototype=$a(yf.prototype),Oi.prototype.constructor=Oi;function Mt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function D3(){var s=new Mt(this.__wrapped__);return s.__actions__=ri(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=ri(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=ri(this.__views__),s}function P3(){if(this.__filtered__){var s=new Mt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function O3(){var s=this.__wrapped__.value(),o=this.__dir__,h=gt(s),E=o<0,R=h?s.length:0,L=j6(0,R,this.__views__),J=L.start,X=L.end,ie=X-J,he=E?X:J-1,le=this.__iteratees__,ge=le.length,De=0,We=Br(ie,this.__takeCount__);if(!h||!E&&R==ie&&We==ie)return ip(s,this.__actions__);var ot=[];e:for(;ie--&&De<We;){he+=o;for(var wt=-1,ct=s[he];++wt<ge;){var xt=le[wt],Rt=xt.iteratee,mi=xt.type,Hr=Rt(ct);if(mi==b)ct=Hr;else if(!Hr){if(mi==l)continue e;break e}}ot[De++]=ct}return ot}Mt.prototype=$a(yf.prototype),Mt.prototype.constructor=Mt;function Ys(s){var o=-1,h=s==null?0:s.length;for(this.clear();++o<h;){var E=s[o];this.set(E[0],E[1])}}function C3(){this.__data__=To?To(null):{},this.size=0}function R3(s){var o=this.has(s)&&delete this.__data__[s];return this.size-=o?1:0,o}function N3(s){var o=this.__data__;if(To){var h=o[s];return h===v?t:h}return qt.call(o,s)?o[s]:t}function T3(s){var o=this.__data__;return To?o[s]!==t:qt.call(o,s)}function F3(s,o){var h=this.__data__;return this.size+=this.has(s)?0:1,h[s]=To&&o===t?v:o,this}Ys.prototype.clear=C3,Ys.prototype.delete=R3,Ys.prototype.get=N3,Ys.prototype.has=T3,Ys.prototype.set=F3;function Qn(s){var o=-1,h=s==null?0:s.length;for(this.clear();++o<h;){var E=s[o];this.set(E[0],E[1])}}function B3(){this.__data__=[],this.size=0}function L3(s){var o=this.__data__,h=wf(o,s);if(h<0)return!1;var E=o.length-1;return h==E?o.pop():df.call(o,h,1),--this.size,!0}function q3(s){var o=this.__data__,h=wf(o,s);return h<0?t:o[h][1]}function $3(s){return wf(this.__data__,s)>-1}function U3(s,o){var h=this.__data__,E=wf(h,s);return E<0?(++this.size,h.push([s,o])):h[E][1]=o,this}Qn.prototype.clear=B3,Qn.prototype.delete=L3,Qn.prototype.get=q3,Qn.prototype.has=$3,Qn.prototype.set=U3;function Xn(s){var o=-1,h=s==null?0:s.length;for(this.clear();++o<h;){var E=s[o];this.set(E[0],E[1])}}function z3(){this.size=0,this.__data__={hash:new Ys,map:new(Ro||Qn),string:new Ys}}function j3(s){var o=Rf(this,s).delete(s);return this.size-=o?1:0,o}function k3(s){return Rf(this,s).get(s)}function H3(s){return Rf(this,s).has(s)}function K3(s,o){var h=Rf(this,s),E=h.size;return h.set(s,o),this.size+=h.size==E?0:1,this}Xn.prototype.clear=z3,Xn.prototype.delete=j3,Xn.prototype.get=k3,Xn.prototype.has=H3,Xn.prototype.set=K3;function Qs(s){var o=-1,h=s==null?0:s.length;for(this.__data__=new Xn;++o<h;)this.add(s[o])}function V3(s){return this.__data__.set(s,v),this}function G3(s){return this.__data__.has(s)}Qs.prototype.add=Qs.prototype.push=V3,Qs.prototype.has=G3;function tn(s){var o=this.__data__=new Qn(s);this.size=o.size}function W3(){this.__data__=new Qn,this.size=0}function J3(s){var o=this.__data__,h=o.delete(s);return this.size=o.size,h}function Y3(s){return this.__data__.get(s)}function Q3(s){return this.__data__.has(s)}function X3(s,o){var h=this.__data__;if(h instanceof Qn){var E=h.__data__;if(!Ro||E.length<n-1)return E.push([s,o]),this.size=++h.size,this;h=this.__data__=new Xn(E)}return h.set(s,o),this.size=h.size,this}tn.prototype.clear=W3,tn.prototype.delete=J3,tn.prototype.get=Y3,tn.prototype.has=Q3,tn.prototype.set=X3;function Td(s,o){var h=gt(s),E=!h&&ra(s),R=!h&&!E&&Ps(s),L=!h&&!E&&!R&&ka(s),J=h||E||R||L,X=J?ph(s.length,c3):[],ie=X.length;for(var he in s)(o||qt.call(s,he))&&!(J&&(he=="length"||R&&(he=="offset"||he=="parent")||L&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||rs(he,ie)))&&X.push(he);return X}function Fd(s){var o=s.length;return o?s[Ch(0,o-1)]:t}function Z3(s,o){return Nf(ri(s),Xs(o,0,s.length))}function e6(s){return Nf(ri(s))}function _h(s,o,h){(h!==t&&!rn(s[o],h)||h===t&&!(o in s))&&Zn(s,o,h)}function Bo(s,o,h){var E=s[o];(!(qt.call(s,o)&&rn(E,h))||h===t&&!(o in s))&&Zn(s,o,h)}function wf(s,o){for(var h=s.length;h--;)if(rn(s[h][0],o))return h;return-1}function t6(s,o,h,E){return Ss(s,function(R,L,J){o(E,R,h(R),J)}),E}function Bd(s,o){return s&&_n(o,mr(o),s)}function r6(s,o){return s&&_n(o,ni(o),s)}function Zn(s,o,h){o=="__proto__"&&pf?pf(s,o,{configurable:!0,enumerable:!0,value:h,writable:!0}):s[o]=h}function Ah(s,o){for(var h=-1,E=o.length,R=oe(E),L=s==null;++h<E;)R[h]=L?t:rl(s,o[h]);return R}function Xs(s,o,h){return s===s&&(h!==t&&(s=s<=h?s:h),o!==t&&(s=s>=o?s:o)),s}function Ci(s,o,h,E,R,L){var J,X=o&_,ie=o&O,he=o&D;if(h&&(J=R?h(s,E,R,L):h(s)),J!==t)return J;if(!Zt(s))return s;var le=gt(s);if(le){if(J=H6(s),!X)return ri(s,J)}else{var ge=Lr(s),De=ge==ne||ge==ce;if(Ps(s))return ap(s,X);if(ge==Re||ge==M||De&&!R){if(J=ie||De?{}:Sp(s),!X)return ie?N6(s,r6(J,s)):R6(s,Bd(J,s))}else{if(!Ut[ge])return R?s:{};J=K6(s,ge,X)}}L||(L=new tn);var We=L.get(s);if(We)return We;L.set(s,J),e1(s)?s.forEach(function(ct){J.add(Ci(ct,o,h,ct,s,L))}):Xp(s)&&s.forEach(function(ct,xt){J.set(xt,Ci(ct,o,h,xt,s,L))});var ot=he?ie?jh:zh:ie?ni:mr,wt=le?t:ot(s);return Di(wt||s,function(ct,xt){wt&&(xt=ct,ct=s[xt]),Bo(J,xt,Ci(ct,o,h,xt,s,L))}),J}function i6(s){var o=mr(s);return function(h){return Ld(h,s,o)}}function Ld(s,o,h){var E=h.length;if(s==null)return!E;for(s=Ht(s);E--;){var R=h[E],L=o[R],J=s[R];if(J===t&&!(R in s)||!L(J))return!1}return!0}function qd(s,o,h){if(typeof s!="function")throw new Pi(f);return ko(function(){s.apply(t,h)},o)}function Lo(s,o,h,E){var R=-1,L=rf,J=!0,X=s.length,ie=[],he=o.length;if(!X)return ie;h&&(o=Xt(o,gi(h))),E?(L=ch,J=!1):o.length>=n&&(L=Oo,J=!1,o=new Qs(o));e:for(;++R<X;){var le=s[R],ge=h==null?le:h(le);if(le=E||le!==0?le:0,J&&ge===ge){for(var De=he;De--;)if(o[De]===ge)continue e;ie.push(le)}else L(o,ge,E)||ie.push(le)}return ie}var Ss=hp(wn),$d=hp(xh,!0);function n6(s,o){var h=!0;return Ss(s,function(E,R,L){return h=!!o(E,R,L),h}),h}function _f(s,o,h){for(var E=-1,R=s.length;++E<R;){var L=s[E],J=o(L);if(J!=null&&(X===t?J===J&&!bi(J):h(J,X)))var X=J,ie=L}return ie}function s6(s,o,h,E){var R=s.length;for(h=yt(h),h<0&&(h=-h>R?0:R+h),E=E===t||E>R?R:yt(E),E<0&&(E+=R),E=h>E?0:r1(E);h<E;)s[h++]=o;return s}function Ud(s,o){var h=[];return Ss(s,function(E,R,L){o(E,R,L)&&h.push(E)}),h}function Sr(s,o,h,E,R){var L=-1,J=s.length;for(h||(h=G6),R||(R=[]);++L<J;){var X=s[L];o>0&&h(X)?o>1?Sr(X,o-1,h,E,R):As(R,X):E||(R[R.length]=X)}return R}var Eh=lp(),zd=lp(!0);function wn(s,o){return s&&Eh(s,o,mr)}function xh(s,o){return s&&zd(s,o,mr)}function Af(s,o){return _s(o,function(h){return is(s[h])})}function Zs(s,o){o=Ms(o,s);for(var h=0,E=o.length;s!=null&&h<E;)s=s[An(o[h++])];return h&&h==E?s:t}function jd(s,o,h){var E=o(s);return gt(s)?E:As(E,h(s))}function jr(s){return s==null?s===t?Te:we:Js&&Js in Ht(s)?z6(s):ey(s)}function Sh(s,o){return s>o}function a6(s,o){return s!=null&&qt.call(s,o)}function o6(s,o){return s!=null&&o in Ht(s)}function c6(s,o,h){return s>=Br(o,h)&&s<pr(o,h)}function Ih(s,o,h){for(var E=h?ch:rf,R=s[0].length,L=s.length,J=L,X=oe(L),ie=1/0,he=[];J--;){var le=s[J];J&&o&&(le=Xt(le,gi(o))),ie=Br(le.length,ie),X[J]=!h&&(o||R>=120&&le.length>=120)?new Qs(J&&le):t}le=s[0];var ge=-1,De=X[0];e:for(;++ge<R&&he.length<ie;){var We=le[ge],ot=o?o(We):We;if(We=h||We!==0?We:0,!(De?Oo(De,ot):E(he,ot,h))){for(J=L;--J;){var wt=X[J];if(!(wt?Oo(wt,ot):E(s[J],ot,h)))continue e}De&&De.push(ot),he.push(We)}}return he}function f6(s,o,h,E){return wn(s,function(R,L,J){o(E,h(R),L,J)}),E}function qo(s,o,h){o=Ms(o,s),s=Pp(s,o);var E=s==null?s:s[An(Ni(o))];return E==null?t:br(E,s,h)}function kd(s){return tr(s)&&jr(s)==M}function u6(s){return tr(s)&&jr(s)==Se}function h6(s){return tr(s)&&jr(s)==K}function $o(s,o,h,E,R){return s===o?!0:s==null||o==null||!tr(s)&&!tr(o)?s!==s&&o!==o:l6(s,o,h,E,$o,R)}function l6(s,o,h,E,R,L){var J=gt(s),X=gt(o),ie=J?ee:Lr(s),he=X?ee:Lr(o);ie=ie==M?Re:ie,he=he==M?Re:he;var le=ie==Re,ge=he==Re,De=ie==he;if(De&&Ps(s)){if(!Ps(o))return!1;J=!0,le=!1}if(De&&!le)return L||(L=new tn),J||ka(s)?Ap(s,o,h,E,R,L):$6(s,o,ie,h,E,R,L);if(!(h&C)){var We=le&&qt.call(s,"__wrapped__"),ot=ge&&qt.call(o,"__wrapped__");if(We||ot){var wt=We?s.value():s,ct=ot?o.value():o;return L||(L=new tn),R(wt,ct,h,E,L)}}return De?(L||(L=new tn),U6(s,o,h,E,R,L)):!1}function d6(s){return tr(s)&&Lr(s)==ue}function Mh(s,o,h,E){var R=h.length,L=R,J=!E;if(s==null)return!L;for(s=Ht(s);R--;){var X=h[R];if(J&&X[2]?X[1]!==s[X[0]]:!(X[0]in s))return!1}for(;++R<L;){X=h[R];var ie=X[0],he=s[ie],le=X[1];if(J&&X[2]){if(he===t&&!(ie in s))return!1}else{var ge=new tn;if(E)var De=E(he,le,ie,s,o,ge);if(!(De===t?$o(le,he,C|H,E,ge):De))return!1}}return!0}function Hd(s){if(!Zt(s)||J6(s))return!1;var o=is(s)?d3:Nr;return o.test(ta(s))}function p6(s){return tr(s)&&jr(s)==Ne}function g6(s){return tr(s)&&Lr(s)==Ie}function v6(s){return tr(s)&&$f(s.length)&&!!zt[jr(s)]}function Kd(s){return typeof s=="function"?s:s==null?si:typeof s=="object"?gt(s)?Wd(s[0],s[1]):Gd(s):d1(s)}function Dh(s){if(!jo(s))return y3(s);var o=[];for(var h in Ht(s))qt.call(s,h)&&h!="constructor"&&o.push(h);return o}function b6(s){if(!Zt(s))return Z6(s);var o=jo(s),h=[];for(var E in s)E=="constructor"&&(o||!qt.call(s,E))||h.push(E);return h}function Ph(s,o){return s<o}function Vd(s,o){var h=-1,E=ii(s)?oe(s.length):[];return Ss(s,function(R,L,J){E[++h]=o(R,L,J)}),E}function Gd(s){var o=Hh(s);return o.length==1&&o[0][2]?Mp(o[0][0],o[0][1]):function(h){return h===s||Mh(h,s,o)}}function Wd(s,o){return Vh(s)&&Ip(o)?Mp(An(s),o):function(h){var E=rl(h,s);return E===t&&E===o?il(h,s):$o(o,E,C|H)}}function Ef(s,o,h,E,R){s!==o&&Eh(o,function(L,J){if(R||(R=new tn),Zt(L))m6(s,o,J,h,Ef,E,R);else{var X=E?E(Wh(s,J),L,J+"",s,o,R):t;X===t&&(X=L),_h(s,J,X)}},ni)}function m6(s,o,h,E,R,L,J){var X=Wh(s,h),ie=Wh(o,h),he=J.get(ie);if(he){_h(s,h,he);return}var le=L?L(X,ie,h+"",s,o,J):t,ge=le===t;if(ge){var De=gt(ie),We=!De&&Ps(ie),ot=!De&&!We&&ka(ie);le=ie,De||We||ot?gt(X)?le=X:ar(X)?le=ri(X):We?(ge=!1,le=ap(ie,!0)):ot?(ge=!1,le=op(ie,!0)):le=[]:Ho(ie)||ra(ie)?(le=X,ra(X)?le=i1(X):(!Zt(X)||is(X))&&(le=Sp(ie))):ge=!1}ge&&(J.set(ie,le),R(le,ie,E,L,J),J.delete(ie)),_h(s,h,le)}function Jd(s,o){var h=s.length;if(h)return o+=o<0?h:0,rs(o,h)?s[o]:t}function Yd(s,o,h){o.length?o=Xt(o,function(L){return gt(L)?function(J){return Zs(J,L.length===1?L[0]:L)}:L}):o=[si];var E=-1;o=Xt(o,gi(nt()));var R=Vd(s,function(L,J,X){var ie=Xt(o,function(he){return he(L)});return{criteria:ie,index:++E,value:L}});return Km(R,function(L,J){return C6(L,J,h)})}function y6(s,o){return Qd(s,o,function(h,E){return il(s,E)})}function Qd(s,o,h){for(var E=-1,R=o.length,L={};++E<R;){var J=o[E],X=Zs(s,J);h(X,J)&&Uo(L,Ms(J,s),X)}return L}function w6(s){return function(o){return Zs(o,s)}}function Oh(s,o,h,E){var R=E?Hm:Ra,L=-1,J=o.length,X=s;for(s===o&&(o=ri(o)),h&&(X=Xt(s,gi(h)));++L<J;)for(var ie=0,he=o[L],le=h?h(he):he;(ie=R(X,le,ie,E))>-1;)X!==s&&df.call(X,ie,1),df.call(s,ie,1);return s}function Xd(s,o){for(var h=s?o.length:0,E=h-1;h--;){var R=o[h];if(h==E||R!==L){var L=R;rs(R)?df.call(s,R,1):Th(s,R)}}return s}function Ch(s,o){return s+vf(Rd()*(o-s+1))}function _6(s,o,h,E){for(var R=-1,L=pr(gf((o-s)/(h||1)),0),J=oe(L);L--;)J[E?L:++R]=s,s+=h;return J}function Rh(s,o){var h="";if(!s||o<1||o>P)return h;do o%2&&(h+=s),o=vf(o/2),o&&(s+=s);while(o);return h}function At(s,o){return Jh(Dp(s,o,si),s+"")}function A6(s){return Fd(Ha(s))}function E6(s,o){var h=Ha(s);return Nf(h,Xs(o,0,h.length))}function Uo(s,o,h,E){if(!Zt(s))return s;o=Ms(o,s);for(var R=-1,L=o.length,J=L-1,X=s;X!=null&&++R<L;){var ie=An(o[R]),he=h;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return s;if(R!=J){var le=X[ie];he=E?E(le,ie,X):t,he===t&&(he=Zt(le)?le:rs(o[R+1])?[]:{})}Bo(X,ie,he),X=X[ie]}return s}var Zd=bf?function(s,o){return bf.set(s,o),s}:si,x6=pf?function(s,o){return pf(s,"toString",{configurable:!0,enumerable:!1,value:sl(o),writable:!0})}:si;function S6(s){return Nf(Ha(s))}function Ri(s,o,h){var E=-1,R=s.length;o<0&&(o=-o>R?0:R+o),h=h>R?R:h,h<0&&(h+=R),R=o>h?0:h-o>>>0,o>>>=0;for(var L=oe(R);++E<R;)L[E]=s[E+o];return L}function I6(s,o){var h;return Ss(s,function(E,R,L){return h=o(E,R,L),!h}),!!h}function xf(s,o,h){var E=0,R=s==null?E:s.length;if(typeof o=="number"&&o===o&&R<=Z){for(;E<R;){var L=E+R>>>1,J=s[L];J!==null&&!bi(J)&&(h?J<=o:J<o)?E=L+1:R=L}return R}return Nh(s,o,si,h)}function Nh(s,o,h,E){var R=0,L=s==null?0:s.length;if(L===0)return 0;o=h(o);for(var J=o!==o,X=o===null,ie=bi(o),he=o===t;R<L;){var le=vf((R+L)/2),ge=h(s[le]),De=ge!==t,We=ge===null,ot=ge===ge,wt=bi(ge);if(J)var ct=E||ot;else he?ct=ot&&(E||De):X?ct=ot&&De&&(E||!We):ie?ct=ot&&De&&!We&&(E||!wt):We||wt?ct=!1:ct=E?ge<=o:ge<o;ct?R=le+1:L=le}return Br(L,N)}function ep(s,o){for(var h=-1,E=s.length,R=0,L=[];++h<E;){var J=s[h],X=o?o(J):J;if(!h||!rn(X,ie)){var ie=X;L[R++]=J===0?0:J}}return L}function tp(s){return typeof s=="number"?s:bi(s)?d:+s}function vi(s){if(typeof s=="string")return s;if(gt(s))return Xt(s,vi)+"";if(bi(s))return Nd?Nd.call(s):"";var o=s+"";return o=="0"&&1/s==-I?"-0":o}function Is(s,o,h){var E=-1,R=rf,L=s.length,J=!0,X=[],ie=X;if(h)J=!1,R=ch;else if(L>=n){var he=o?null:L6(s);if(he)return sf(he);J=!1,R=Oo,ie=new Qs}else ie=o?[]:X;e:for(;++E<L;){var le=s[E],ge=o?o(le):le;if(le=h||le!==0?le:0,J&&ge===ge){for(var De=ie.length;De--;)if(ie[De]===ge)continue e;o&&ie.push(ge),X.push(le)}else R(ie,ge,h)||(ie!==X&&ie.push(ge),X.push(le))}return X}function Th(s,o){return o=Ms(o,s),s=Pp(s,o),s==null||delete s[An(Ni(o))]}function rp(s,o,h,E){return Uo(s,o,h(Zs(s,o)),E)}function Sf(s,o,h,E){for(var R=s.length,L=E?R:-1;(E?L--:++L<R)&&o(s[L],L,s););return h?Ri(s,E?0:L,E?L+1:R):Ri(s,E?L+1:0,E?R:L)}function ip(s,o){var h=s;return h instanceof Mt&&(h=h.value()),fh(o,function(E,R){return R.func.apply(R.thisArg,As([E],R.args))},h)}function Fh(s,o,h){var E=s.length;if(E<2)return E?Is(s[0]):[];for(var R=-1,L=oe(E);++R<E;)for(var J=s[R],X=-1;++X<E;)X!=R&&(L[R]=Lo(L[R]||J,s[X],o,h));return Is(Sr(L,1),o,h)}function np(s,o,h){for(var E=-1,R=s.length,L=o.length,J={};++E<R;){var X=E<L?o[E]:t;h(J,s[E],X)}return J}function Bh(s){return ar(s)?s:[]}function Lh(s){return typeof s=="function"?s:si}function Ms(s,o){return gt(s)?s:Vh(s,o)?[s]:Np(Bt(s))}var M6=At;function Ds(s,o,h){var E=s.length;return h=h===t?E:h,!o&&h>=E?s:Ri(s,o,h)}var sp=p3||function(s){return Ct.clearTimeout(s)};function ap(s,o){if(o)return s.slice();var h=s.length,E=Md?Md(h):new s.constructor(h);return s.copy(E),E}function qh(s){var o=new s.constructor(s.byteLength);return new hf(o).set(new hf(s)),o}function D6(s,o){var h=o?qh(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.byteLength)}function P6(s){var o=new s.constructor(s.source,bt.exec(s));return o.lastIndex=s.lastIndex,o}function O6(s){return Fo?Ht(Fo.call(s)):{}}function op(s,o){var h=o?qh(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.length)}function cp(s,o){if(s!==o){var h=s!==t,E=s===null,R=s===s,L=bi(s),J=o!==t,X=o===null,ie=o===o,he=bi(o);if(!X&&!he&&!L&&s>o||L&&J&&ie&&!X&&!he||E&&J&&ie||!h&&ie||!R)return 1;if(!E&&!L&&!he&&s<o||he&&h&&R&&!E&&!L||X&&h&&R||!J&&R||!ie)return-1}return 0}function C6(s,o,h){for(var E=-1,R=s.criteria,L=o.criteria,J=R.length,X=h.length;++E<J;){var ie=cp(R[E],L[E]);if(ie){if(E>=X)return ie;var he=h[E];return ie*(he=="desc"?-1:1)}}return s.index-o.index}function fp(s,o,h,E){for(var R=-1,L=s.length,J=h.length,X=-1,ie=o.length,he=pr(L-J,0),le=oe(ie+he),ge=!E;++X<ie;)le[X]=o[X];for(;++R<J;)(ge||R<L)&&(le[h[R]]=s[R]);for(;he--;)le[X++]=s[R++];return le}function up(s,o,h,E){for(var R=-1,L=s.length,J=-1,X=h.length,ie=-1,he=o.length,le=pr(L-X,0),ge=oe(le+he),De=!E;++R<le;)ge[R]=s[R];for(var We=R;++ie<he;)ge[We+ie]=o[ie];for(;++J<X;)(De||R<L)&&(ge[We+h[J]]=s[R++]);return ge}function ri(s,o){var h=-1,E=s.length;for(o||(o=oe(E));++h<E;)o[h]=s[h];return o}function _n(s,o,h,E){var R=!h;h||(h={});for(var L=-1,J=o.length;++L<J;){var X=o[L],ie=E?E(h[X],s[X],X,h,s):t;ie===t&&(ie=s[X]),R?Zn(h,X,ie):Bo(h,X,ie)}return h}function R6(s,o){return _n(s,Kh(s),o)}function N6(s,o){return _n(s,Ep(s),o)}function If(s,o){return function(h,E){var R=gt(h)?qm:t6,L=o?o():{};return R(h,s,nt(E,2),L)}}function Ua(s){return At(function(o,h){var E=-1,R=h.length,L=R>1?h[R-1]:t,J=R>2?h[2]:t;for(L=s.length>3&&typeof L=="function"?(R--,L):t,J&&kr(h[0],h[1],J)&&(L=R<3?t:L,R=1),o=Ht(o);++E<R;){var X=h[E];X&&s(o,X,E,L)}return o})}function hp(s,o){return function(h,E){if(h==null)return h;if(!ii(h))return s(h,E);for(var R=h.length,L=o?R:-1,J=Ht(h);(o?L--:++L<R)&&E(J[L],L,J)!==!1;);return h}}function lp(s){return function(o,h,E){for(var R=-1,L=Ht(o),J=E(o),X=J.length;X--;){var ie=J[s?X:++R];if(h(L[ie],ie,L)===!1)break}return o}}function T6(s,o,h){var E=o&W,R=zo(s);function L(){var J=this&&this!==Ct&&this instanceof L?R:s;return J.apply(E?h:this,arguments)}return L}function dp(s){return function(o){o=Bt(o);var h=Na(o)?en(o):t,E=h?h[0]:o.charAt(0),R=h?Ds(h,1).join(""):o.slice(1);return E[s]()+R}}function za(s){return function(o){return fh(h1(u1(o).replace(Do,"")),s,"")}}function zo(s){return function(){var o=arguments;switch(o.length){case 0:return new s;case 1:return new s(o[0]);case 2:return new s(o[0],o[1]);case 3:return new s(o[0],o[1],o[2]);case 4:return new s(o[0],o[1],o[2],o[3]);case 5:return new s(o[0],o[1],o[2],o[3],o[4]);case 6:return new s(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new s(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var h=$a(s.prototype),E=s.apply(h,o);return Zt(E)?E:h}}function F6(s,o,h){var E=zo(s);function R(){for(var L=arguments.length,J=oe(L),X=L,ie=ja(R);X--;)J[X]=arguments[X];var he=L<3&&J[0]!==ie&&J[L-1]!==ie?[]:Es(J,ie);if(L-=he.length,L<h)return mp(s,o,Mf,R.placeholder,t,J,he,t,t,h-L);var le=this&&this!==Ct&&this instanceof R?E:s;return br(le,this,J)}return R}function pp(s){return function(o,h,E){var R=Ht(o);if(!ii(o)){var L=nt(h,3);o=mr(o),h=function(X){return L(R[X],X,R)}}var J=s(o,h,E);return J>-1?R[L?o[J]:J]:t}}function gp(s){return ts(function(o){var h=o.length,E=h,R=Oi.prototype.thru;for(s&&o.reverse();E--;){var L=o[E];if(typeof L!="function")throw new Pi(f);if(R&&!J&&Cf(L)=="wrapper")var J=new Oi([],!0)}for(E=J?E:h;++E<h;){L=o[E];var X=Cf(L),ie=X=="wrapper"?kh(L):t;ie&&Gh(ie[0])&&ie[1]==(A|Y|j|F)&&!ie[4].length&&ie[9]==1?J=J[Cf(ie[0])].apply(J,ie[3]):J=L.length==1&&Gh(L)?J[X]():J.thru(L)}return function(){var he=arguments,le=he[0];if(J&&he.length==1&&gt(le))return J.plant(le).value();for(var ge=0,De=h?o[ge].apply(this,he):le;++ge<h;)De=o[ge].call(this,De);return De}})}function Mf(s,o,h,E,R,L,J,X,ie,he){var le=o&A,ge=o&W,De=o&Q,We=o&(Y|q),ot=o&ae,wt=De?t:zo(s);function ct(){for(var xt=arguments.length,Rt=oe(xt),mi=xt;mi--;)Rt[mi]=arguments[mi];if(We)var Hr=ja(ct),yi=Gm(Rt,Hr);if(E&&(Rt=fp(Rt,E,R,We)),L&&(Rt=up(Rt,L,J,We)),xt-=yi,We&&xt<he){var or=Es(Rt,Hr);return mp(s,o,Mf,ct.placeholder,h,Rt,or,X,ie,he-xt)}var nn=ge?h:this,ss=De?nn[s]:s;return xt=Rt.length,X?Rt=ty(Rt,X):ot&&xt>1&&Rt.reverse(),le&&ie<xt&&(Rt.length=ie),this&&this!==Ct&&this instanceof ct&&(ss=wt||zo(ss)),ss.apply(nn,Rt)}return ct}function vp(s,o){return function(h,E){return f6(h,s,o(E),{})}}function Df(s,o){return function(h,E){var R;if(h===t&&E===t)return o;if(h!==t&&(R=h),E!==t){if(R===t)return E;typeof h=="string"||typeof E=="string"?(h=vi(h),E=vi(E)):(h=tp(h),E=tp(E)),R=s(h,E)}return R}}function $h(s){return ts(function(o){return o=Xt(o,gi(nt())),At(function(h){var E=this;return s(o,function(R){return br(R,E,h)})})})}function Pf(s,o){o=o===t?" ":vi(o);var h=o.length;if(h<2)return h?Rh(o,s):o;var E=Rh(o,gf(s/Ta(o)));return Na(o)?Ds(en(E),0,s).join(""):E.slice(0,s)}function B6(s,o,h,E){var R=o&W,L=zo(s);function J(){for(var X=-1,ie=arguments.length,he=-1,le=E.length,ge=oe(le+ie),De=this&&this!==Ct&&this instanceof J?L:s;++he<le;)ge[he]=E[he];for(;ie--;)ge[he++]=arguments[++X];return br(De,R?h:this,ge)}return J}function bp(s){return function(o,h,E){return E&&typeof E!="number"&&kr(o,h,E)&&(h=E=t),o=ns(o),h===t?(h=o,o=0):h=ns(h),E=E===t?o<h?1:-1:ns(E),_6(o,h,E,s)}}function Of(s){return function(o,h){return typeof o=="string"&&typeof h=="string"||(o=Ti(o),h=Ti(h)),s(o,h)}}function mp(s,o,h,E,R,L,J,X,ie,he){var le=o&Y,ge=le?J:t,De=le?t:J,We=le?L:t,ot=le?t:L;o|=le?j:V,o&=~(le?V:j),o&z||(o&=~(W|Q));var wt=[s,o,R,We,ge,ot,De,X,ie,he],ct=h.apply(t,wt);return Gh(s)&&Op(ct,wt),ct.placeholder=E,Cp(ct,s,o)}function Uh(s){var o=dr[s];return function(h,E){if(h=Ti(h),E=E==null?0:Br(yt(E),292),E&&Cd(h)){var R=(Bt(h)+"e").split("e"),L=o(R[0]+"e"+(+R[1]+E));return R=(Bt(L)+"e").split("e"),+(R[0]+"e"+(+R[1]-E))}return o(h)}}var L6=La&&1/sf(new La([,-0]))[1]==I?function(s){return new La(s)}:cl;function yp(s){return function(o){var h=Lr(o);return h==ue?vh(o):h==Ie?e3(o):Vm(o,s(o))}}function es(s,o,h,E,R,L,J,X){var ie=o&Q;if(!ie&&typeof s!="function")throw new Pi(f);var he=E?E.length:0;if(he||(o&=~(j|V),E=R=t),J=J===t?J:pr(yt(J),0),X=X===t?X:yt(X),he-=R?R.length:0,o&V){var le=E,ge=R;E=R=t}var De=ie?t:kh(s),We=[s,o,h,E,R,le,ge,L,J,X];if(De&&X6(We,De),s=We[0],o=We[1],h=We[2],E=We[3],R=We[4],X=We[9]=We[9]===t?ie?0:s.length:pr(We[9]-he,0),!X&&o&(Y|q)&&(o&=~(Y|q)),!o||o==W)var ot=T6(s,o,h);else o==Y||o==q?ot=F6(s,o,X):(o==j||o==(W|j))&&!R.length?ot=B6(s,o,h,E):ot=Mf.apply(t,We);var wt=De?Zd:Op;return Cp(wt(ot,We),s,o)}function wp(s,o,h,E){return s===t||rn(s,Ba[h])&&!qt.call(E,h)?o:s}function _p(s,o,h,E,R,L){return Zt(s)&&Zt(o)&&(L.set(o,s),Ef(s,o,t,_p,L),L.delete(o)),s}function q6(s){return Ho(s)?t:s}function Ap(s,o,h,E,R,L){var J=h&C,X=s.length,ie=o.length;if(X!=ie&&!(J&&ie>X))return!1;var he=L.get(s),le=L.get(o);if(he&&le)return he==o&&le==s;var ge=-1,De=!0,We=h&H?new Qs:t;for(L.set(s,o),L.set(o,s);++ge<X;){var ot=s[ge],wt=o[ge];if(E)var ct=J?E(wt,ot,ge,o,s,L):E(ot,wt,ge,s,o,L);if(ct!==t){if(ct)continue;De=!1;break}if(We){if(!uh(o,function(xt,Rt){if(!Oo(We,Rt)&&(ot===xt||R(ot,xt,h,E,L)))return We.push(Rt)})){De=!1;break}}else if(!(ot===wt||R(ot,wt,h,E,L))){De=!1;break}}return L.delete(s),L.delete(o),De}function $6(s,o,h,E,R,L,J){switch(h){case be:if(s.byteLength!=o.byteLength||s.byteOffset!=o.byteOffset)return!1;s=s.buffer,o=o.buffer;case Se:return!(s.byteLength!=o.byteLength||!L(new hf(s),new hf(o)));case k:case K:case ye:return rn(+s,+o);case U:return s.name==o.name&&s.message==o.message;case Ne:case me:return s==o+"";case ue:var X=vh;case Ie:var ie=E&C;if(X||(X=sf),s.size!=o.size&&!ie)return!1;var he=J.get(s);if(he)return he==o;E|=H,J.set(s,o);var le=Ap(X(s),X(o),E,R,L,J);return J.delete(s),le;case Oe:if(Fo)return Fo.call(s)==Fo.call(o)}return!1}function U6(s,o,h,E,R,L){var J=h&C,X=zh(s),ie=X.length,he=zh(o),le=he.length;if(ie!=le&&!J)return!1;for(var ge=ie;ge--;){var De=X[ge];if(!(J?De in o:qt.call(o,De)))return!1}var We=L.get(s),ot=L.get(o);if(We&&ot)return We==o&&ot==s;var wt=!0;L.set(s,o),L.set(o,s);for(var ct=J;++ge<ie;){De=X[ge];var xt=s[De],Rt=o[De];if(E)var mi=J?E(Rt,xt,De,o,s,L):E(xt,Rt,De,s,o,L);if(!(mi===t?xt===Rt||R(xt,Rt,h,E,L):mi)){wt=!1;break}ct||(ct=De=="constructor")}if(wt&&!ct){var Hr=s.constructor,yi=o.constructor;Hr!=yi&&"constructor"in s&&"constructor"in o&&!(typeof Hr=="function"&&Hr instanceof Hr&&typeof yi=="function"&&yi instanceof yi)&&(wt=!1)}return L.delete(s),L.delete(o),wt}function ts(s){return Jh(Dp(s,t,Lp),s+"")}function zh(s){return jd(s,mr,Kh)}function jh(s){return jd(s,ni,Ep)}var kh=bf?function(s){return bf.get(s)}:cl;function Cf(s){for(var o=s.name+"",h=qa[o],E=qt.call(qa,o)?h.length:0;E--;){var R=h[E],L=R.func;if(L==null||L==s)return R.name}return o}function ja(s){var o=qt.call(T,"placeholder")?T:s;return o.placeholder}function nt(){var s=T.iteratee||al;return s=s===al?Kd:s,arguments.length?s(arguments[0],arguments[1]):s}function Rf(s,o){var h=s.__data__;return W6(o)?h[typeof o=="string"?"string":"hash"]:h.map}function Hh(s){for(var o=mr(s),h=o.length;h--;){var E=o[h],R=s[E];o[h]=[E,R,Ip(R)]}return o}function ea(s,o){var h=Qm(s,o);return Hd(h)?h:t}function z6(s){var o=qt.call(s,Js),h=s[Js];try{s[Js]=t;var E=!0}catch{}var R=ff.call(s);return E&&(o?s[Js]=h:delete s[Js]),R}var Kh=mh?function(s){return s==null?[]:(s=Ht(s),_s(mh(s),function(o){return Pd.call(s,o)}))}:fl,Ep=mh?function(s){for(var o=[];s;)As(o,Kh(s)),s=lf(s);return o}:fl,Lr=jr;(yh&&Lr(new yh(new ArrayBuffer(1)))!=be||Ro&&Lr(new Ro)!=ue||wh&&Lr(wh.resolve())!=Qe||La&&Lr(new La)!=Ie||No&&Lr(new No)!=ve)&&(Lr=function(s){var o=jr(s),h=o==Re?s.constructor:t,E=h?ta(h):"";if(E)switch(E){case E3:return be;case x3:return ue;case S3:return Qe;case I3:return Ie;case M3:return ve}return o});function j6(s,o,h){for(var E=-1,R=h.length;++E<R;){var L=h[E],J=L.size;switch(L.type){case"drop":s+=J;break;case"dropRight":o-=J;break;case"take":o=Br(o,s+J);break;case"takeRight":s=pr(s,o-J);break}}return{start:s,end:o}}function k6(s){var o=s.match(Ye);return o?o[1].split(ut):[]}function xp(s,o,h){o=Ms(o,s);for(var E=-1,R=o.length,L=!1;++E<R;){var J=An(o[E]);if(!(L=s!=null&&h(s,J)))break;s=s[J]}return L||++E!=R?L:(R=s==null?0:s.length,!!R&&$f(R)&&rs(J,R)&&(gt(s)||ra(s)))}function H6(s){var o=s.length,h=new s.constructor(o);return o&&typeof s[0]=="string"&&qt.call(s,"index")&&(h.index=s.index,h.input=s.input),h}function Sp(s){return typeof s.constructor=="function"&&!jo(s)?$a(lf(s)):{}}function K6(s,o,h){var E=s.constructor;switch(o){case Se:return qh(s);case k:case K:return new E(+s);case be:return D6(s,h);case qe:case Me:case _e:case He:case Ve:case Ee:case Ke:case ht:case Ge:return op(s,h);case ue:return new E;case ye:case me:return new E(s);case Ne:return P6(s);case Ie:return new E;case Oe:return O6(s)}}function V6(s,o){var h=o.length;if(!h)return s;var E=h-1;return o[E]=(h>1?"& ":"")+o[E],o=o.join(h>2?", ":" "),s.replace(Le,`{
/* [wrapped with `+o+`] */
`)}function G6(s){return gt(s)||ra(s)||!!(Od&&s&&s[Od])}function rs(s,o){var h=typeof s;return o=o??P,!!o&&(h=="number"||h!="symbol"&&Fr.test(s))&&s>-1&&s%1==0&&s<o}function kr(s,o,h){if(!Zt(h))return!1;var E=typeof o;return(E=="number"?ii(h)&&rs(o,h.length):E=="string"&&o in h)?rn(h[o],s):!1}function Vh(s,o){if(gt(s))return!1;var h=typeof s;return h=="number"||h=="symbol"||h=="boolean"||s==null||bi(s)?!0:Ue.test(s)||!Ze.test(s)||o!=null&&s in Ht(o)}function W6(s){var o=typeof s;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?s!=="__proto__":s===null}function Gh(s){var o=Cf(s),h=T[o];if(typeof h!="function"||!(o in Mt.prototype))return!1;if(s===h)return!0;var E=kh(h);return!!E&&s===E[0]}function J6(s){return!!Id&&Id in s}var Y6=of?is:ul;function jo(s){var o=s&&s.constructor,h=typeof o=="function"&&o.prototype||Ba;return s===h}function Ip(s){return s===s&&!Zt(s)}function Mp(s,o){return function(h){return h==null?!1:h[s]===o&&(o!==t||s in Ht(h))}}function Q6(s){var o=Lf(s,function(E){return h.size===p&&h.clear(),E}),h=o.cache;return o}function X6(s,o){var h=s[1],E=o[1],R=h|E,L=R<(W|Q|A),J=E==A&&h==Y||E==A&&h==F&&s[7].length<=o[8]||E==(A|F)&&o[7].length<=o[8]&&h==Y;if(!(L||J))return s;E&W&&(s[2]=o[2],R|=h&W?0:z);var X=o[3];if(X){var ie=s[3];s[3]=ie?fp(ie,X,o[4]):X,s[4]=ie?Es(s[3],y):o[4]}return X=o[5],X&&(ie=s[5],s[5]=ie?up(ie,X,o[6]):X,s[6]=ie?Es(s[5],y):o[6]),X=o[7],X&&(s[7]=X),E&A&&(s[8]=s[8]==null?o[8]:Br(s[8],o[8])),s[9]==null&&(s[9]=o[9]),s[0]=o[0],s[1]=R,s}function Z6(s){var o=[];if(s!=null)for(var h in Ht(s))o.push(h);return o}function ey(s){return ff.call(s)}function Dp(s,o,h){return o=pr(o===t?s.length-1:o,0),function(){for(var E=arguments,R=-1,L=pr(E.length-o,0),J=oe(L);++R<L;)J[R]=E[o+R];R=-1;for(var X=oe(o+1);++R<o;)X[R]=E[R];return X[o]=h(J),br(s,this,X)}}function Pp(s,o){return o.length<2?s:Zs(s,Ri(o,0,-1))}function ty(s,o){for(var h=s.length,E=Br(o.length,h),R=ri(s);E--;){var L=o[E];s[E]=rs(L,h)?R[L]:t}return s}function Wh(s,o){if(!(o==="constructor"&&typeof s[o]=="function")&&o!="__proto__")return s[o]}var Op=Rp(Zd),ko=v3||function(s,o){return Ct.setTimeout(s,o)},Jh=Rp(x6);function Cp(s,o,h){var E=o+"";return Jh(s,V6(E,ry(k6(E),h)))}function Rp(s){var o=0,h=0;return function(){var E=w3(),R=c-(E-h);if(h=E,R>0){if(++o>=m)return arguments[0]}else o=0;return s.apply(t,arguments)}}function Nf(s,o){var h=-1,E=s.length,R=E-1;for(o=o===t?E:o;++h<o;){var L=Ch(h,R),J=s[L];s[L]=s[h],s[h]=J}return s.length=o,s}var Np=Q6(function(s){var o=[];return s.charCodeAt(0)===46&&o.push(""),s.replace(ft,function(h,E,R,L){o.push(R?L.replace(Tt,"$1"):E||h)}),o});function An(s){if(typeof s=="string"||bi(s))return s;var o=s+"";return o=="0"&&1/s==-I?"-0":o}function ta(s){if(s!=null){try{return cf.call(s)}catch{}try{return s+""}catch{}}return""}function ry(s,o){return Di(se,function(h){var E="_."+h[0];o&h[1]&&!rf(s,E)&&s.push(E)}),s.sort()}function Tp(s){if(s instanceof Mt)return s.clone();var o=new Oi(s.__wrapped__,s.__chain__);return o.__actions__=ri(s.__actions__),o.__index__=s.__index__,o.__values__=s.__values__,o}function iy(s,o,h){(h?kr(s,o,h):o===t)?o=1:o=pr(yt(o),0);var E=s==null?0:s.length;if(!E||o<1)return[];for(var R=0,L=0,J=oe(gf(E/o));R<E;)J[L++]=Ri(s,R,R+=o);return J}function ny(s){for(var o=-1,h=s==null?0:s.length,E=0,R=[];++o<h;){var L=s[o];L&&(R[E++]=L)}return R}function sy(){var s=arguments.length;if(!s)return[];for(var o=oe(s-1),h=arguments[0],E=s;E--;)o[E-1]=arguments[E];return As(gt(h)?ri(h):[h],Sr(o,1))}var ay=At(function(s,o){return ar(s)?Lo(s,Sr(o,1,ar,!0)):[]}),oy=At(function(s,o){var h=Ni(o);return ar(h)&&(h=t),ar(s)?Lo(s,Sr(o,1,ar,!0),nt(h,2)):[]}),cy=At(function(s,o){var h=Ni(o);return ar(h)&&(h=t),ar(s)?Lo(s,Sr(o,1,ar,!0),t,h):[]});function fy(s,o,h){var E=s==null?0:s.length;return E?(o=h||o===t?1:yt(o),Ri(s,o<0?0:o,E)):[]}function uy(s,o,h){var E=s==null?0:s.length;return E?(o=h||o===t?1:yt(o),o=E-o,Ri(s,0,o<0?0:o)):[]}function hy(s,o){return s&&s.length?Sf(s,nt(o,3),!0,!0):[]}function ly(s,o){return s&&s.length?Sf(s,nt(o,3),!0):[]}function dy(s,o,h,E){var R=s==null?0:s.length;return R?(h&&typeof h!="number"&&kr(s,o,h)&&(h=0,E=R),s6(s,o,h,E)):[]}function Fp(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var R=h==null?0:yt(h);return R<0&&(R=pr(E+R,0)),nf(s,nt(o,3),R)}function Bp(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var R=E-1;return h!==t&&(R=yt(h),R=h<0?pr(E+R,0):Br(R,E-1)),nf(s,nt(o,3),R,!0)}function Lp(s){var o=s==null?0:s.length;return o?Sr(s,1):[]}function py(s){var o=s==null?0:s.length;return o?Sr(s,I):[]}function gy(s,o){var h=s==null?0:s.length;return h?(o=o===t?1:yt(o),Sr(s,o)):[]}function vy(s){for(var o=-1,h=s==null?0:s.length,E={};++o<h;){var R=s[o];E[R[0]]=R[1]}return E}function qp(s){return s&&s.length?s[0]:t}function by(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var R=h==null?0:yt(h);return R<0&&(R=pr(E+R,0)),Ra(s,o,R)}function my(s){var o=s==null?0:s.length;return o?Ri(s,0,-1):[]}var yy=At(function(s){var o=Xt(s,Bh);return o.length&&o[0]===s[0]?Ih(o):[]}),wy=At(function(s){var o=Ni(s),h=Xt(s,Bh);return o===Ni(h)?o=t:h.pop(),h.length&&h[0]===s[0]?Ih(h,nt(o,2)):[]}),_y=At(function(s){var o=Ni(s),h=Xt(s,Bh);return o=typeof o=="function"?o:t,o&&h.pop(),h.length&&h[0]===s[0]?Ih(h,t,o):[]});function Ay(s,o){return s==null?"":m3.call(s,o)}function Ni(s){var o=s==null?0:s.length;return o?s[o-1]:t}function Ey(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var R=E;return h!==t&&(R=yt(h),R=R<0?pr(E+R,0):Br(R,E-1)),o===o?r3(s,o,R):nf(s,md,R,!0)}function xy(s,o){return s&&s.length?Jd(s,yt(o)):t}var Sy=At($p);function $p(s,o){return s&&s.length&&o&&o.length?Oh(s,o):s}function Iy(s,o,h){return s&&s.length&&o&&o.length?Oh(s,o,nt(h,2)):s}function My(s,o,h){return s&&s.length&&o&&o.length?Oh(s,o,t,h):s}var Dy=ts(function(s,o){var h=s==null?0:s.length,E=Ah(s,o);return Xd(s,Xt(o,function(R){return rs(R,h)?+R:R}).sort(cp)),E});function Py(s,o){var h=[];if(!(s&&s.length))return h;var E=-1,R=[],L=s.length;for(o=nt(o,3);++E<L;){var J=s[E];o(J,E,s)&&(h.push(J),R.push(E))}return Xd(s,R),h}function Yh(s){return s==null?s:A3.call(s)}function Oy(s,o,h){var E=s==null?0:s.length;return E?(h&&typeof h!="number"&&kr(s,o,h)?(o=0,h=E):(o=o==null?0:yt(o),h=h===t?E:yt(h)),Ri(s,o,h)):[]}function Cy(s,o){return xf(s,o)}function Ry(s,o,h){return Nh(s,o,nt(h,2))}function Ny(s,o){var h=s==null?0:s.length;if(h){var E=xf(s,o);if(E<h&&rn(s[E],o))return E}return-1}function Ty(s,o){return xf(s,o,!0)}function Fy(s,o,h){return Nh(s,o,nt(h,2),!0)}function By(s,o){var h=s==null?0:s.length;if(h){var E=xf(s,o,!0)-1;if(rn(s[E],o))return E}return-1}function Ly(s){return s&&s.length?ep(s):[]}function qy(s,o){return s&&s.length?ep(s,nt(o,2)):[]}function $y(s){var o=s==null?0:s.length;return o?Ri(s,1,o):[]}function Uy(s,o,h){return s&&s.length?(o=h||o===t?1:yt(o),Ri(s,0,o<0?0:o)):[]}function zy(s,o,h){var E=s==null?0:s.length;return E?(o=h||o===t?1:yt(o),o=E-o,Ri(s,o<0?0:o,E)):[]}function jy(s,o){return s&&s.length?Sf(s,nt(o,3),!1,!0):[]}function ky(s,o){return s&&s.length?Sf(s,nt(o,3)):[]}var Hy=At(function(s){return Is(Sr(s,1,ar,!0))}),Ky=At(function(s){var o=Ni(s);return ar(o)&&(o=t),Is(Sr(s,1,ar,!0),nt(o,2))}),Vy=At(function(s){var o=Ni(s);return o=typeof o=="function"?o:t,Is(Sr(s,1,ar,!0),t,o)});function Gy(s){return s&&s.length?Is(s):[]}function Wy(s,o){return s&&s.length?Is(s,nt(o,2)):[]}function Jy(s,o){return o=typeof o=="function"?o:t,s&&s.length?Is(s,t,o):[]}function Qh(s){if(!(s&&s.length))return[];var o=0;return s=_s(s,function(h){if(ar(h))return o=pr(h.length,o),!0}),ph(o,function(h){return Xt(s,hh(h))})}function Up(s,o){if(!(s&&s.length))return[];var h=Qh(s);return o==null?h:Xt(h,function(E){return br(o,t,E)})}var Yy=At(function(s,o){return ar(s)?Lo(s,o):[]}),Qy=At(function(s){return Fh(_s(s,ar))}),Xy=At(function(s){var o=Ni(s);return ar(o)&&(o=t),Fh(_s(s,ar),nt(o,2))}),Zy=At(function(s){var o=Ni(s);return o=typeof o=="function"?o:t,Fh(_s(s,ar),t,o)}),ew=At(Qh);function tw(s,o){return np(s||[],o||[],Bo)}function rw(s,o){return np(s||[],o||[],Uo)}var iw=At(function(s){var o=s.length,h=o>1?s[o-1]:t;return h=typeof h=="function"?(s.pop(),h):t,Up(s,h)});function zp(s){var o=T(s);return o.__chain__=!0,o}function nw(s,o){return o(s),s}function Tf(s,o){return o(s)}var sw=ts(function(s){var o=s.length,h=o?s[0]:0,E=this.__wrapped__,R=function(L){return Ah(L,s)};return o>1||this.__actions__.length||!(E instanceof Mt)||!rs(h)?this.thru(R):(E=E.slice(h,+h+(o?1:0)),E.__actions__.push({func:Tf,args:[R],thisArg:t}),new Oi(E,this.__chain__).thru(function(L){return o&&!L.length&&L.push(t),L}))});function aw(){return zp(this)}function ow(){return new Oi(this.value(),this.__chain__)}function cw(){this.__values__===t&&(this.__values__=t1(this.value()));var s=this.__index__>=this.__values__.length,o=s?t:this.__values__[this.__index__++];return{done:s,value:o}}function fw(){return this}function uw(s){for(var o,h=this;h instanceof yf;){var E=Tp(h);E.__index__=0,E.__values__=t,o?R.__wrapped__=E:o=E;var R=E;h=h.__wrapped__}return R.__wrapped__=s,o}function hw(){var s=this.__wrapped__;if(s instanceof Mt){var o=s;return this.__actions__.length&&(o=new Mt(this)),o=o.reverse(),o.__actions__.push({func:Tf,args:[Yh],thisArg:t}),new Oi(o,this.__chain__)}return this.thru(Yh)}function lw(){return ip(this.__wrapped__,this.__actions__)}var dw=If(function(s,o,h){qt.call(s,h)?++s[h]:Zn(s,h,1)});function pw(s,o,h){var E=gt(s)?vd:n6;return h&&kr(s,o,h)&&(o=t),E(s,nt(o,3))}function gw(s,o){var h=gt(s)?_s:Ud;return h(s,nt(o,3))}var vw=pp(Fp),bw=pp(Bp);function mw(s,o){return Sr(Ff(s,o),1)}function yw(s,o){return Sr(Ff(s,o),I)}function ww(s,o,h){return h=h===t?1:yt(h),Sr(Ff(s,o),h)}function jp(s,o){var h=gt(s)?Di:Ss;return h(s,nt(o,3))}function kp(s,o){var h=gt(s)?$m:$d;return h(s,nt(o,3))}var _w=If(function(s,o,h){qt.call(s,h)?s[h].push(o):Zn(s,h,[o])});function Aw(s,o,h,E){s=ii(s)?s:Ha(s),h=h&&!E?yt(h):0;var R=s.length;return h<0&&(h=pr(R+h,0)),Uf(s)?h<=R&&s.indexOf(o,h)>-1:!!R&&Ra(s,o,h)>-1}var Ew=At(function(s,o,h){var E=-1,R=typeof o=="function",L=ii(s)?oe(s.length):[];return Ss(s,function(J){L[++E]=R?br(o,J,h):qo(J,o,h)}),L}),xw=If(function(s,o,h){Zn(s,h,o)});function Ff(s,o){var h=gt(s)?Xt:Vd;return h(s,nt(o,3))}function Sw(s,o,h,E){return s==null?[]:(gt(o)||(o=o==null?[]:[o]),h=E?t:h,gt(h)||(h=h==null?[]:[h]),Yd(s,o,h))}var Iw=If(function(s,o,h){s[h?0:1].push(o)},function(){return[[],[]]});function Mw(s,o,h){var E=gt(s)?fh:wd,R=arguments.length<3;return E(s,nt(o,4),h,R,Ss)}function Dw(s,o,h){var E=gt(s)?Um:wd,R=arguments.length<3;return E(s,nt(o,4),h,R,$d)}function Pw(s,o){var h=gt(s)?_s:Ud;return h(s,qf(nt(o,3)))}function Ow(s){var o=gt(s)?Fd:A6;return o(s)}function Cw(s,o,h){(h?kr(s,o,h):o===t)?o=1:o=yt(o);var E=gt(s)?Z3:E6;return E(s,o)}function Rw(s){var o=gt(s)?e6:S6;return o(s)}function Nw(s){if(s==null)return 0;if(ii(s))return Uf(s)?Ta(s):s.length;var o=Lr(s);return o==ue||o==Ie?s.size:Dh(s).length}function Tw(s,o,h){var E=gt(s)?uh:I6;return h&&kr(s,o,h)&&(o=t),E(s,nt(o,3))}var Fw=At(function(s,o){if(s==null)return[];var h=o.length;return h>1&&kr(s,o[0],o[1])?o=[]:h>2&&kr(o[0],o[1],o[2])&&(o=[o[0]]),Yd(s,Sr(o,1),[])}),Bf=g3||function(){return Ct.Date.now()};function Bw(s,o){if(typeof o!="function")throw new Pi(f);return s=yt(s),function(){if(--s<1)return o.apply(this,arguments)}}function Hp(s,o,h){return o=h?t:o,o=s&&o==null?s.length:o,es(s,A,t,t,t,t,o)}function Kp(s,o){var h;if(typeof o!="function")throw new Pi(f);return s=yt(s),function(){return--s>0&&(h=o.apply(this,arguments)),s<=1&&(o=t),h}}var Xh=At(function(s,o,h){var E=W;if(h.length){var R=Es(h,ja(Xh));E|=j}return es(s,E,o,h,R)}),Vp=At(function(s,o,h){var E=W|Q;if(h.length){var R=Es(h,ja(Vp));E|=j}return es(o,E,s,h,R)});function Gp(s,o,h){o=h?t:o;var E=es(s,Y,t,t,t,t,t,o);return E.placeholder=Gp.placeholder,E}function Wp(s,o,h){o=h?t:o;var E=es(s,q,t,t,t,t,t,o);return E.placeholder=Wp.placeholder,E}function Jp(s,o,h){var E,R,L,J,X,ie,he=0,le=!1,ge=!1,De=!0;if(typeof s!="function")throw new Pi(f);o=Ti(o)||0,Zt(h)&&(le=!!h.leading,ge="maxWait"in h,L=ge?pr(Ti(h.maxWait)||0,o):L,De="trailing"in h?!!h.trailing:De);function We(or){var nn=E,ss=R;return E=R=t,he=or,J=s.apply(ss,nn),J}function ot(or){return he=or,X=ko(xt,o),le?We(or):J}function wt(or){var nn=or-ie,ss=or-he,p1=o-nn;return ge?Br(p1,L-ss):p1}function ct(or){var nn=or-ie,ss=or-he;return ie===t||nn>=o||nn<0||ge&&ss>=L}function xt(){var or=Bf();if(ct(or))return Rt(or);X=ko(xt,wt(or))}function Rt(or){return X=t,De&&E?We(or):(E=R=t,J)}function mi(){X!==t&&sp(X),he=0,E=ie=R=X=t}function Hr(){return X===t?J:Rt(Bf())}function yi(){var or=Bf(),nn=ct(or);if(E=arguments,R=this,ie=or,nn){if(X===t)return ot(ie);if(ge)return sp(X),X=ko(xt,o),We(ie)}return X===t&&(X=ko(xt,o)),J}return yi.cancel=mi,yi.flush=Hr,yi}var Lw=At(function(s,o){return qd(s,1,o)}),qw=At(function(s,o,h){return qd(s,Ti(o)||0,h)});function $w(s){return es(s,ae)}function Lf(s,o){if(typeof s!="function"||o!=null&&typeof o!="function")throw new Pi(f);var h=function(){var E=arguments,R=o?o.apply(this,E):E[0],L=h.cache;if(L.has(R))return L.get(R);var J=s.apply(this,E);return h.cache=L.set(R,J)||L,J};return h.cache=new(Lf.Cache||Xn),h}Lf.Cache=Xn;function qf(s){if(typeof s!="function")throw new Pi(f);return function(){var o=arguments;switch(o.length){case 0:return!s.call(this);case 1:return!s.call(this,o[0]);case 2:return!s.call(this,o[0],o[1]);case 3:return!s.call(this,o[0],o[1],o[2])}return!s.apply(this,o)}}function Uw(s){return Kp(2,s)}var zw=M6(function(s,o){o=o.length==1&&gt(o[0])?Xt(o[0],gi(nt())):Xt(Sr(o,1),gi(nt()));var h=o.length;return At(function(E){for(var R=-1,L=Br(E.length,h);++R<L;)E[R]=o[R].call(this,E[R]);return br(s,this,E)})}),Zh=At(function(s,o){var h=Es(o,ja(Zh));return es(s,j,t,o,h)}),Yp=At(function(s,o){var h=Es(o,ja(Yp));return es(s,V,t,o,h)}),jw=ts(function(s,o){return es(s,F,t,t,t,o)});function kw(s,o){if(typeof s!="function")throw new Pi(f);return o=o===t?o:yt(o),At(s,o)}function Hw(s,o){if(typeof s!="function")throw new Pi(f);return o=o==null?0:pr(yt(o),0),At(function(h){var E=h[o],R=Ds(h,0,o);return E&&As(R,E),br(s,this,R)})}function Kw(s,o,h){var E=!0,R=!0;if(typeof s!="function")throw new Pi(f);return Zt(h)&&(E="leading"in h?!!h.leading:E,R="trailing"in h?!!h.trailing:R),Jp(s,o,{leading:E,maxWait:o,trailing:R})}function Vw(s){return Hp(s,1)}function Gw(s,o){return Zh(Lh(o),s)}function Ww(){if(!arguments.length)return[];var s=arguments[0];return gt(s)?s:[s]}function Jw(s){return Ci(s,D)}function Yw(s,o){return o=typeof o=="function"?o:t,Ci(s,D,o)}function Qw(s){return Ci(s,_|D)}function Xw(s,o){return o=typeof o=="function"?o:t,Ci(s,_|D,o)}function Zw(s,o){return o==null||Ld(s,o,mr(o))}function rn(s,o){return s===o||s!==s&&o!==o}var e5=Of(Sh),t5=Of(function(s,o){return s>=o}),ra=kd(function(){return arguments}())?kd:function(s){return tr(s)&&qt.call(s,"callee")&&!Pd.call(s,"callee")},gt=oe.isArray,r5=zr?gi(zr):u6;function ii(s){return s!=null&&$f(s.length)&&!is(s)}function ar(s){return tr(s)&&ii(s)}function i5(s){return s===!0||s===!1||tr(s)&&jr(s)==k}var Ps=b3||ul,n5=Zi?gi(Zi):h6;function s5(s){return tr(s)&&s.nodeType===1&&!Ho(s)}function a5(s){if(s==null)return!0;if(ii(s)&&(gt(s)||typeof s=="string"||typeof s.splice=="function"||Ps(s)||ka(s)||ra(s)))return!s.length;var o=Lr(s);if(o==ue||o==Ie)return!s.size;if(jo(s))return!Dh(s).length;for(var h in s)if(qt.call(s,h))return!1;return!0}function o5(s,o){return $o(s,o)}function c5(s,o,h){h=typeof h=="function"?h:t;var E=h?h(s,o):t;return E===t?$o(s,o,t,h):!!E}function el(s){if(!tr(s))return!1;var o=jr(s);return o==U||o==w||typeof s.message=="string"&&typeof s.name=="string"&&!Ho(s)}function f5(s){return typeof s=="number"&&Cd(s)}function is(s){if(!Zt(s))return!1;var o=jr(s);return o==ne||o==ce||o==B||o==Pe}function Qp(s){return typeof s=="number"&&s==yt(s)}function $f(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=P}function Zt(s){var o=typeof s;return s!=null&&(o=="object"||o=="function")}function tr(s){return s!=null&&typeof s=="object"}var Xp=Mi?gi(Mi):d6;function u5(s,o){return s===o||Mh(s,o,Hh(o))}function h5(s,o,h){return h=typeof h=="function"?h:t,Mh(s,o,Hh(o),h)}function l5(s){return Zp(s)&&s!=+s}function d5(s){if(Y6(s))throw new dt(a);return Hd(s)}function p5(s){return s===null}function g5(s){return s==null}function Zp(s){return typeof s=="number"||tr(s)&&jr(s)==ye}function Ho(s){if(!tr(s)||jr(s)!=Re)return!1;var o=lf(s);if(o===null)return!0;var h=qt.call(o,"constructor")&&o.constructor;return typeof h=="function"&&h instanceof h&&cf.call(h)==h3}var tl=yn?gi(yn):p6;function v5(s){return Qp(s)&&s>=-P&&s<=P}var e1=Po?gi(Po):g6;function Uf(s){return typeof s=="string"||!gt(s)&&tr(s)&&jr(s)==me}function bi(s){return typeof s=="symbol"||tr(s)&&jr(s)==Oe}var ka=Ws?gi(Ws):v6;function b5(s){return s===t}function m5(s){return tr(s)&&Lr(s)==ve}function y5(s){return tr(s)&&jr(s)==Ce}var w5=Of(Ph),_5=Of(function(s,o){return s<=o});function t1(s){if(!s)return[];if(ii(s))return Uf(s)?en(s):ri(s);if(Co&&s[Co])return Zm(s[Co]());var o=Lr(s),h=o==ue?vh:o==Ie?sf:Ha;return h(s)}function ns(s){if(!s)return s===0?s:0;if(s=Ti(s),s===I||s===-I){var o=s<0?-1:1;return o*S}return s===s?s:0}function yt(s){var o=ns(s),h=o%1;return o===o?h?o-h:o:0}function r1(s){return s?Xs(yt(s),0,g):0}function Ti(s){if(typeof s=="number")return s;if(bi(s))return d;if(Zt(s)){var o=typeof s.valueOf=="function"?s.valueOf():s;s=Zt(o)?o+"":o}if(typeof s!="string")return s===0?s:+s;s=_d(s);var h=Rr.test(s);return h||Tr.test(s)?pt(s.slice(2),h?2:8):Cr.test(s)?d:+s}function i1(s){return _n(s,ni(s))}function A5(s){return s?Xs(yt(s),-P,P):s===0?s:0}function Bt(s){return s==null?"":vi(s)}var E5=Ua(function(s,o){if(jo(o)||ii(o)){_n(o,mr(o),s);return}for(var h in o)qt.call(o,h)&&Bo(s,h,o[h])}),n1=Ua(function(s,o){_n(o,ni(o),s)}),zf=Ua(function(s,o,h,E){_n(o,ni(o),s,E)}),x5=Ua(function(s,o,h,E){_n(o,mr(o),s,E)}),S5=ts(Ah);function I5(s,o){var h=$a(s);return o==null?h:Bd(h,o)}var M5=At(function(s,o){s=Ht(s);var h=-1,E=o.length,R=E>2?o[2]:t;for(R&&kr(o[0],o[1],R)&&(E=1);++h<E;)for(var L=o[h],J=ni(L),X=-1,ie=J.length;++X<ie;){var he=J[X],le=s[he];(le===t||rn(le,Ba[he])&&!qt.call(s,he))&&(s[he]=L[he])}return s}),D5=At(function(s){return s.push(t,_p),br(s1,t,s)});function P5(s,o){return bd(s,nt(o,3),wn)}function O5(s,o){return bd(s,nt(o,3),xh)}function C5(s,o){return s==null?s:Eh(s,nt(o,3),ni)}function R5(s,o){return s==null?s:zd(s,nt(o,3),ni)}function N5(s,o){return s&&wn(s,nt(o,3))}function T5(s,o){return s&&xh(s,nt(o,3))}function F5(s){return s==null?[]:Af(s,mr(s))}function B5(s){return s==null?[]:Af(s,ni(s))}function rl(s,o,h){var E=s==null?t:Zs(s,o);return E===t?h:E}function L5(s,o){return s!=null&&xp(s,o,a6)}function il(s,o){return s!=null&&xp(s,o,o6)}var q5=vp(function(s,o,h){o!=null&&typeof o.toString!="function"&&(o=ff.call(o)),s[o]=h},sl(si)),$5=vp(function(s,o,h){o!=null&&typeof o.toString!="function"&&(o=ff.call(o)),qt.call(s,o)?s[o].push(h):s[o]=[h]},nt),U5=At(qo);function mr(s){return ii(s)?Td(s):Dh(s)}function ni(s){return ii(s)?Td(s,!0):b6(s)}function z5(s,o){var h={};return o=nt(o,3),wn(s,function(E,R,L){Zn(h,o(E,R,L),E)}),h}function j5(s,o){var h={};return o=nt(o,3),wn(s,function(E,R,L){Zn(h,R,o(E,R,L))}),h}var k5=Ua(function(s,o,h){Ef(s,o,h)}),s1=Ua(function(s,o,h,E){Ef(s,o,h,E)}),H5=ts(function(s,o){var h={};if(s==null)return h;var E=!1;o=Xt(o,function(L){return L=Ms(L,s),E||(E=L.length>1),L}),_n(s,jh(s),h),E&&(h=Ci(h,_|O|D,q6));for(var R=o.length;R--;)Th(h,o[R]);return h});function K5(s,o){return a1(s,qf(nt(o)))}var V5=ts(function(s,o){return s==null?{}:y6(s,o)});function a1(s,o){if(s==null)return{};var h=Xt(jh(s),function(E){return[E]});return o=nt(o),Qd(s,h,function(E,R){return o(E,R[0])})}function G5(s,o,h){o=Ms(o,s);var E=-1,R=o.length;for(R||(R=1,s=t);++E<R;){var L=s==null?t:s[An(o[E])];L===t&&(E=R,L=h),s=is(L)?L.call(s):L}return s}function W5(s,o,h){return s==null?s:Uo(s,o,h)}function J5(s,o,h,E){return E=typeof E=="function"?E:t,s==null?s:Uo(s,o,h,E)}var o1=yp(mr),c1=yp(ni);function Y5(s,o,h){var E=gt(s),R=E||Ps(s)||ka(s);if(o=nt(o,4),h==null){var L=s&&s.constructor;R?h=E?new L:[]:Zt(s)?h=is(L)?$a(lf(s)):{}:h={}}return(R?Di:wn)(s,function(J,X,ie){return o(h,J,X,ie)}),h}function Q5(s,o){return s==null?!0:Th(s,o)}function X5(s,o,h){return s==null?s:rp(s,o,Lh(h))}function Z5(s,o,h,E){return E=typeof E=="function"?E:t,s==null?s:rp(s,o,Lh(h),E)}function Ha(s){return s==null?[]:gh(s,mr(s))}function e8(s){return s==null?[]:gh(s,ni(s))}function t8(s,o,h){return h===t&&(h=o,o=t),h!==t&&(h=Ti(h),h=h===h?h:0),o!==t&&(o=Ti(o),o=o===o?o:0),Xs(Ti(s),o,h)}function r8(s,o,h){return o=ns(o),h===t?(h=o,o=0):h=ns(h),s=Ti(s),c6(s,o,h)}function i8(s,o,h){if(h&&typeof h!="boolean"&&kr(s,o,h)&&(o=h=t),h===t&&(typeof o=="boolean"?(h=o,o=t):typeof s=="boolean"&&(h=s,s=t)),s===t&&o===t?(s=0,o=1):(s=ns(s),o===t?(o=s,s=0):o=ns(o)),s>o){var E=s;s=o,o=E}if(h||s%1||o%1){var R=Rd();return Br(s+R*(o-s+jt("1e-"+((R+"").length-1))),o)}return Ch(s,o)}var n8=za(function(s,o,h){return o=o.toLowerCase(),s+(h?f1(o):o)});function f1(s){return nl(Bt(s).toLowerCase())}function u1(s){return s=Bt(s),s&&s.replace(er,Wm).replace(ah,"")}function s8(s,o,h){s=Bt(s),o=vi(o);var E=s.length;h=h===t?E:Xs(yt(h),0,E);var R=h;return h-=o.length,h>=0&&s.slice(h,R)==o}function a8(s){return s=Bt(s),s&&Xe.test(s)?s.replace(It,Jm):s}function o8(s){return s=Bt(s),s&&ze.test(s)?s.replace(rt,"\\$&"):s}var c8=za(function(s,o,h){return s+(h?"-":"")+o.toLowerCase()}),f8=za(function(s,o,h){return s+(h?" ":"")+o.toLowerCase()}),u8=dp("toLowerCase");function h8(s,o,h){s=Bt(s),o=yt(o);var E=o?Ta(s):0;if(!o||E>=o)return s;var R=(o-E)/2;return Pf(vf(R),h)+s+Pf(gf(R),h)}function l8(s,o,h){s=Bt(s),o=yt(o);var E=o?Ta(s):0;return o&&E<o?s+Pf(o-E,h):s}function d8(s,o,h){s=Bt(s),o=yt(o);var E=o?Ta(s):0;return o&&E<o?Pf(o-E,h)+s:s}function p8(s,o,h){return h||o==null?o=0:o&&(o=+o),_3(Bt(s).replace(it,""),o||0)}function g8(s,o,h){return(h?kr(s,o,h):o===t)?o=1:o=yt(o),Rh(Bt(s),o)}function v8(){var s=arguments,o=Bt(s[0]);return s.length<3?o:o.replace(s[1],s[2])}var b8=za(function(s,o,h){return s+(h?"_":"")+o.toLowerCase()});function m8(s,o,h){return h&&typeof h!="number"&&kr(s,o,h)&&(o=h=t),h=h===t?g:h>>>0,h?(s=Bt(s),s&&(typeof o=="string"||o!=null&&!tl(o))&&(o=vi(o),!o&&Na(s))?Ds(en(s),0,h):s.split(o,h)):[]}var y8=za(function(s,o,h){return s+(h?" ":"")+nl(o)});function w8(s,o,h){return s=Bt(s),h=h==null?0:Xs(yt(h),0,s.length),o=vi(o),s.slice(h,h+o.length)==o}function _8(s,o,h){var E=T.templateSettings;h&&kr(s,o,h)&&(o=t),s=Bt(s),o=zf({},o,E,wp);var R=zf({},o.imports,E.imports,wp),L=mr(R),J=gh(R,L),X,ie,he=0,le=o.interpolate||Xr,ge="__p += '",De=bh((o.escape||Xr).source+"|"+le.source+"|"+(le===et?at:Xr).source+"|"+(o.evaluate||Xr).source+"|$","g"),We="//# sourceURL="+(qt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oh+"]")+`
`;s.replace(De,function(ct,xt,Rt,mi,Hr,yi){return Rt||(Rt=mi),ge+=s.slice(he,yi).replace(Gi,Ym),xt&&(X=!0,ge+=`' +
__e(`+xt+`) +
'`),Hr&&(ie=!0,ge+=`';
`+Hr+`;
__p += '`),Rt&&(ge+=`' +
((__t = (`+Rt+`)) == null ? '' : __t) +
'`),he=yi+ct.length,ct}),ge+=`';
`;var ot=qt.call(o,"variable")&&o.variable;if(!ot)ge=`with (obj) {
`+ge+`
}
`;else if(Nt.test(ot))throw new dt(u);ge=(ie?ge.replace(_t,""):ge).replace(lt,"$1").replace(Je,"$1;"),ge="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var wt=l1(function(){return Ft(L,We+"return "+ge).apply(t,J)});if(wt.source=ge,el(wt))throw wt;return wt}function A8(s){return Bt(s).toLowerCase()}function E8(s){return Bt(s).toUpperCase()}function x8(s,o,h){if(s=Bt(s),s&&(h||o===t))return _d(s);if(!s||!(o=vi(o)))return s;var E=en(s),R=en(o),L=Ad(E,R),J=Ed(E,R)+1;return Ds(E,L,J).join("")}function S8(s,o,h){if(s=Bt(s),s&&(h||o===t))return s.slice(0,Sd(s)+1);if(!s||!(o=vi(o)))return s;var E=en(s),R=Ed(E,en(o))+1;return Ds(E,0,R).join("")}function I8(s,o,h){if(s=Bt(s),s&&(h||o===t))return s.replace(it,"");if(!s||!(o=vi(o)))return s;var E=en(s),R=Ad(E,en(o));return Ds(E,R).join("")}function M8(s,o){var h=de,E=$;if(Zt(o)){var R="separator"in o?o.separator:R;h="length"in o?yt(o.length):h,E="omission"in o?vi(o.omission):E}s=Bt(s);var L=s.length;if(Na(s)){var J=en(s);L=J.length}if(h>=L)return s;var X=h-Ta(E);if(X<1)return E;var ie=J?Ds(J,0,X).join(""):s.slice(0,X);if(R===t)return ie+E;if(J&&(X+=ie.length-X),tl(R)){if(s.slice(X).search(R)){var he,le=ie;for(R.global||(R=bh(R.source,Bt(bt.exec(R))+"g")),R.lastIndex=0;he=R.exec(le);)var ge=he.index;ie=ie.slice(0,ge===t?X:ge)}}else if(s.indexOf(vi(R),X)!=X){var De=ie.lastIndexOf(R);De>-1&&(ie=ie.slice(0,De))}return ie+E}function D8(s){return s=Bt(s),s&&Fe.test(s)?s.replace(Et,i3):s}var P8=za(function(s,o,h){return s+(h?" ":"")+o.toUpperCase()}),nl=dp("toUpperCase");function h1(s,o,h){return s=Bt(s),o=h?t:o,o===t?Xm(s)?a3(s):km(s):s.match(o)||[]}var l1=At(function(s,o){try{return br(s,t,o)}catch(h){return el(h)?h:new dt(h)}}),O8=ts(function(s,o){return Di(o,function(h){h=An(h),Zn(s,h,Xh(s[h],s))}),s});function C8(s){var o=s==null?0:s.length,h=nt();return s=o?Xt(s,function(E){if(typeof E[1]!="function")throw new Pi(f);return[h(E[0]),E[1]]}):[],At(function(E){for(var R=-1;++R<o;){var L=s[R];if(br(L[0],this,E))return br(L[1],this,E)}})}function R8(s){return i6(Ci(s,_))}function sl(s){return function(){return s}}function N8(s,o){return s==null||s!==s?o:s}var T8=gp(),F8=gp(!0);function si(s){return s}function al(s){return Kd(typeof s=="function"?s:Ci(s,_))}function B8(s){return Gd(Ci(s,_))}function L8(s,o){return Wd(s,Ci(o,_))}var q8=At(function(s,o){return function(h){return qo(h,s,o)}}),$8=At(function(s,o){return function(h){return qo(s,h,o)}});function ol(s,o,h){var E=mr(o),R=Af(o,E);h==null&&!(Zt(o)&&(R.length||!E.length))&&(h=o,o=s,s=this,R=Af(o,mr(o)));var L=!(Zt(h)&&"chain"in h)||!!h.chain,J=is(s);return Di(R,function(X){var ie=o[X];s[X]=ie,J&&(s.prototype[X]=function(){var he=this.__chain__;if(L||he){var le=s(this.__wrapped__),ge=le.__actions__=ri(this.__actions__);return ge.push({func:ie,args:arguments,thisArg:s}),le.__chain__=he,le}return ie.apply(s,As([this.value()],arguments))})}),s}function U8(){return Ct._===this&&(Ct._=l3),this}function cl(){}function z8(s){return s=yt(s),At(function(o){return Jd(o,s)})}var j8=$h(Xt),k8=$h(vd),H8=$h(uh);function d1(s){return Vh(s)?hh(An(s)):w6(s)}function K8(s){return function(o){return s==null?t:Zs(s,o)}}var V8=bp(),G8=bp(!0);function fl(){return[]}function ul(){return!1}function W8(){return{}}function J8(){return""}function Y8(){return!0}function Q8(s,o){if(s=yt(s),s<1||s>P)return[];var h=g,E=Br(s,g);o=nt(o),s-=g;for(var R=ph(E,o);++h<s;)o(h);return R}function X8(s){return gt(s)?Xt(s,An):bi(s)?[s]:ri(Np(Bt(s)))}function Z8(s){var o=++u3;return Bt(s)+o}var e4=Df(function(s,o){return s+o},0),t4=Uh("ceil"),r4=Df(function(s,o){return s/o},1),i4=Uh("floor");function n4(s){return s&&s.length?_f(s,si,Sh):t}function s4(s,o){return s&&s.length?_f(s,nt(o,2),Sh):t}function a4(s){return yd(s,si)}function o4(s,o){return yd(s,nt(o,2))}function c4(s){return s&&s.length?_f(s,si,Ph):t}function f4(s,o){return s&&s.length?_f(s,nt(o,2),Ph):t}var u4=Df(function(s,o){return s*o},1),h4=Uh("round"),l4=Df(function(s,o){return s-o},0);function d4(s){return s&&s.length?dh(s,si):0}function p4(s,o){return s&&s.length?dh(s,nt(o,2)):0}return T.after=Bw,T.ary=Hp,T.assign=E5,T.assignIn=n1,T.assignInWith=zf,T.assignWith=x5,T.at=S5,T.before=Kp,T.bind=Xh,T.bindAll=O8,T.bindKey=Vp,T.castArray=Ww,T.chain=zp,T.chunk=iy,T.compact=ny,T.concat=sy,T.cond=C8,T.conforms=R8,T.constant=sl,T.countBy=dw,T.create=I5,T.curry=Gp,T.curryRight=Wp,T.debounce=Jp,T.defaults=M5,T.defaultsDeep=D5,T.defer=Lw,T.delay=qw,T.difference=ay,T.differenceBy=oy,T.differenceWith=cy,T.drop=fy,T.dropRight=uy,T.dropRightWhile=hy,T.dropWhile=ly,T.fill=dy,T.filter=gw,T.flatMap=mw,T.flatMapDeep=yw,T.flatMapDepth=ww,T.flatten=Lp,T.flattenDeep=py,T.flattenDepth=gy,T.flip=$w,T.flow=T8,T.flowRight=F8,T.fromPairs=vy,T.functions=F5,T.functionsIn=B5,T.groupBy=_w,T.initial=my,T.intersection=yy,T.intersectionBy=wy,T.intersectionWith=_y,T.invert=q5,T.invertBy=$5,T.invokeMap=Ew,T.iteratee=al,T.keyBy=xw,T.keys=mr,T.keysIn=ni,T.map=Ff,T.mapKeys=z5,T.mapValues=j5,T.matches=B8,T.matchesProperty=L8,T.memoize=Lf,T.merge=k5,T.mergeWith=s1,T.method=q8,T.methodOf=$8,T.mixin=ol,T.negate=qf,T.nthArg=z8,T.omit=H5,T.omitBy=K5,T.once=Uw,T.orderBy=Sw,T.over=j8,T.overArgs=zw,T.overEvery=k8,T.overSome=H8,T.partial=Zh,T.partialRight=Yp,T.partition=Iw,T.pick=V5,T.pickBy=a1,T.property=d1,T.propertyOf=K8,T.pull=Sy,T.pullAll=$p,T.pullAllBy=Iy,T.pullAllWith=My,T.pullAt=Dy,T.range=V8,T.rangeRight=G8,T.rearg=jw,T.reject=Pw,T.remove=Py,T.rest=kw,T.reverse=Yh,T.sampleSize=Cw,T.set=W5,T.setWith=J5,T.shuffle=Rw,T.slice=Oy,T.sortBy=Fw,T.sortedUniq=Ly,T.sortedUniqBy=qy,T.split=m8,T.spread=Hw,T.tail=$y,T.take=Uy,T.takeRight=zy,T.takeRightWhile=jy,T.takeWhile=ky,T.tap=nw,T.throttle=Kw,T.thru=Tf,T.toArray=t1,T.toPairs=o1,T.toPairsIn=c1,T.toPath=X8,T.toPlainObject=i1,T.transform=Y5,T.unary=Vw,T.union=Hy,T.unionBy=Ky,T.unionWith=Vy,T.uniq=Gy,T.uniqBy=Wy,T.uniqWith=Jy,T.unset=Q5,T.unzip=Qh,T.unzipWith=Up,T.update=X5,T.updateWith=Z5,T.values=Ha,T.valuesIn=e8,T.without=Yy,T.words=h1,T.wrap=Gw,T.xor=Qy,T.xorBy=Xy,T.xorWith=Zy,T.zip=ew,T.zipObject=tw,T.zipObjectDeep=rw,T.zipWith=iw,T.entries=o1,T.entriesIn=c1,T.extend=n1,T.extendWith=zf,ol(T,T),T.add=e4,T.attempt=l1,T.camelCase=n8,T.capitalize=f1,T.ceil=t4,T.clamp=t8,T.clone=Jw,T.cloneDeep=Qw,T.cloneDeepWith=Xw,T.cloneWith=Yw,T.conformsTo=Zw,T.deburr=u1,T.defaultTo=N8,T.divide=r4,T.endsWith=s8,T.eq=rn,T.escape=a8,T.escapeRegExp=o8,T.every=pw,T.find=vw,T.findIndex=Fp,T.findKey=P5,T.findLast=bw,T.findLastIndex=Bp,T.findLastKey=O5,T.floor=i4,T.forEach=jp,T.forEachRight=kp,T.forIn=C5,T.forInRight=R5,T.forOwn=N5,T.forOwnRight=T5,T.get=rl,T.gt=e5,T.gte=t5,T.has=L5,T.hasIn=il,T.head=qp,T.identity=si,T.includes=Aw,T.indexOf=by,T.inRange=r8,T.invoke=U5,T.isArguments=ra,T.isArray=gt,T.isArrayBuffer=r5,T.isArrayLike=ii,T.isArrayLikeObject=ar,T.isBoolean=i5,T.isBuffer=Ps,T.isDate=n5,T.isElement=s5,T.isEmpty=a5,T.isEqual=o5,T.isEqualWith=c5,T.isError=el,T.isFinite=f5,T.isFunction=is,T.isInteger=Qp,T.isLength=$f,T.isMap=Xp,T.isMatch=u5,T.isMatchWith=h5,T.isNaN=l5,T.isNative=d5,T.isNil=g5,T.isNull=p5,T.isNumber=Zp,T.isObject=Zt,T.isObjectLike=tr,T.isPlainObject=Ho,T.isRegExp=tl,T.isSafeInteger=v5,T.isSet=e1,T.isString=Uf,T.isSymbol=bi,T.isTypedArray=ka,T.isUndefined=b5,T.isWeakMap=m5,T.isWeakSet=y5,T.join=Ay,T.kebabCase=c8,T.last=Ni,T.lastIndexOf=Ey,T.lowerCase=f8,T.lowerFirst=u8,T.lt=w5,T.lte=_5,T.max=n4,T.maxBy=s4,T.mean=a4,T.meanBy=o4,T.min=c4,T.minBy=f4,T.stubArray=fl,T.stubFalse=ul,T.stubObject=W8,T.stubString=J8,T.stubTrue=Y8,T.multiply=u4,T.nth=xy,T.noConflict=U8,T.noop=cl,T.now=Bf,T.pad=h8,T.padEnd=l8,T.padStart=d8,T.parseInt=p8,T.random=i8,T.reduce=Mw,T.reduceRight=Dw,T.repeat=g8,T.replace=v8,T.result=G5,T.round=h4,T.runInContext=re,T.sample=Ow,T.size=Nw,T.snakeCase=b8,T.some=Tw,T.sortedIndex=Cy,T.sortedIndexBy=Ry,T.sortedIndexOf=Ny,T.sortedLastIndex=Ty,T.sortedLastIndexBy=Fy,T.sortedLastIndexOf=By,T.startCase=y8,T.startsWith=w8,T.subtract=l4,T.sum=d4,T.sumBy=p4,T.template=_8,T.times=Q8,T.toFinite=ns,T.toInteger=yt,T.toLength=r1,T.toLower=A8,T.toNumber=Ti,T.toSafeInteger=A5,T.toString=Bt,T.toUpper=E8,T.trim=x8,T.trimEnd=S8,T.trimStart=I8,T.truncate=M8,T.unescape=D8,T.uniqueId=Z8,T.upperCase=P8,T.upperFirst=nl,T.each=jp,T.eachRight=kp,T.first=qp,ol(T,function(){var s={};return wn(T,function(o,h){qt.call(T.prototype,h)||(s[h]=o)}),s}(),{chain:!1}),T.VERSION=i,Di(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),Di(["drop","take"],function(s,o){Mt.prototype[s]=function(h){h=h===t?1:pr(yt(h),0);var E=this.__filtered__&&!o?new Mt(this):this.clone();return E.__filtered__?E.__takeCount__=Br(h,E.__takeCount__):E.__views__.push({size:Br(h,g),type:s+(E.__dir__<0?"Right":"")}),E},Mt.prototype[s+"Right"]=function(h){return this.reverse()[s](h).reverse()}}),Di(["filter","map","takeWhile"],function(s,o){var h=o+1,E=h==l||h==x;Mt.prototype[s]=function(R){var L=this.clone();return L.__iteratees__.push({iteratee:nt(R,3),type:h}),L.__filtered__=L.__filtered__||E,L}}),Di(["head","last"],function(s,o){var h="take"+(o?"Right":"");Mt.prototype[s]=function(){return this[h](1).value()[0]}}),Di(["initial","tail"],function(s,o){var h="drop"+(o?"":"Right");Mt.prototype[s]=function(){return this.__filtered__?new Mt(this):this[h](1)}}),Mt.prototype.compact=function(){return this.filter(si)},Mt.prototype.find=function(s){return this.filter(s).head()},Mt.prototype.findLast=function(s){return this.reverse().find(s)},Mt.prototype.invokeMap=At(function(s,o){return typeof s=="function"?new Mt(this):this.map(function(h){return qo(h,s,o)})}),Mt.prototype.reject=function(s){return this.filter(qf(nt(s)))},Mt.prototype.slice=function(s,o){s=yt(s);var h=this;return h.__filtered__&&(s>0||o<0)?new Mt(h):(s<0?h=h.takeRight(-s):s&&(h=h.drop(s)),o!==t&&(o=yt(o),h=o<0?h.dropRight(-o):h.take(o-s)),h)},Mt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Mt.prototype.toArray=function(){return this.take(g)},wn(Mt.prototype,function(s,o){var h=/^(?:filter|find|map|reject)|While$/.test(o),E=/^(?:head|last)$/.test(o),R=T[E?"take"+(o=="last"?"Right":""):o],L=E||/^find/.test(o);R&&(T.prototype[o]=function(){var J=this.__wrapped__,X=E?[1]:arguments,ie=J instanceof Mt,he=X[0],le=ie||gt(J),ge=function(xt){var Rt=R.apply(T,As([xt],X));return E&&De?Rt[0]:Rt};le&&h&&typeof he=="function"&&he.length!=1&&(ie=le=!1);var De=this.__chain__,We=!!this.__actions__.length,ot=L&&!De,wt=ie&&!We;if(!L&&le){J=wt?J:new Mt(this);var ct=s.apply(J,X);return ct.__actions__.push({func:Tf,args:[ge],thisArg:t}),new Oi(ct,De)}return ot&&wt?s.apply(this,X):(ct=this.thru(ge),ot?E?ct.value()[0]:ct.value():ct)})}),Di(["pop","push","shift","sort","splice","unshift"],function(s){var o=af[s],h=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",E=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var R=arguments;if(E&&!this.__chain__){var L=this.value();return o.apply(gt(L)?L:[],R)}return this[h](function(J){return o.apply(gt(J)?J:[],R)})}}),wn(Mt.prototype,function(s,o){var h=T[o];if(h){var E=h.name+"";qt.call(qa,E)||(qa[E]=[]),qa[E].push({name:o,func:h})}}),qa[Mf(t,Q).name]=[{name:"wrapper",func:t}],Mt.prototype.clone=D3,Mt.prototype.reverse=P3,Mt.prototype.value=O3,T.prototype.at=sw,T.prototype.chain=aw,T.prototype.commit=ow,T.prototype.next=cw,T.prototype.plant=uw,T.prototype.reverse=hw,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=lw,T.prototype.first=T.prototype.head,Co&&(T.prototype[Co]=fw),T},Fa=o3();sr?((sr.exports=Fa)._=Fa,kt._=Fa):Ct._=Fa}).call(nc)})(O0,O0.exports);var aT=Object.defineProperty,oT=Object.defineProperties,cT=Object.getOwnPropertyDescriptors,$v=Object.getOwnPropertySymbols,fT=Object.prototype.hasOwnProperty,uT=Object.prototype.propertyIsEnumerable,Uv=(r,e,t)=>e in r?aT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xf=(r,e)=>{for(var t in e||(e={}))fT.call(e,t)&&Uv(r,t,e[t]);if($v)for(var t of $v(e))uT.call(e,t)&&Uv(r,t,e[t]);return r},hT=(r,e)=>oT(r,cT(e));function gn(r,e,t){var i;const n=cc(r);return((i=e.rpcMap)==null?void 0:i[n.reference])||`${Fm}?chainId=${n.namespace}:${n.reference}&projectId=${t}`}function Ma(r){return r.includes(":")?r.split(":")[1]:r}function Bm(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function lT(r,e){const t=Object.keys(e.namespaces).filter(n=>n.includes(r));if(!t.length)return[];const i=[];return t.forEach(n=>{const a=e.namespaces[n].accounts;i.push(...a)}),i}function Yl(r={},e={}){const t=zv(r),i=zv(e);return O0.exports.merge(t,i)}function zv(r){var e,t,i,n;const a={};if(!_c(r))return a;for(const[f,u]of Object.entries(r)){const v=id(f)?[f]:u.chains,p=u.methods||[],y=u.events||[],_=u.rpcMap||{},O=oc(f);a[O]=hT(Xf(Xf({},a[O]),u),{chains:tu(v,(e=a[O])==null?void 0:e.chains),methods:tu(p,(t=a[O])==null?void 0:t.methods),events:tu(y,(i=a[O])==null?void 0:i.events),rpcMap:Xf(Xf({},_),(n=a[O])==null?void 0:n.rpcMap)})}return a}function dT(r){return r.includes(":")?r.split(":")[2]:r}function jv(r){const e={};for(const[t,i]of Object.entries(r)){const n=i.methods||[],a=i.events||[],f=i.accounts||[],u=id(t)?[t]:i.chains?i.chains:Bm(i.accounts);e[t]={chains:u,methods:n,events:a,accounts:f}}return e}function Ql(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const Lm={},Lt=r=>Lm[r],Xl=(r,e)=>{Lm[r]=e};class pT{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const n=Ma(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}}var gT=Object.defineProperty,vT=Object.defineProperties,bT=Object.getOwnPropertyDescriptors,kv=Object.getOwnPropertySymbols,mT=Object.prototype.hasOwnProperty,yT=Object.prototype.propertyIsEnumerable,Hv=(r,e,t)=>e in r?gT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Kv=(r,e)=>{for(var t in e||(e={}))mT.call(e,t)&&Hv(r,t,e[t]);if(kv)for(var t of kv(e))yT.call(e,t)&&Hv(r,t,e[t]);return r},Vv=(r,e)=>vT(r,bT(e));class wT{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||gn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const n=parseInt(Ma(t));e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let n=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const a=parseInt(n,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,n;const a=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const f=this.client.session.get(e.topic),u=((n=f?.sessionProperties)==null?void 0:n.capabilities)||{};if(u!=null&&u[a])return u?.[a];const v=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Vv(Kv({},f.sessionProperties||{}),{capabilities:Vv(Kv({},u||{}),{[a]:v})})})}catch(p){console.warn("Failed to update session with capabilities",p)}return v}async getCallStatus(e){var t,i;const n=this.client.session.get(e.topic),a=(t=n.sessionProperties)==null?void 0:t.bundler_name;if(a){const u=this.getBundlerUrl(e.chainId,a);try{return await this.getUserOperationReceipt(u,e)}catch(v){console.warn("Failed to fetch call status from bundler",v,u)}}const f=(i=n.sessionProperties)==null?void 0:i.bundler_url;if(f)try{return await this.getUserOperationReceipt(f,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,f)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var i;const n=new URL(e),a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(qs("eth_getUserOperationReceipt",[(i=t.request.params)==null?void 0:i[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(e,t){return`${sT}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}class _T{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const n=Ma(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}}class AT{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const n=Ma(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}}class ET{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||gn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new vn(new Jn(i,Lt("disableProviderPing")))}}class xT{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),n=Ma(t);e[n]=this.createHttpProvider(n,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}}class ST{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const n=Ma(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}}class IT{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const n=Ma(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}}class MT{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||gn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace);return typeof i>"u"?void 0:new vn(new Jn(i,Lt("disableProviderPing")))}}class DT{constructor(e){this.name=Qa,this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(bn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(n=>{const a=cc(n);i[`${a.namespace}:${a.reference}`]=this.createHttpProvider(n)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vn(new Jn(i,Lt("disableProviderPing")))}}var PT=Object.defineProperty,OT=Object.defineProperties,CT=Object.getOwnPropertyDescriptors,Gv=Object.getOwnPropertySymbols,RT=Object.prototype.hasOwnProperty,NT=Object.prototype.propertyIsEnumerable,Wv=(r,e,t)=>e in r?PT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zf=(r,e)=>{for(var t in e||(e={}))RT.call(e,t)&&Wv(r,t,e[t]);if(Gv)for(var t of Gv(e))NT.call(e,t)&&Wv(r,t,e[t]);return r},Zl=(r,e)=>OT(r,CT(e));class pd{constructor(e){this.events=new N0,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Bc(Qu({level:e?.logger||Lv})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new pd(e);return await t.initialize(),t}async request(e,t,i){const[n,a]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Zf({},e),chainId:`${n}:${a}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,n){const a=new Date().getTime();this.request(e,i,n).then(f=>t(null,Xu(a,f))).catch(f=>t(f,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$t("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:n}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));const a=await n();if(this.session=a.session,this.session){const f=jv(this.session.namespaces);this.namespaces=Yl(this.namespaces,f),this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await n().then(a=>{this.session=a;const f=jv(a.namespaces);this.namespaces=Yl(this.namespaces,f),this.persist("namespaces",this.namespaces)}).catch(a=>{if(a.message!==Rm)throw a;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,n]=this.validateChain(e),a=this.getProvider(i);a.name===Qa?a.setDefaultChain(`${i}:${n}`,t):a.setDefaultChain(n,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Hn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await ld.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Lv,relayUrl:this.providerOpts.relayUrl||rT,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>oc(t)))];Xl("client",this.client),Xl("events",this.events),Xl("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=lT(t,this.session),n=Bm(i),a=Yl(this.namespaces,this.optionalNamespaces),f=Zl(Zf({},a[t]),{accounts:i,chains:n});switch(t){case"eip155":this.rpcProviders[t]=new wT({namespace:f});break;case"algorand":this.rpcProviders[t]=new ET({namespace:f});break;case"solana":this.rpcProviders[t]=new _T({namespace:f});break;case"cosmos":this.rpcProviders[t]=new AT({namespace:f});break;case"polkadot":this.rpcProviders[t]=new pT({namespace:f});break;case"cip34":this.rpcProviders[t]=new xT({namespace:f});break;case"elrond":this.rpcProviders[t]=new ST({namespace:f});break;case"multiversx":this.rpcProviders[t]=new IT({namespace:f});break;case"near":this.rpcProviders[t]=new MT({namespace:f});break;default:this.rpcProviders[Qa]?this.rpcProviders[Qa].updateNamespace(f):this.rpcProviders[Qa]=new DT({namespace:f})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const n=i.data;n&&Hn(n)&&this.events.emit("accountsChanged",n.map(dT))}else if(i.name==="chainChanged"){const n=t.chainId,a=t.event.data,f=oc(n),u=Ql(n)!==Ql(a)?`${f}:${Ql(a)}`:n;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:n}=t,a=(i=this.client)==null?void 0:i.session.get(e);this.session=Zl(Zf({},a),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Zl(Zf({},$t("USER_DISCONNECTED")),{data:e.topic}))}),this.on(bn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Qa]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:n}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=n,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(f=>oc(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const n=oc(Object.keys(this.namespaces)[0]),a=this.rpcProviders[n].getDefaultChain();return[n,a]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,n]=this.validateChain(e);n&&(t||this.getProvider(i).setDefaultChain(n),this.namespaces[i]?this.namespaces[i].defaultChain=n:this.namespaces[`${i}:${n}`]?this.namespaces[`${i}:${n}`].defaultChain=n:this.namespaces[`${i}:${n}`]={defaultChain:n},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${qv}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${qv}/${e}`)}}const TT=pd,FT="wc",BT="ethereum_provider",LT=`${FT}@2:${BT}:`,qT="https://rpc.walletconnect.org/v1/",C0=["eth_sendTransaction","personal_sign"],$T=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],R0=["chainChanged","accountsChanged"],UT=["chainChanged","accountsChanged","message","disconnect","connect"];var zT=Object.defineProperty,jT=Object.defineProperties,kT=Object.getOwnPropertyDescriptors,Jv=Object.getOwnPropertySymbols,HT=Object.prototype.hasOwnProperty,KT=Object.prototype.propertyIsEnumerable,Yv=(r,e,t)=>e in r?zT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xa=(r,e)=>{for(var t in e||(e={}))HT.call(e,t)&&Yv(r,t,e[t]);if(Jv)for(var t of Jv(e))KT.call(e,t)&&Yv(r,t,e[t]);return r},e0=(r,e)=>jT(r,kT(e));function Du(r){return Number(r[0].split(":")[1])}function eu(r){return`0x${r.toString(16)}`}function VT(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:n,events:a,optionalEvents:f,rpcMap:u}=r;if(!Hn(e))throw new Error("Invalid chains");const v={chains:e,methods:i||C0,events:a||R0,rpcMap:Xa({},e.length?{[Du(e)]:u[Du(e)]}:{})},p=a?.filter(D=>!R0.includes(D)),y=i?.filter(D=>!C0.includes(D));if(!t&&!f&&!n&&!(p!=null&&p.length)&&!(y!=null&&y.length))return{required:e.length?v:void 0};const _=p?.length&&y?.length||!t,O={chains:[...new Set(_?v.chains.concat(t||[]):t)],methods:[...new Set(v.methods.concat(n!=null&&n.length?n:$T))],events:[...new Set(v.events.concat(f!=null&&f.length?f:UT))],rpcMap:u};return{required:e.length?v:void 0,optional:t.length?O:void 0}}class gd{constructor(){this.events=new Hi.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=LT,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new gd;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=VT(this.rpc);try{const n=await new Promise(async(f,u)=>{var v;this.rpc.showQrModal&&((v=this.modal)==null||v.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(e0(Xa({namespaces:Xa({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic})).then(p=>{f(p)}).catch(p=>{u(new Error(p.message))})});if(!n)return;const a=Y1(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:eu(this.chainId)})}catch(n){throw this.signer.logger.error(n),n}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const i=await new Promise(async(a,f)=>{var u;this.rpc.showQrModal&&((u=this.modal)==null||u.subscribeModal(v=>{!v.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(e0(Xa({},e),{chains:this.rpc.chains}),t).then(v=>{a(v)}).catch(v=>{f(new Error(v.message))})}),n=i.session;if(n){const a=Y1(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:eu(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",eu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",e0(Xa({},$t("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",eu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,n]=e.split(":");return{chainId:`${t}:${i}`,address:n}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;const n=(t=e?.chains)!=null?t:[],a=(i=e?.optionalChains)!=null?i:[],f=n.concat(a);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const u=n.length?e?.methods||C0:[],v=n.length?e?.events||R0:[],p=e?.optionalMethods||[],y=e?.optionalEvents||[],_=e?.rpcMap||this.buildRpcMap(f,e.projectId),O=e?.qrModalOptions||void 0;return{chains:n?.map(D=>this.formatChainId(D)),optionalChains:a.map(D=>this.formatChainId(D)),methods:u,events:v,optionalMethods:p,optionalEvents:y,rpcMap:_,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:O,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(n=>{i[n]=this.getRpcUrl(n,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Du(this.rpc.chains):Du(this.rpc.optionalChains),this.signer=await TT.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await g4(()=>import("./index-ByMcmfk6.js").then(n=>n.i),__vite__mapDeps([0,1,2]));t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Xa({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:n}=e;t&&Hn(t)&&(this.rpc.chains=t.map(a=>this.formatChainId(a)),t.forEach(a=>{this.rpc.rpcMap[a]=n?.[a]||this.getRpcUrl(a)})),i&&Hn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(a=>this.formatChainId(a)),i.forEach(a=>{this.rpc.rpcMap[a]=n?.[a]||this.getRpcUrl(a)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${qT}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const mF=gd;export{mF as EthereumProvider,UT as OPTIONAL_EVENTS,$T as OPTIONAL_METHODS,R0 as REQUIRED_EVENTS,C0 as REQUIRED_METHODS,gd as default};
